<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ç»™Gitä¸Šä¸ªä»£ç†è¯•è¯•æé€Ÿ</title>
    <url>/2020/05/03/20200503-git-add-proxy/</url>
    <content><![CDATA[<h1 id="ç»™GITç”¨ä¸Šä»£ç†"><a href="#ç»™GITç”¨ä¸Šä»£ç†" class="headerlink" title="ç»™GITç”¨ä¸Šä»£ç†"></a>ç»™GITç”¨ä¸Šä»£ç†</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨çœ‹ç€æ•™ç¨‹æ­å»ºè¿™ä¸ªåšå®¢çš„æ—¶å€™ï¼Œæˆ‘åœ¨GITä¸Šä¹Ÿæ‹–äº†ä¸å°‘çš„åŒ…ã€‚ç›´è¿æœ‰æ—¶å€™çœŸçš„é€Ÿåº¦æ…¢åˆ°åè¡€ï¼ŒåŸå› å¾ˆå¤æ‚ä¹Ÿè«å¾—åŠæ³•ã€‚<br>ä¸è¿‡è¿˜å¥½ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥ç»™GITä¸Šä¸ªä»£ç†ï¼Œè¿™æ ·èƒ½ç»™é€Ÿåº¦ä¸€äº›æ”¹å–„ã€‚</p>
<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>æˆ‘æ˜¯åœ¨æœ¬æœºå™¨å®‰è£…æœ‰ä»£ç†å®¢æˆ·ç«¯ï¼Œå°ğŸ›©å’ŒV2éƒ½å½³äºã€‚<br>æˆ‘è¿™è¾¹çš„æƒ…å†µæ˜¯è¿™æ ·çš„ï¼Œå°é£æœºèµ°SOCK5ä»£ç†ï¼ŒV2èµ°çš„HTTPä»£ç†ã€‚<br>å› ä¸ºå¹³æ—¶æˆ‘åªå¯èƒ½å¼€ç€ä¸€ä¸ªï¼Œæ‰€ä»¥ç«¯å£éƒ½æ˜¯1080ã€‚</p>
<h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><p>åºŸè¯ä¸å¤šè¯´äº†ï¼Œç›´æ¥ä¸Šå‘½ä»¤ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬çœ‹çœ‹å·²æœ‰çš„è®¾ç½®.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å…¨å±€é…ç½®ä¸­çš„ä»£ç†</span></span><br><span class="line">git config --global --get http.proxy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç”Ÿæ•ˆé…ç½®ä¸­çš„ä»£ç†</span></span><br><span class="line">git config --get http.proxy</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬åŠ ä¸Šè‡ªå·±çš„ä»£ç†ã€‚<br>å½“å‰æˆ‘ä»¬å‡è®¾çš„çŠ¶æ€æ˜¯æœ¬æœºå¼€ç€å°âœˆæˆ–è€…V2ï¼Œä¸”ä»£ç†ç«¯å£ä¸º1080çš„æƒ…å†µã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‹¬å·ä¸­çš„éƒ½æ˜¯å¯é€‰é¡¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è‹¥ç”¨çš„å°é£æœº, --global æ„å‘³ç€åº”ç”¨åˆ°å…¨å±€è®¾ç½®</span></span><br><span class="line">git config (--global) http.proxy sock5://127.0.0.1:1080</span><br><span class="line">git config (--global) https.proxy sock5://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™æ ·åº”ç”¨åï¼Œæ²¡å¼€ä»£ç†GITå°±ä¼šæŠ½é£äº†ï¼Œæ‰€ä»¥å¦‚æœå¹³æ—¶é€Ÿåº¦è¿˜ä¸é”™çš„è¯è®°å¾—ç”¨å®Œå–æ¶ˆä»£ç†</span></span><br><span class="line">git config (--global) --<span class="built_in">unset</span> http.proxy (sock5://127.0.0.1:1080)</span><br><span class="line">git config (--global) --<span class="built_in">unset</span> https.proxy (sock5://127.0.0.1:1080)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‹¥ç”¨çš„V2, --global æ„å‘³ç€åº”ç”¨åˆ°å…¨å±€è®¾ç½®</span></span><br><span class="line">git config (--global) http.proxy  http://127.0.0.1:1080</span><br><span class="line">git config (--global) https.proxy https://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="comment"># å–æ¶ˆ</span></span><br><span class="line">git config (--global) --<span class="built_in">unset</span> http.proxy  ï¼ˆhttp://127.0.0.1:1080ï¼‰</span><br><span class="line">git config (--global) --<span class="built_in">unset</span> https.proxy ï¼ˆhttps://127.0.0.1:1080ï¼‰</span><br></pre></td></tr></table></figure>
<p>æŒ‚äº†ä»£ç†çœŸçš„é£é€Ÿï¼Œçˆ½åˆ°ã€‚</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>å¸¸ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»™Unityä¸Šä»£ç†</title>
    <url>/2020/05/18/20200518-unity-hub-w-proxy/</url>
    <content><![CDATA[<h1 id="ç»™Unityç”¨ä¸Šä»£ç†"><a href="#ç»™Unityç”¨ä¸Šä»£ç†" class="headerlink" title="ç»™Unityç”¨ä¸Šä»£ç†"></a>ç»™Unityç”¨ä¸Šä»£ç†</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¹‹å‰æœ‰æ®µæ—¶é—´å…¬å¸çš„ç½‘ç»œä¸æ˜¯å¾ˆç¨³å®šï¼Œä»UnityHubä¸Šæ‹–ä¸œè¥¿99%å¤±è´¥ã€‚è‡ªå·±åˆå¤ªèœä¸æƒ³å®‰è£…Android Studioæ‰‹åŠ¨è®¾ç½®å®‰å“æ‰“åŒ…çš„ä¸œè¥¿ï¼Œäºæ˜¯ä¹åªèƒ½æƒ³åŠæ³•ç»™ä¸‹è½½åŠ é€Ÿã€‚</p>
<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>é¦–å…ˆä½ è¦æœ‰é‚£ä¸ªï¼Œå°±æ˜¯é‚£ä¸ªä½ ä¸ºäº†çœ‹PHæ‰å¼„çš„å°å·¥å…·ï¼šï¼‰</p>
<h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><p>é¦–å…ˆé»˜è®¤æˆ‘ä»¬çš„å°âœˆä»£ç†ç«¯å£æ˜¯1080ã€‚<br>ä¼¼ä¹V2å¯ä»¥åŒæ—¶æœ‰SOCK5å’ŒHTTPä»£ç†çš„æ ·å­ï¼Œé‚£ä¹ŸæŠŠHTTPä»£ç†çš„ç«¯å£è®¾ç½®æˆ1080.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ä»£ç†</span></span><br><span class="line"><span class="built_in">set</span> HTTP_PROXY=http://127.0.0.1:1080</span><br><span class="line"><span class="built_in">set</span> HTTPS_PROXY=http://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line">start <span class="string">""</span> <span class="string">"your unity hub path"</span></span><br><span class="line"><span class="comment"># like path is like -&gt; D:\Unity\Unity Hub\Unity Hub.exe</span></span><br></pre></td></tr></table></figure>
<h2 id="çˆ†ç‚¸"><a href="#çˆ†ç‚¸" class="headerlink" title="çˆ†ç‚¸"></a>çˆ†ç‚¸</h2><p>éå¸¸ç®€å•å°±æ˜¯è¿™æ ·ã€‚</p>
<p>å…¶å®ä¸œè¥¿éƒ½æ˜¯ä»æœ‰æœ¨æ¡‘åšå®¢çœ‹æ¥çš„<br><a href="https://www.yomunchan.moe/archives/320" target="_blank" rel="noopener">https://www.yomunchan.moe/archives/320</a></p>
<p>è¿™è¾¹æœ‰è›®å¤šæ¸¸æˆå¼€å‘ç›¸å…³çš„æ–‡ç« ï¼Œå¸®äº†æˆ‘ä¸å°‘ï¼Œååˆ†æ„Ÿè°¢äº†ã€‚</p>
]]></content>
      <tags>
        <tag>å¸¸ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title>UnityEditor EasyButton ç®€æ˜“ç¼–è¾‘å™¨æŒ‰é’®</title>
    <url>/2020/06/05/20200605-Unity-EasyButton/</url>
    <content><![CDATA[<p>ä¸€ä¸ªæ¯”è¾ƒç®€å•ä½†æ˜¯æ–¹ä¾¿çš„ä¸œè¥¿</p>
<h1 id="è¿™æ˜¯å•¥"><a href="#è¿™æ˜¯å•¥" class="headerlink" title="è¿™æ˜¯å•¥"></a>è¿™æ˜¯å•¥</h1><p>æˆ‘ä»¬å¹³æ—¶äº›å†™äº†ä¸€äº›å‡½æ•°åœ¨MonoBehavioré‡Œæƒ³æµ‹è¯•ï¼Œè¿™è¾¹å¯ä»¥æ•´ä¸€ä¸ªç‰¹æ€§æ”¾åœ¨éœ€è¦å¿«é€Ÿè°ƒç”¨çš„æ–¹æ³•ä¸Š(é™äºæ— å‚æ•°çš„å‡½æ•°)ã€‚<br>è¿™è¾¹å¯ä»¥åšä¸€ä¸ªç¼–è¾‘å™¨çš„æŒ‰é’®ï¼Œç›´æ¥æ”¾åœ¨MonoBehaviorçš„ç»„ä»¶é¢æ¿ä¸Šã€‚</p>
<h1 id="ä¸Šä»£ç "><a href="#ä¸Šä»£ç " class="headerlink" title="ä¸Šä»£ç "></a>ä¸Šä»£ç </h1><p>å…ˆå®šä¹‰æˆ‘ä»¬éœ€è¦çš„è¿™ä¸ªç‰¹æ€§ï¼Œæ—¢ç„¶æ˜¯åšä¸ªæŒ‰é’®ï¼Œé‚£å°±å«Buttonå¥½äº†ã€‚é‚£ä¹ˆè¿™ä¸ªç‰¹æ€§å°±åº”è¯¥å«åšButtonAttributeã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">AttributeUsage(AttributeTargets.Method)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ButtonAttribute</span> : <span class="title">Attribute</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> m_methodName = <span class="keyword">string</span>.Empty;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ButtonAttribute</span>(<span class="params"><span class="keyword">string</span> methodName</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_methodName = methodName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¢ç„¶æˆ‘ä»¬è¦åœ¨Inspectoré¢æ¿ä¸ŠåŠ ä¸œè¥¿ï¼Œé‚£æˆ‘ä»¬ä¹Ÿè¦æ“ä½œä¸€ä¸‹Inspectoré¢æ¿ã€‚<br>æˆ‘ä»¬åšä¸€ä¸ªCustomEditoré¢æ¿ç»™æˆ‘ä»¬çš„MonoBehaviorï¼Œè¿™ä¸ªé¢æ¿ä¼šä½œç”¨äºæ‰€æœ‰çš„MonoBehaviorã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">CustomEditor(typeof(MonoBehaviour), true), CanEditMultipleObjects</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseEditor</span> : <span class="title">Editor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Type m_targetType = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnInspectorGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// draw default stuff</span></span><br><span class="line">        <span class="keyword">base</span>.OnInspectorGUI();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == m_targetType)</span><br><span class="line">            m_targetType = target.GetType();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (m_targetType != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// try find member function and static function :)</span></span><br><span class="line">            MethodInfo[] methods = m_targetType.GetMethods(BindingFlags.Instance | BindingFlags.Static | BindingFlags.NonPublic | BindingFlags.Public);</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> method <span class="keyword">in</span> methods)</span><br><span class="line">            &#123;</span><br><span class="line">                ButtonAttribute button = method.GetCustomAttribute&lt;ButtonAttribute&gt;();</span><br><span class="line">                <span class="keyword">if</span> (button != <span class="literal">null</span> &amp;&amp; method.GetParameters().Length &gt; <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    EditorGUILayout.HelpBox(<span class="string">"ButtonAttribute: method cant have parameterz."</span>, MessageType.Warning);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (button != <span class="literal">null</span> &amp;&amp; GUILayout.Button(button.m_methodName))</span><br><span class="line">                &#123;</span><br><span class="line">                    method.Invoke(target, <span class="keyword">new</span> <span class="keyword">object</span>[] &#123; &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            m_targetType = m_targetType.BaseType;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ–°å»ºä¸€ä¸ªMonoBehaviorè„šæœ¬ï¼Œè¯•è¯•</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ToxicTester</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Button(<span class="meta-string">"try exec public method"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ExecPublicMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"try exec public method wa"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Button(<span class="meta-string">"try exec protected method"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">ExecProtectedMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"try exec protected method wa"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [<span class="meta">Button(<span class="meta-string">"try exec private method"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ExecPrivateMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"try exec private method wa"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Button(<span class="meta-string">"try exec public static method"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ExecPublicStaticMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"try exec public static method wa"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/06/05/20200605-Unity-EasyButton/20200605-pic001.png" class="" title="split">
<p>æ•ˆæœå¦‚å›¾</p>
]]></content>
      <categories>
        <category>UnityEditor</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>UnityEditor</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‘¸ä¸€ä¸ªç®€å•çš„ Unity Log Console (1)</title>
    <url>/2020/05/31/20200531-CloneUnityConsole1/</url>
    <content><![CDATA[<p>æœ¬èœç‹—åœ¨ä¸Šå‘¨é¢†äº†ä¸€ä¸ªåšLogManagerçš„ä»»åŠ¡ã€‚å¾ˆé«˜å…´ä¹Ÿå¾ˆæ…Œï¼Œæ¯•ç«Ÿä»æ¥æ²¡åšè¿‡ç¼–è¾‘å™¨å¼€å‘ï¼Œäºæ˜¯é¢å‘æœç´¢å¼•æ“ç¼–ç¨‹å¼€å§‹è¾£ï¼Œæ‰¾äº†ä¸€äº›æ•™ç¨‹å­¦ç€åšï¼Œé¡ºä¾¿åˆ†äº«ä¸€ä¸‹ã€‚</p>
<h1 id="éœ€æ±‚åˆ†æï¼ˆï¼Ÿ"><a href="#éœ€æ±‚åˆ†æï¼ˆï¼Ÿ" class="headerlink" title="éœ€æ±‚åˆ†æï¼ˆï¼Ÿ"></a>éœ€æ±‚åˆ†æï¼ˆï¼Ÿ</h1><p>ç»„é‡Œå¯¹è¿™ä¸ªLogManagerçš„è¦æ±‚æ˜¯åœ¨UnityåŸæ¥çš„LogåŠŸèƒ½ä¸Šå†åŠ ä¸Šæ ¹æ®æ ‡ç­¾å’Œå±é™©åº¦(?)æ¥ç­›é€‰ã€‚<br>ä»”ç»†æƒ³æƒ³è¿˜æŒºéº»çƒ¦ã€‚éœ€è¦ç­›é€‰çš„è¯ï¼Œé‚£è‡ªç„¶éœ€è¦ä¸€ä¸ªConsoleé¢æ¿ï¼Œä¼¼ä¹UnityåŸæœ¬çš„Consoleä¸æ–¹ä¾¿æ‰©å±•ï¼Œç´¢æ€§è·Ÿç€ç½‘ä¸Šçš„æ•™ç¨‹é‡æ–°åšä¸€ä¸ªã€‚</p>
<h1 id="å¼¹å‡ºçª—å£"><a href="#å¼¹å‡ºçª—å£" class="headerlink" title="å¼¹å‡ºçª—å£"></a>å¼¹å‡ºçª—å£</h1><p>é¦–å…ˆæˆ‘ä»¬å…ˆæŠŠçª—å£å¼¹å‡ºæ¥ã€‚ä»£ç å¾ˆç®€å•ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä»Unityå¤´é¡¶çš„èœå•æ ä¸­çš„Windowä¸­æ‰¾åˆ°è¿™ä¸ªé¢æ¿å¹¶æ‰“å¼€ã€‚æ‰“å¼€äº†æ˜¯ç©ºç™½çš„ï¼Œå½“ç„¶å•¦ï¼Œå› ä¸ºè¿˜ä»€ä¹ˆéƒ½æ²¡ç”»ä¸Šå»ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempConsoleWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">	[<span class="meta">MenuItem(<span class="meta-string">"Window/Temp Console"</span>)</span>]</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenWindow</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		TempConsoleWindow window = GetWindow&lt;TempConsoleWindow&gt;();</span><br><span class="line">		GUIContent titleContent = <span class="keyword">new</span> GUIContent(<span class="string">"TempConsole"</span>, EditorGUIUtility.Load(<span class="string">"icons/UnityEditor.ConsoleWindow.png"</span>) <span class="keyword">as</span> Texture2D, <span class="string">"a clone sonsole"</span>);</span><br><span class="line">		window.titleContent = titleContent;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ†å‰²åŒºå—"><a href="#åˆ†å‰²åŒºå—" class="headerlink" title="åˆ†å‰²åŒºå—"></a>åˆ†å‰²åŒºå—</h1><img src="/2020/05/31/20200531-CloneUnityConsole1/20200531-Unity01.png" class="" title="split">
<p>æˆ‘ä»¬æŠŠåŸæœ¬çš„é¢æ¿åˆ†æˆ4å—ï¼š1.èœå•æ ï¼›2. LogåŒºï¼›3. è°ƒæ•´æ£’(ä¸Šä¸‹ç§»åŠ¨è°ƒæ•´åŒºåŸŸå¤§å°)ï¼›4. è¯¦æƒ…åŒºã€‚äºæ˜¯ä¹æˆ‘ä»¬ç»™è¿™ä¸ª4ä¸ªåŒºåˆ›å»ºå“åº”çš„å˜é‡ä¸ºäº†æ–¹ä¾¿ç»˜åˆ¶ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Rect m_menuUpperBar = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span> Rect m_upperPanel = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span> Rect m_lowerPanel = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span> Rect m_resizer = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">readonly</span> <span class="keyword">float</span> MENU_BAR_HEIGHT = <span class="number">20.0f</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">float</span> m_upperSizeRatio = <span class="number">0.5f</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">readonly</span> <span class="keyword">float</span> RESIZER_HEIGHT = <span class="number">4.0f</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">float</span> PanelGroupHeight =&gt; position.height - MENU_BAR_HEIGHT;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isResizing = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<h1 id="å·çš®"><a href="#å·çš®" class="headerlink" title="å·çš®"></a>å·çš®</h1><p>Unityçš„ç»˜åˆ¶GUIæ–¹æ³•ä¸­å¯ä»¥å¡«å†™é£æ ¼å‚æ•°ï¼Œæˆ‘ä»¬ç»˜åˆ¶å››ä¸ªåŒºå—çš„æ—¶å€™è‡ªç„¶ä¹Ÿéœ€è¦ä¸ºåŒºå—å‡†å¤‡çš®å’Œæ–‡å­—é¢œè‰²ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// logåŒºé£æ ¼ä»¥åŠlogåŒºçš„æ ‡é¢˜é£æ ¼</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_panelLabelStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span> GUIStyle m_panelStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="comment">// è°ƒæ•´æ£’å„¿çš„é£æ ¼</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_resizerStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="comment">// box item å…¶å®æ˜¯åœ¨logåŒºæ˜¾ç¤ºçš„æ¯ä¸€ä¸ªlog item</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_boxItemStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="comment">// è¿™æ˜¯ logè¯¦æƒ…çš„æ–‡å­—é£æ ¼</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_textAreaStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªæ— è¾¹æ¡†çš„æŒ‰é’®é£æ ¼ï¼Œä¸ºä»£ç è·³è½¬å‡†å¤‡</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_labelButtonStyle = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å„ç§å›¾æ ‡</span></span><br><span class="line"><span class="keyword">private</span> Texture2D m_infoIcon = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_infoIconSmall = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_warningIcon = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_warningIconSmall = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_errorIcon = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_errorIconSmall = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Texture2D m_boxBgOdd = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_boxBgEven = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_boxBgSelected = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_boxIcon = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å„ç§çš®</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">GetAssets</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_panelLabelStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_panelLabelStyle.fixedHeight = <span class="number">30.0f</span>;</span><br><span class="line">    m_panelLabelStyle.richText = <span class="literal">true</span>;</span><br><span class="line">    m_panelLabelStyle.normal.textColor = Color.white;</span><br><span class="line">    m_panelLabelStyle.fontSize = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    m_infoIcon = EditorGUIUtility.Load(<span class="string">"icons/console.infoicon.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_infoIconSmall = EditorGUIUtility.Load(<span class="string">"icons/console.infoicon.sml.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_warningIcon = EditorGUIUtility.Load(<span class="string">"icons/console.warnicon.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_warningIconSmall = EditorGUIUtility.Load(<span class="string">"icons/console.warnicon.sml.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_errorIcon = EditorGUIUtility.Load(<span class="string">"icons/console.erroricon.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_errorIconSmall = EditorGUIUtility.Load(<span class="string">"icons/console.erroricon.sml.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line"></span><br><span class="line">    m_resizerStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line"></span><br><span class="line">    m_panelStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_panelStyle.normal.background = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/projectbrowsericonareabg.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    <span class="comment">// è¿™è¡Œæ˜¯åŒäº‹å‘Šè¯‰æˆ‘çš„ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸ç®¡ç”¨ï¼Œç›´æ¥ç”¨ä¼šæœ‰ç©ºå¼•ç”¨æŠ¥é”™ï¼Œè¦åœ¨GUIé‡Œç”¨</span></span><br><span class="line">    <span class="comment">// m_panelStyle.normal.background = GUI.skin.window.normal.background; </span></span><br><span class="line"></span><br><span class="line">    m_boxItemStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_boxItemStyle.normal.textColor = <span class="keyword">new</span> Color(<span class="number">0.7f</span>, <span class="number">0.7f</span>, <span class="number">0.7f</span>);</span><br><span class="line"></span><br><span class="line">    m_boxBgOdd = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/cn entrybackodd.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_boxBgEven = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/cnentrybackeven.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_boxBgSelected = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/menuitemhover.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line"></span><br><span class="line">    m_textAreaStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_textAreaStyle.normal.textColor = <span class="keyword">new</span> Color(<span class="number">0.9f</span>, <span class="number">0.9f</span>, <span class="number">0.9f</span>);</span><br><span class="line">    m_textAreaStyle.normal.background = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/projectbrowsericonareabg.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line"></span><br><span class="line">    m_labelButtonStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_labelButtonStyle.normal.textColor = Color.green;</span><br><span class="line">    m_labelButtonStyle.normal.background = m_textAreaStyle.normal.background;</span><br><span class="line">    m_labelButtonStyle.alignment = TextAnchor.MiddleLeft;</span><br><span class="line">    m_labelButtonStyle.stretchWidth = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> b = m_labelButtonStyle.border;</span><br><span class="line">    b.left = <span class="number">0</span>;</span><br><span class="line">    b.right = <span class="number">0</span>;</span><br><span class="line">    b.top = <span class="number">0</span>;</span><br><span class="line">    b.bottom = <span class="number">0</span>;</span><br><span class="line">    m_labelButtonStyle.border = b;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    GetAssets();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è·å–å›¾åƒçš„å‚æ•°éƒ½æ˜¯magic numberï¼Œè¿™é‡Œä¸å¤šæã€‚å›¾æ ‡æµè§ˆå’Œè·å–å‚æ•°å¯ä»¥å‚è€ƒä¸‹é¢ä¸¤ä¸ªé¡µé¢ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å‡†å¤‡è‡ªå·±çš„ç´ æã€‚</p>
<p><a href="https://unitylist.com/p/5c3/Unity-editor-icons" target="_blank" rel="noopener">https://unitylist.com/p/5c3/Unity-editor-icons</a><br><a href="https://gist.github.com/rus89/375e107ed8c6db79d0c41b8612e5dbf3" target="_blank" rel="noopener">https://gist.github.com/rus89/375e107ed8c6db79d0c41b8612e5dbf3</a></p>
<h1 id="ç»˜åˆ¶èœå•æ "><a href="#ç»˜åˆ¶èœå•æ " class="headerlink" title="ç»˜åˆ¶èœå•æ "></a>ç»˜åˆ¶èœå•æ </h1><p>èœå•æ ä¸Šæœ‰å‡ ä¸ªæŒ‰é’®ï¼Œæˆ‘ä»¬æŠŠæœ€å¸¸ç”¨çš„å¦‚æ¸…ç†ï¼ŒPlayå¼€å§‹æ¸…é™¤ä»¥åŠå³è¾¹ä¸‰ä¸ªFilteré€‰é¡¹ã€‚é™¤äº†â€™Clearâ€™æ˜¯Buttonï¼Œå…¶å®ƒçš„éƒ½æ˜¯Toggleã€‚æ‰€ä»¥å¾—å‡†å¤‡ä¸€äº›å¸ƒå°”å˜é‡ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isClearOnPlay = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isClearOnBuild = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">bool</span> IsClearOnBuild =&gt; m_isClearOnBuild;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isErrorPause = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isShowLog = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isShowWarning = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isShowError = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> m_normalLogCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> m_warningLogCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> m_errorLogCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> HashSet&lt;LogType&gt; m_logTypeForUnshow = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<p>å‡†å¤‡å¥½äº†ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¼€å§‹ç»˜åˆ¶èœå•æ äº†ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawMenuUpperBar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_menuUpperBar = <span class="keyword">new</span> Rect(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="keyword">this</span>.position.width, MENU_BAR_HEIGHT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€å§‹ç»˜åˆ¶</span></span><br><span class="line">    GUILayout.BeginArea(m_menuUpperBar, EditorStyles.toolbar);</span><br><span class="line">    <span class="comment">// æ¨ªå‘ç»˜åˆ¶ï¼ï¼ï¼</span></span><br><span class="line">    GUILayout.BeginHorizontal();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (GUILayout.Button(<span class="keyword">new</span> GUIContent(<span class="string">"Clear"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">40.0f</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨äºæ¸…ç©ºæ‰€æœ‰çš„ log</span></span><br><span class="line">        ClearLogs();</span><br><span class="line">    &#125;</span><br><span class="line">    GUILayout.Space(<span class="number">5.0f</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// m_isCollapse = GUILayout.Toggle(m_isCollapse, new GUIContent("Collapse"), EditorStyles.toolbarButton, GUILayout.Width(55.0f));</span></span><br><span class="line">    m_isClearOnPlay = GUILayout.Toggle(m_isClearOnPlay, <span class="keyword">new</span> GUIContent(<span class="string">"Clear On Play"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">80.0f</span>));</span><br><span class="line">    m_isClearOnBuild = GUILayout.Toggle(m_isClearOnBuild, <span class="keyword">new</span> GUIContent(<span class="string">"Clear On Build"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">85.0f</span>));</span><br><span class="line">    m_isErrorPause = GUILayout.Toggle(m_isErrorPause, <span class="keyword">new</span> GUIContent(<span class="string">"Error Pause"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">70.0f</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼¹æ€§ç©ºç™½ï¼Œæˆ‘ä¸å¤ªæ¸…æ¥šåº”è¯¥æ€ä¹ˆæè¿°ï¼Œä½†æ˜¯å®ƒå¯ä»¥æŠŠåé¢çš„å‡ ä¸ªToggleéƒ½å°½å¯èƒ½å¾€åé¢æ¨</span></span><br><span class="line">    GUILayout.FlexibleSpace();</span><br><span class="line"></span><br><span class="line">    m_normalLogCount = Mathf.Clamp(m_normalLogCount, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">    m_warningLogCount = Mathf.Clamp(m_warningLogCount, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">    m_errorLogCount = Mathf.Clamp(m_errorLogCount, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">    m_isShowLog = GUILayout.Toggle(m_isShowLog, <span class="keyword">new</span> GUIContent(m_numStrs[m_normalLogCount], m_infoIconSmall), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">30.0f</span>));</span><br><span class="line">    m_isShowWarning = GUILayout.Toggle(m_isShowWarning, <span class="keyword">new</span> GUIContent(m_numStrs[m_warningLogCount], m_warningIconSmall), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">30.0f</span>));</span><br><span class="line">    m_isShowError = GUILayout.Toggle(m_isShowError, <span class="keyword">new</span> GUIContent(m_numStrs[m_errorLogCount], m_errorIconSmall), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">30.0f</span>));</span><br><span class="line"></span><br><span class="line">    m_logTypeForUnshow.Clear();</span><br><span class="line">    <span class="keyword">if</span> (!m_isShowLog)</span><br><span class="line">    &#123;</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Log);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!m_isShowWarning)</span><br><span class="line">    &#123;</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Warning);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!m_isShowError)</span><br><span class="line">    &#123;</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Error);</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Assert);</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Exception);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨ªå‘ç»˜åˆ¶ç»“æŸ</span></span><br><span class="line">    GUILayout.EndHorizontal();</span><br><span class="line">    <span class="comment">// åŒºåŸŸç»˜åˆ¶ç»“æŸ</span></span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…è°ƒç”¨ç»˜åˆ¶</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DrawMenuUpperBar();</span><br><span class="line">    <span class="comment">//DrawUpperPanel();</span></span><br><span class="line">    <span class="comment">//DrawLowerPanel();</span></span><br><span class="line">    <span class="comment">//DrawResizer();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±æŠŠèœå•æ ç»˜åˆ¶å¥½äº†ã€‚</p>
<h1 id="ç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºæ "><a href="#ç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºæ " class="headerlink" title="ç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºæ "></a>ç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºæ </h1><p>æ¥ä¸‹æ¥å†ç»˜åˆ¶è°ƒæ•´æ£’ä¹‹å‰å…ˆç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºï¼Œå¾…ä¼šå„¿åšå¥½è°ƒæ•´æ£’ä¹‹åå°±èƒ½ç›´æ¥æµ‹è¯•æ•ˆæœã€‚è¦æ³¨æ„ç»™èœå•æ ä»¥åŠè°ƒæ•´ç‰ˆé¢„ç•™çš„é«˜åº¦ï¼Œä¸ç„¶ä¼šå¾—åˆ°é”™è¯¯çš„åŒºåŸŸå¤§å°ï¼Œæ·»åŠ è°ƒæ•´æ£’åä¼šæ›´ä¼šå‡ºç°å¥‡æ€ªç°è±¡ã€‚<br>ç°åœ¨åªéœ€è¦ç»™ä¸Šä¸‹åŒºç»˜åˆ¶ç©ºç™½å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawUpperPanel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_upperPanel = <span class="keyword">new</span> Rect(<span class="number">0</span>, MENU_BAR_HEIGHT, <span class="keyword">this</span>.position.width, (<span class="keyword">this</span>.position.height - MENU_BAR_HEIGHT) * m_upperSizeRatio);</span><br><span class="line">    GUILayout.BeginArea(m_upperPanel, m_panelStyle);</span><br><span class="line">    GUILayout.Label(<span class="string">"Log"</span>, m_panelLabelStyle);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ºäº†ç”»log itemè€Œå‡†å¤‡çš„ ScrollView</span></span><br><span class="line">    m_upperPanelScroll = GUILayout.BeginScrollView(m_upperPanelScroll);</span><br><span class="line">    GUILayout.EndScrollView();</span><br><span class="line"></span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawLowerPanel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> yPos = PanelGroupHeight * m_upperSizeRatio + MENU_BAR_HEIGHT + RESIZER_HEIGHT;</span><br><span class="line">    m_lowerPanel = <span class="keyword">new</span> Rect(<span class="number">0</span>, yPos, <span class="keyword">this</span>.position.width, PanelGroupHeight * (<span class="number">1.0f</span> - m_upperSizeRatio));</span><br><span class="line">    GUILayout.BeginArea(m_lowerPanel, m_panelStyle);</span><br><span class="line">    GUILayout.Label(<span class="string">"Log Detail"</span>, m_panelLabelStyle);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸º logè¯¦æƒ…å‡†å¤‡çš„ ScrollView</span></span><br><span class="line">    m_lowerPanelScroll = GUILayout.BeginScrollView(m_lowerPanelScroll);</span><br><span class="line">    GUILayout.EndScrollView();</span><br><span class="line"></span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…è°ƒç”¨ç»˜åˆ¶</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DrawMenuUpperBar();</span><br><span class="line">    DrawUpperPanel();</span><br><span class="line">    DrawLowerPanel();</span><br><span class="line">    <span class="comment">//DrawResizer();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç»˜åˆ¶è°ƒæ•´æ£’-æ·»åŠ åŒºåŸŸè°ƒæ•´"><a href="#ç»˜åˆ¶è°ƒæ•´æ£’-æ·»åŠ åŒºåŸŸè°ƒæ•´" class="headerlink" title="ç»˜åˆ¶è°ƒæ•´æ£’ æ·»åŠ åŒºåŸŸè°ƒæ•´"></a>ç»˜åˆ¶è°ƒæ•´æ£’ æ·»åŠ åŒºåŸŸè°ƒæ•´</h1><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawResizer</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> yPos = (<span class="keyword">this</span>.position.height - MENU_BAR_HEIGHT) * m_upperSizeRatio + MENU_BAR_HEIGHT;</span><br><span class="line">    m_resizer = <span class="keyword">new</span> Rect(<span class="number">0</span>, yPos, <span class="keyword">this</span>.position.width, RESIZER_HEIGHT);</span><br><span class="line"></span><br><span class="line">    GUILayout.BeginArea(<span class="keyword">new</span> Rect(m_resizer.position + (Vector2.up * RESIZER_HEIGHT), <span class="keyword">new</span> Vector2(<span class="keyword">this</span>.position.width, <span class="number">2.0f</span>)), m_resizerStyle);</span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠ m_resizer åŒºåŸŸå†…çš„å…‰æ ‡æ¢æˆæ‹‰ä¼¸æŒ‡ç¤ºå…‰æ ‡</span></span><br><span class="line">    EditorGUIUtility.AddCursorRect(m_resizer, MouseCursor.ResizeVertical);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Resize</span>(<span class="params">Event currentEvent</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (m_isResizing)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// é€šè¿‡é¼ æ ‡ä½ç½®æ”¹å˜è°ƒæ•´æ£’ä½ç½®</span></span><br><span class="line">        <span class="keyword">float</span> pos = currentEvent.mousePosition.y - MENU_BAR_HEIGHT;</span><br><span class="line"></span><br><span class="line">        m_upperSizeRatio = pos / PanelGroupHeight;</span><br><span class="line">        m_upperSizeRatio = Mathf.Clamp(m_upperSizeRatio, <span class="number">0.5f</span>, <span class="number">0.8f</span>);</span><br><span class="line">        <span class="comment">//Debug.Log($"next upper ratio &#123;m_upperSizeRatio&#125;");</span></span><br><span class="line">        Repaint();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ProcessEvents</span>(<span class="params">Event currentEvent</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (EventType.MouseDown == currentEvent.type)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// if press mouse left in resizer</span></span><br><span class="line">        m_isResizing = (<span class="number">0</span> == currentEvent.button &amp;&amp; m_resizer.Contains(currentEvent.mousePosition));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (EventType.MouseUp == currentEvent.type)</span><br><span class="line">    &#123;</span><br><span class="line">        m_isResizing = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Resize(currentEvent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å…¶å®æ„Ÿè§‰ç¼–è¾‘å™¨å¼€å‘æŒºéº»çƒ¦çš„ï¼Œé™¤äº†åŒºåŸŸç»˜åˆ¶è¦æ³¨æ„ï¼Œè¿˜æœ‰ä¸€å †APIä¸å¥½æŸ¥ä¸ä¼šç”¨ã€‚ä¸‹ä¸€æœŸå°†ä¼šå°†Logä¿¡æ¯æ•è·å¹¶æ˜¾ç¤ºåœ¨æˆ‘ä»¬è‡ªå·±çš„è¿™ä¸ªConsoleä¸Šã€‚</p>
<hr>
<p>å®Œæ•´å·¥ç¨‹é“¾æ¥(æŒç»­æ›´æ–°ä¸­) :<br><a href="https://github.com/2C2C2C/TempUnityLogConsoleClone" target="_blank" rel="noopener">https://github.com/2C2C2C/TempUnityLogConsoleClone</a></p>
<p>P.S : æˆ‘åœ¨åšçš„æ—¶å€™æ˜¯å‚è€ƒäº†æŸä¸ªæ¸¸æˆå·¥ä½œå®¤å‘å¸ƒçš„æ•™ç¨‹ï¼Œæˆ‘ä¹Ÿé¡ºä¾¿æŠŠè¿™ä¸ªæ•™ç¨‹åˆ†äº«å‡ºæ¥ã€‚<br><a href="https://gram.gs/gramlog/creating-editor-windows-in-unity/" target="_blank" rel="noopener">https://gram.gs/gramlog/creating-editor-windows-in-unity/</a></p>
]]></content>
      <categories>
        <category>UnityEditor</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>UnityEditor</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‘¸ä¸€ä¸ªç®€å•çš„ Unity Log Console (2)</title>
    <url>/2020/05/31/20200531-CloneUnityConsole2/</url>
    <content><![CDATA[<p>ä¸Šä¸€æœŸæˆ‘ä»¬åšå®Œäº†åŸºæœ¬çš„é¢æ¿ç»˜åˆ¶ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å¾€é‡Œé¢æ·»åŠ ç®€å•çš„å†…å®¹äº†ã€‚</p>
<h1 id="å®šä¹‰æ˜¾ç¤ºå•ä½"><a href="#å®šä¹‰æ˜¾ç¤ºå•ä½" class="headerlink" title="å®šä¹‰æ˜¾ç¤ºå•ä½"></a>å®šä¹‰æ˜¾ç¤ºå•ä½</h1><p>æ—¢ç„¶æˆ‘ä»¬è¦æ˜¾ç¤ºLogï¼Œé‚£å°±å®šä¹‰ä¸€äº›æ•°æ®ç»“æ„ç”¨äºå­˜å‚¨è¿™äº›Logã€‚å› ä¸ºè¿™äº›ä¸œè¥¿åœ¨æˆ‘ä»¬çš„consoleä¸­åªéœ€è¦æ˜¾ç¤ºå°±è¡Œäº†ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰åªè¯»çš„æ•°æ®å°±å¯ä»¥ï¼Œæˆ–è®¸è¿˜èƒ½æé«˜æ€§èƒ½ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LogItem</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">bool</span> IsSelected &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">string</span> LogInfo = <span class="keyword">string</span>.Empty; <span class="comment">// Logç®€è¦ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">string</span> LogMessage = <span class="keyword">string</span>.Empty; <span class="comment">// Log è°ƒç”¨æ ˆï¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> LogType GetLogType = LogType.Log;</span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LogItem</span>(<span class="params"><span class="keyword">bool</span> isSelected, <span class="keyword">string</span> info, <span class="keyword">string</span> message, LogType type</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        IsSelected = isSelected;</span><br><span class="line">        <span class="comment">// è®°å¾—åŠ ä¸Šæ—¶é—´ï¼ï¼ï¼</span></span><br><span class="line">        LogInfo = <span class="keyword">string</span>.Format(<span class="string">"[&#123;0&#125;] &#123;1&#125;"</span>, System.DateTime.Now.ToLongTimeString(), info);</span><br><span class="line">        LogMessage = message;</span><br><span class="line">        GetLogType = type;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempConsoleWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LogMessageReceived</span>(<span class="params"><span class="keyword">string</span> condition, <span class="keyword">string</span> stackTrace, LogType type</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">            LogItem log = <span class="keyword">new</span> LogItem(<span class="literal">false</span>, condition, stackTrace, type);</span><br><span class="line">            m_logItems.Add(log);</span><br><span class="line">            <span class="keyword">switch</span> (type)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> LogType.Error:</span><br><span class="line">                    m_errorLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> LogType.Assert:</span><br><span class="line">                    m_errorLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> LogType.Warning:</span><br><span class="line">                    m_warningLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> LogType.Log:</span><br><span class="line">                    m_normalLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> LogType.Exception:</span><br><span class="line">                    m_errorLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    m_errorLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä¸»åŠ¨åˆ·æ–°ï¼Œå› ä¸ºå½“æ­¤çª—å£æ²¡æœ‰ç„¦ç‚¹æ—¶ä¼¼ä¹æ— æ³•èµ° OnGUI() åˆ·æ–°ã€‚</span></span><br><span class="line">            Repaint();</span><br><span class="line">            <span class="comment">//GUI.changed = true;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="comment">// ....</span></span><br><span class="line">		<span class="comment">// ç›‘å¬æ­¤äº‹ä»¶ï¼Œå½“Debug.Log("")è¢«è°ƒç”¨çš„æ—¶å€™å°±ä¼šå“åº”</span></span><br><span class="line">		Application.logMessageReceived += LogMessageReceived;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDestroy</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="comment">// ....</span></span><br><span class="line">		Application.logMessageReceived -= LogMessageReceived;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åœ¨ä¸Šéƒ¨é¢æ¿æ˜¾ç¤ºLog"><a href="#åœ¨ä¸Šéƒ¨é¢æ¿æ˜¾ç¤ºLog" class="headerlink" title="åœ¨ä¸Šéƒ¨é¢æ¿æ˜¾ç¤ºLog"></a>åœ¨ä¸Šéƒ¨é¢æ¿æ˜¾ç¤ºLog</h1><p>åƒåŸæœ¬Unity Consoleä¸€æ ·ï¼Œæ¯ä¸€æ¡Logä»¥ä¸€ä¸ªæ–¹æ¡itemçš„å½¢å¼æ˜¾ç¤ºåœ¨ä¸ŠåŠéƒ¨åˆ†é¢æ¿ã€‚<br>æˆ‘ä»¬å…ˆæŠŠè¿™ä¸ªitemç”»å‡ºæ¥ã€‚<br>m_selectedLogItem æ˜¯æˆ‘ä»¬é€‰ä¸­çš„ LogItemã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">bool</span> <span class="title">DrawLogBox</span>(<span class="params"><span class="keyword">in</span> <span class="keyword">string</span> content, LogType logType, <span class="keyword">bool</span> isOdd, <span class="keyword">bool</span> isSelected</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isSelected)</span><br><span class="line">    &#123;</span><br><span class="line">        m_boxItemStyle.normal.background = m_boxBgSelected;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOdd)</span><br><span class="line">        &#123;</span><br><span class="line">            m_boxItemStyle.normal.background = m_boxBgOdd;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            m_boxItemStyle.normal.background = m_boxBgEven;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (logType)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> LogType.Error:</span><br><span class="line">            m_boxIcon = m_errorIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LogType.Assert:</span><br><span class="line">            m_boxIcon = m_errorIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LogType.Warning:</span><br><span class="line">            m_boxIcon = m_warningIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LogType.Log:</span><br><span class="line">            m_boxIcon = m_infoIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LogType.Exception:</span><br><span class="line">            m_boxIcon = m_errorIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿™ä¸ªæŒ‰é’®æ˜¯å› ä¸ºè¿™æ¡box itemæ˜¯å¯ä»¥è¢«ç‚¹å‡»é€‰æ‹©çš„ï¼ï¼ï¼</span></span><br><span class="line">    <span class="keyword">return</span> GUILayout.Button(<span class="keyword">new</span> GUIContent(content, m_boxIcon), m_boxItemStyle, GUILayout.ExpandWidth(<span class="literal">true</span>), GUILayout.Height(<span class="number">30.0f</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawUpperPanel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_upperPanel = <span class="keyword">new</span> Rect(<span class="number">0</span>, MENU_BAR_HEIGHT, <span class="keyword">this</span>.position.width, (<span class="keyword">this</span>.position.height - MENU_BAR_HEIGHT) * m_upperSizeRatio);</span><br><span class="line">    GUILayout.BeginArea(m_upperPanel, m_panelStyle);</span><br><span class="line">    GUILayout.Label(<span class="string">"Log"</span>, m_panelLabelStyle);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨scrollviewé‡Œå¡«å……logï¼Œunity</span></span><br><span class="line">    m_upperPanelScroll = GUILayout.BeginScrollView(m_upperPanelScroll);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_logItems.Count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (m_logTypeForUnshow.Contains(m_logItems[i].GetLogType))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”»çš„æ—¶å€™ï¼Œé¡ºä¾¿æ¥å—itemçš„ç‚¹å‡»çš„ç»“æœ</span></span><br><span class="line">        <span class="keyword">if</span> (DrawLogBox(m_logItems[i].LogInfo, m_logItems[i].GetLogType, i % <span class="number">2</span> == <span class="number">0</span>, m_logItems[i].IsSelected))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != m_selectedLogItem)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (m_logItems[i] == m_selectedLogItem)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// click a some one, open code</span></span><br><span class="line">                    <span class="comment">// JumpToCurrentLogPos(); // è·³è½¬åˆ°ä½ ç‚¹å‡»çš„Logçš„é¡¶éƒ¨çš„ä»£ç æ–‡ä»¶ï¼ˆå¦‚æœå¯ä»¥</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    m_selectedLogItem.IsSelected = <span class="literal">false</span>;</span><br><span class="line">                    m_selectedLogItem = m_logItems[i];</span><br><span class="line">                    m_selectedLogItem.IsSelected = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                m_selectedLogItem = m_logItems[i];</span><br><span class="line">                m_selectedLogItem.IsSelected = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å‡†å¤‡åˆ·æ–°</span></span><br><span class="line">            GUI.changed = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    GUILayout.EndScrollView();</span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">    <span class="keyword">if</span> (GUI.changed)</span><br><span class="line">    &#123;</span><br><span class="line">        Repaint();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ˜¾ç¤ºLogè¯¦æƒ…ä»¥åŠè°ƒç”¨æ ˆ"><a href="#æ˜¾ç¤ºLogè¯¦æƒ…ä»¥åŠè°ƒç”¨æ ˆ" class="headerlink" title="æ˜¾ç¤ºLogè¯¦æƒ…ä»¥åŠè°ƒç”¨æ ˆ"></a>æ˜¾ç¤ºLogè¯¦æƒ…ä»¥åŠè°ƒç”¨æ ˆ</h1><p>ç”±äºæˆ‘è„‘å­ä¸å¥½ä½¿ï¼Œæˆ‘ä¸çŸ¥é“å¦‚ä½•å®Œç¾å¤åˆ»Unity Consoleçš„è¯¦æƒ…ï¼ŒUnityè‡ªå¸¦Consoleä¸­æ˜¾ç¤ºçš„ä»£ç é“¾æ¥æ—¢å¯ä»¥å¤åˆ¶ä¹Ÿå¯ä»¥ç‚¹å‡»è·³è½¬ï¼Œæˆ‘åªåšäº†ç®€å•çš„è·³è½¬ã€‚å¦‚æœæœ‰æ¯”è¾ƒç†Ÿæ‚‰ç¼–è¾‘å™¨å¼€å‘çš„æœ‹å‹ï¼Œå¯ä»¥æä¾›ä¿®æ”¹çš„æ–¹æ³•ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawLowerPanel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> yPos = PanelGroupHeight * m_upperSizeRatio + MENU_BAR_HEIGHT + RESIZER_HEIGHT;</span><br><span class="line">    m_lowerPanel = <span class="keyword">new</span> Rect(<span class="number">0</span>, yPos, <span class="keyword">this</span>.position.width, PanelGroupHeight * (<span class="number">1.0f</span> - m_upperSizeRatio));</span><br><span class="line">    GUILayout.BeginArea(m_lowerPanel, m_panelStyle);</span><br><span class="line">    GUILayout.Label(<span class="string">"Log Detail"</span>, m_panelLabelStyle);</span><br><span class="line"></span><br><span class="line">    m_lowerPanelScroll = GUILayout.BeginScrollView(m_lowerPanelScroll);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">string</span> logDetail = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">string</span>[] logDetailMutiLine = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO : code clean here</span></span><br><span class="line">    <span class="keyword">string</span> pathline = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">string</span> tempCase = <span class="string">".cs:"</span>;</span><br><span class="line">    <span class="keyword">string</span> path = <span class="keyword">string</span>.Empty;</span><br><span class="line">    <span class="keyword">int</span> line = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> splitwa = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> != m_selectedLogItem)</span><br><span class="line">    &#123;</span><br><span class="line">        logDetail = m_selectedLogItem.LogMessage;</span><br><span class="line">        GUILayout.TextArea(<span class="keyword">string</span>.Format(<span class="string">"&#123;0&#125;\n"</span>, m_selectedLogItem.LogInfo), m_textAreaStyle);</span><br><span class="line"></span><br><span class="line">        logDetailMutiLine = logDetail.Split(<span class="string">'\n'</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; logDetailMutiLine.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// Regex match 'at xxx'</span></span><br><span class="line">            Match matches = Regex.Match(logDetailMutiLine[i], <span class="string">@"\(at (.+)\)"</span>, RegexOptions.Multiline);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (matches.Success)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span> (matches.Success)</span><br><span class="line">                &#123;</span><br><span class="line">                    pathline = matches.Groups[<span class="number">1</span>].Value;</span><br><span class="line">                    <span class="keyword">if</span> (pathline.Contains(tempCase))</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">int</span> splitIndex = pathline.LastIndexOf(<span class="string">":"</span>);</span><br><span class="line">                        path = pathline.Substring(<span class="number">0</span>, splitIndex);</span><br><span class="line">                        line = Convert.ToInt32(pathline.Substring(splitIndex + <span class="number">1</span>));</span><br><span class="line">                        <span class="keyword">string</span> fullpath = Application.dataPath.Substring(<span class="number">0</span>, Application.dataPath.LastIndexOf(<span class="string">"Assets"</span>));</span><br><span class="line">                        fullpath = fullpath + path;</span><br><span class="line">                        splitwa = logDetailMutiLine[i].LastIndexOf(<span class="string">"("</span>);</span><br><span class="line">                        logDetailMutiLine[i] = logDetailMutiLine[i].Substring(<span class="number">0</span>, splitwa);</span><br><span class="line"></span><br><span class="line">                        GUILayout.BeginHorizontal();</span><br><span class="line">                        GUILayout.TextArea(<span class="keyword">string</span>.Format(<span class="string">" (at : &#123;0&#125;)\n"</span>, logDetailMutiLine[i]), m_textAreaStyle);</span><br><span class="line">                        <span class="keyword">if</span> (GUILayout.Button(<span class="keyword">string</span>.Format(<span class="string">" ( &#123;0&#125; )\n"</span>, pathline), m_labelButtonStyle))</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="comment">// æ‰“å¼€æ–‡ä»¶çš„é­”æ³•</span></span><br><span class="line">                            UnityEditorInternal.InternalEditorUtility.OpenFileAtLineExternal(fullpath.Replace(<span class="string">'/'</span>, <span class="string">'\\'</span>), line);</span><br><span class="line">                        &#125;</span><br><span class="line">                        GUILayout.FlexibleSpace();</span><br><span class="line">                        GUILayout.EndHorizontal();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                GUILayout.TextArea(logDetailMutiLine[i], m_textAreaStyle);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    GUILayout.EndScrollView();</span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™è¾¹ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…å»å¯»æ‰¾ä»£ç æ–‡ä»¶ï¼Œæ˜¯ä»ç½‘ä¸ŠæŸ¥åˆ°çš„ï¼Œæˆ‘ç”¨ç€è¿˜ä¸å¤ªç†Ÿç»ƒã€‚æ‰€ä»¥å†™å¾—å¾ˆä¹±ï¼Œåç»­ä¼šåœ¨å·¥ç¨‹ä¸­æ›´æ–°å¹²å‡€äº›çš„ç‰ˆæœ¬ã€‚</p>
<h1 id="å®Œå–„èœå•æ åŠŸèƒ½"><a href="#å®Œå–„èœå•æ åŠŸèƒ½" class="headerlink" title="å®Œå–„èœå•æ åŠŸèƒ½"></a>å®Œå–„èœå•æ åŠŸèƒ½</h1><p>æ—¢ç„¶æˆ‘ä»¬èƒ½æ˜¾ç¤ºLogäº†ï¼Œé‚£å°±åˆ«å¿˜äº†è¡¥ä¸Šæ¸…é™¤Logçš„åŠŸèƒ½ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ClearLogs</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> != m_selectedLogItem)</span><br><span class="line">    &#123;</span><br><span class="line">        m_selectedLogItem.IsSelected = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    m_selectedLogItem = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    m_normalLogCount = <span class="number">0</span>;</span><br><span class="line">    m_warningLogCount = <span class="number">0</span>;</span><br><span class="line">    m_errorLogCount = <span class="number">0</span>;</span><br><span class="line">    m_logItems.Clear();</span><br><span class="line">    GUI.changed = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawMenuUpperBar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">    <span class="keyword">if</span> (GUILayout.Button(<span class="keyword">new</span> GUIContent(<span class="string">"Clear"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">40.0f</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨äºæ¸…ç©ºæ‰€æœ‰çš„ log</span></span><br><span class="line">        ClearLogs();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™ä¸€æœŸå°±åˆ°è¿™é‡Œã€‚æ„Ÿè§‰å·¥å…·å¼€å‘ä¹Ÿæœ‰ç‚¹æ¬ç –ï¼Œä½†æ˜¯ä¼šç”¨åˆ°å„ç§å„æ ·çš„æ¬ç –å·¥å…·å»æ¬è¿å¥‘åˆä¸åŒçš„ç –ï¼Œèƒ½æ¥è§¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œè¿˜è›®æœ‰è¶£çš„ã€‚<br>ä¸‹ä¸€æœŸæˆ‘ä¼šå°è¯•æŠŠå½“å‰è¿™ä¸ªä¹ä¸Log Consoleçš„åŠŸèƒ½éƒ½è¡¥é½ã€‚<br>ä»£ç æœ‰ç¼ºæ¼å¯ä»¥å…ˆå‚è€ƒå·¥ç¨‹ã€‚</p>
<hr>
<p>å®Œæ•´å·¥ç¨‹é“¾æ¥</p>
<p><a href="https://github.com/2C2C2C/TempUnityLogConsoleClone" target="_blank" rel="noopener">https://github.com/2C2C2C/TempUnityLogConsoleClone</a></p>
]]></content>
      <categories>
        <category>UnityEditor</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>UnityEditor</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®€æ˜“æ£€æµ‹ï¼Œç›®æ ‡æ˜¯å¦åœ¨æ‰‡å½¢åŒºåŸŸ(2D)</title>
    <url>/2020/06/14/20200614-check-target-fan-shape/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨é¡¹ç›®ç»„é‡Œåšä¸€äº›å°æ¸¸æˆåŸå‹ï¼Œæ·±æ„Ÿè‡ªå·±èœå¾—å¦‚è™«è±¸ã€‚ä¸ºäº†æ…¢æ…¢æå‡è¿˜æ˜¯å†³å®šåšä¸€äº›è®°å½•ï¼Œè™½ç„¶åªæ˜¯å¾ˆåƒåœ¾çš„åŠŸèƒ½ã€‚<br>å› ä¸ºåšçš„æ˜¯æ‰‹æ¸¸ï¼Œæ‰€ä»¥å¯¹æ€§èƒ½è›®çœ‹é‡çš„ï¼Œè¯´æ˜¯åŸå‹ï¼Œä¸ºäº†å¿«ä¹Ÿåªæ˜¯é¡¹ç›®é‡Œå¼€äº†ä¸ªå•ç‹¬çš„æ–°åœºæ™¯åšçš„ï¼Œ3Céƒ½æœ‰ï¼Œåšå¥½äº†å¯ä»¥ç›´æ¥æ‰“åŒ…APKè¯•ç©ã€‚<br>åºŸè¯ä¸å¤šè¯´ï¼Œè¿™æ¬¡åšçš„äº‹å¾ˆç®€å•ï¼Œåœ¨æ‰‡å½¢åŒºåŸŸå†…æ£€æµ‹ä¸€äº›ç›®æ ‡ã€‚å› ä¸ºå¬è¯´Vector3. Angle()é‡Œä¼šè·‘å¼€æ–¹çš„è®¡ç®—ï¼Œæ•…å°è¯•é¿å…ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<img src="/2020/06/14/20200614-check-target-fan-shape/20200614-pic001.png" class="" title="split">
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>éœ€è¦è§£å†³çš„éœ€æ±‚æ˜¯åœ¨æ£€æµ‹è€… å‰æ–¹ çš„ä¸€ä¸ªæ‰‡å½¢å†…æ£€æµ‹ç›®æ ‡ç‰©ä½“ï¼Œå…¶å®å¯ä»¥åŒ–ç®€ä¸º2Då¹³é¢çš„æ£€æµ‹ã€‚<br>æˆ‘å†³å®šå¤šæ¬¡ä½¿ç”¨ç‚¹ä¹˜å’Œå‰ä¹˜æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å·²çŸ¥æ•°æ®ï¼š<br>æ£€æµ‹è€…çš„ä½ç½®ï¼Œæœå‘ï¼Œæ£€æµ‹è§’åº¦å¤§å°ï¼ŒåŠå¾„å¤§å°<br>æ£€æµ‹ç›®æ ‡çš„ä½ç½®</p>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li>ç”¨æ£€æµ‹è€…çš„å‰æ–¹å‘é‡å’Œæ£€æµ‹è€…åˆ°ç›®æ ‡çš„æ–¹å‘å‘é‡ç‚¹ä¹˜æ¥åˆ¤æ–­ç›®æ ‡ç‰©ä½“æ˜¯å¦åœ¨æ£€æµ‹è€…å‰æ–¹ã€‚</li>
<li>ç”¨æ£€æµ‹è€…å‰æ–¹æ–¹å‘å‘é‡å’Œæ£€æµ‹åŒºåŸŸçš„ä¸¤ä¸ªè¾¹ç•Œæ–¹å‘åˆ†åˆ«å‰ä¹˜å¾—åˆ°ä¸¤ä¸ªæ³•å‘å‘é‡A,Bã€‚</li>
<li>ç”¨æ£€æµ‹è€…åˆ°ç›®æ ‡çš„æ–¹å‘å‘é‡å’Œæ£€æµ‹åŒºåŸŸçš„ä¸¤ä¸ªè¾¹ç•Œæ–¹å‘åˆ†åˆ«å‰ä¹˜å¾—åˆ°ä¸¤ä¸ªæ³•å‘å‘é‡C,Dã€‚</li>
<li>ç”¨ç‚¹ä¹˜æ£€æµ‹C,Dæ˜¯å¦åŒå‘ï¼Œæ˜¯ï¼Œåˆ™åœ¨æ£€æµ‹åŒºå¤–</li>
<li>æ˜¯å¦åŒæ—¶æ»¡è¶³å‘é‡A,CåŒå‘ï¼Œå‘é‡B,DåŒå‘ï¼Œæ˜¯ï¼Œåˆ™åœ¨æ£€æµ‹åŒºå†…</li>
</ol>
<p>å…¶å®æˆ‘è‡ªå·±éƒ½æ„Ÿè§‰è¿™ä¸­æ–‡ï¼Œå†™å¾—å¾ˆä¹±ï¼Œè¿˜ä¸å¦‚ç›´æ¥çœ‹ä»£ç 23333<br>å…¨éƒ¨ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TargetCheckTester</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Transform m_transform = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> m_checkAngle = <span class="number">60.0f</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> m_checkRadius = <span class="number">6.0f</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    <span class="keyword">private</span> Transform m_targetTransform = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CheckTarget1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == m_targetTransform)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        Vector3 myPos = m_transform.position;</span><br><span class="line">        Vector3 myForward = m_transform.forward;</span><br><span class="line">        <span class="keyword">float</span> halfAngle = m_checkAngle * <span class="number">0.5f</span>;</span><br><span class="line">        Vector3 dirUp = Quaternion.Euler(<span class="number">0.0f</span>, -halfAngle, <span class="number">0.0f</span>) * myForward;</span><br><span class="line">        Vector3 dirDown = Quaternion.Euler(<span class="number">0.0f</span>, halfAngle, <span class="number">0.0f</span>) * myForward;</span><br><span class="line"></span><br><span class="line">        Vector3 upCheck = Vector3.Cross(myForward, dirUp);</span><br><span class="line">        Vector3 downCheck = Vector3.Cross(myForward, dirDown);</span><br><span class="line"></span><br><span class="line">        Vector3 targetPos = m_targetTransform.position;</span><br><span class="line">        <span class="comment">// hack, to make them on a 2d plane :)</span></span><br><span class="line">        targetPos.y = myPos.y;</span><br><span class="line">        Vector3 toTargetDir = targetPos - myPos;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// draw line</span></span><br><span class="line">        Vector3 point1 = myPos + dirUp * m_checkRadius;</span><br><span class="line">        Vector3 point2 = myPos + dirDown * m_checkRadius;</span><br><span class="line">        Vector3 point0 = myPos + myForward * m_checkRadius;</span><br><span class="line"></span><br><span class="line">        Debug.DrawLine(myPos, point1, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(myPos, point2, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(myPos, point0, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(point1, point0, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(point2, point0, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(myPos, targetPos, Color.red, Time.deltaTime);</span><br><span class="line">        <span class="comment">// draw line</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Vector3.Dot(toTargetDir, myForward) &lt; <span class="number">0.0f</span> || toTargetDir.sqrMagnitude &gt; m_checkRadius * m_checkRadius)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        Vector3 targetUpCheck = Vector3.Cross(toTargetDir, dirUp);</span><br><span class="line">        Vector3 targetDownCheck = Vector3.Cross(toTargetDir, dirDown);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">float</span> selfCheck = Vector3.Dot(targetUpCheck, targetDownCheck);</span><br><span class="line">        <span class="keyword">float</span> dotCheckUp = Vector3.Dot(upCheck, targetUpCheck);</span><br><span class="line">        <span class="keyword">float</span> dotCheckDown = Vector3.Dot(targetDownCheck, downCheck);</span><br><span class="line">        <span class="keyword">if</span> (selfCheck &lt;= <span class="number">0.0f</span> &amp;&amp; dotCheckUp * dotCheckDown &gt;= <span class="number">0.0f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">"target in sight"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">region</span> mono method</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_transform = <span class="keyword">this</span>.transform;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        CheckTarget1();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/06/14/20200614-check-target-fan-shape/20200614-pic002.png" class="" title="split">]]></content>
      <categories>
        <category>Unity</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>Gameplay</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/05/03/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>UnityObject ç©ºå¼•ç”¨æ£€æŸ¥å°æµ‹è¯•</title>
    <url>/2020/06/20/20200620-unity-obj-null-check/</url>
    <content><![CDATA[<blockquote>
<p>Classes deriving from Unity. Object inherit equality operators that change the behaviour of the == and != operators.<br>While these operators will perform standard . NET reference equality, if comparing one side to null, these operators will call native code to check if the underlying native engine object is still alive. </p>
</blockquote>
<p>è¿™æ®µè§£é‡Šæ¥è‡ªRiderçš„æç¤ºï¼š<br><a href="https://github.com/JetBrains/resharper-unity/wiki/Avoid-null-comparisons-against-UnityEngine.Object-subclasses" target="_blank" rel="noopener">https://github.com/JetBrains/resharper-unity/wiki/Avoid-null-comparisons-against-UnityEngine.Object-subclasses</a></p>
<p>UnityEngine åº•å±‚æ˜¯C++å†™çš„ï¼Œæ‰€ä»¥è¯´ï¼Œå…¶å®æˆ‘ä»¬å¯¹UnityObjectçš„ç©ºå¼•ç”¨æ£€æŸ¥éƒ½ä¼šå†æ·±å…¥åˆ°é‡Œé¢C++é‚£ä¸€å±‚å»å†æ£€æŸ¥ï¼Œè¿™ä¸ªæ£€æŸ¥æ˜¯æ¯”è¾ƒæ¶ˆè€—çš„ã€‚<br>ä¹‹å‰æ›¾ç»é‡åˆ°å› ä¸ºä½¿ç”¨äº† ?. è¯­æ³•ç³–è€Œå¯¼è‡´çš„ this æŒ‡é’ˆä¸ºnullçš„å¥‡å¦™bugï¼Œå¤§æ¦‚ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªåŸå› ã€‚</p>
<p>ç°åœ¨çš„å…¬å¸æ˜¯åšæ‰‹æ¸¸çš„ï¼Œå¤§å®¶å¯¹æ€§èƒ½éƒ½æ¯”è¾ƒçœ‹é‡ï¼Œä¸è¿‡æˆ‘ä¹ŸçœŸçš„å¥½å¥‡è¿™ä¸ªæ£€æŸ¥åˆ°åº•æœ‰å¤šæ¶ˆè€—ï¼Œå†³å®šè·‘ä¸€è·‘è¯•è¯•ã€‚</p>
<h1 id="Test-Case"><a href="#Test-Case" class="headerlink" title="Test Case"></a>Test Case</h1><p>å› ä¸ºæ˜¯åšæ‰‹æ¸¸ï¼Œéšæ„å¹²è„†å°±åœ¨æ‰‹æœºä¸Šæµ‹è¯•å¥½äº†ã€‚<br>å¤§æ¦‚æ˜¯è¿™æ ·çš„ç¯å¢ƒ:<br>Unity 2019.4 LTS</p>
<p>ç§»åŠ¨è®¾å¤‡è¿™è¾¹æ˜¯<br>Google Pixel Verzion(ä¿ºç©·ä¹°ç¾ç‰ˆ)<br>Android 9 (å·²è·å–Rootæƒé™)</p>
<p>TestCase è¿™è¾¹å…¶å®æˆ‘éƒ½æ˜¯çå¼„çš„ã€‚</p>
<p>åˆ†åˆ«è¿›è¡Œä¸‰ç§æµ‹è¯•ï¼š<br>Unity Object çš„ç©ºå¼•ç”¨æ£€æŸ¥ï¼›<br>POCO Object çš„ç©ºå¼•ç”¨æ£€æŸ¥ï¼›<br>bool çš„ç›´æ¥æ£€æŸ¥ï¼›(å› ä¸ºæˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªä»£æ›¿Unity Objectç©ºå¼•ç”¨æ£€æŸ¥çš„ä¸€ä¸ªæ–¹æ³•</p>
<p>æ¯ä¸€ç§æ£€æŸ¥éƒ½æœ‰æ£€æŸ¥åˆ°trueå’Œfalseçš„ä¸¤ç§æƒ…å†µï¼Œå¹¶å¾ªç¯è·‘å¤šæ¬¡ã€‚</p>
<p>ç„¶åï¼Œä¸Šä»£ç ï¼</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">TempCheckTest</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempObjA</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> m_tempNum = <span class="number">56</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">NullCheckTester</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// unity obj null check</span></span><br><span class="line">        <span class="keyword">private</span> Transform m_emptyTransform = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">private</span> Transform m_selfTransform = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// poco obj null check</span></span><br><span class="line">        <span class="keyword">private</span> TempObjA m_emptyObjA = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">private</span> TempObjA m_objA = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// bool check</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">bool</span> m_boolTrue = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">bool</span> m_boolFalse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Header(<span class="meta-string">"test"</span>)</span>]</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> m_checkTimes = <span class="number">100000</span>;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Header(<span class="meta-string">"UI side"</span>)</span>]</span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.Text m_outPutText = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.Button m_doUnityObjTestButton = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.Button m_doPocoObjTestButton = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.Button m_doBoolTestButton = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.InputField m_inputField = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Button(<span class="meta-string">"init awake"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InitTester</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_emptyTransform = <span class="literal">null</span>;</span><br><span class="line">            m_selfTransform = <span class="keyword">this</span>.transform;</span><br><span class="line"></span><br><span class="line">            m_emptyObjA = <span class="literal">null</span>;</span><br><span class="line">            m_objA = <span class="keyword">new</span> TempObjA();</span><br><span class="line"></span><br><span class="line">            m_boolTrue = <span class="literal">true</span>;</span><br><span class="line">            m_boolFalse = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            m_outPutText.text = <span class="keyword">string</span>.Empty;</span><br><span class="line"></span><br><span class="line">            m_doUnityObjTestButton.onClick.RemoveAllListeners();</span><br><span class="line">            m_doPocoObjTestButton.onClick.RemoveAllListeners();</span><br><span class="line">            m_doBoolTestButton.onClick.RemoveAllListeners();</span><br><span class="line"></span><br><span class="line">            m_doUnityObjTestButton.onClick.AddListener(DoUnityObjNullCheckTest);</span><br><span class="line">            m_doPocoObjTestButton.onClick.AddListener(DoPOCOObjNullCheckTest);</span><br><span class="line">            m_doBoolTestButton.onClick.AddListener(DoBoolObjNullCheckTest);</span><br><span class="line"></span><br><span class="line">            m_inputField.onValueChanged.RemoveAllListeners();</span><br><span class="line">            m_inputField.onValueChanged.AddListener(OnInputNumberChanged);</span><br><span class="line">            m_checkTimes = <span class="number">100000</span>;</span><br><span class="line">            m_inputField.text = m_checkTimes.ToString();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Button(<span class="meta-string">"do unity.object null check test"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoUnityObjNullCheckTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            System.Diagnostics.Stopwatch watcher = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</span><br><span class="line">            watcher.Start();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_checkTimes; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == m_emptyTransform) &#123;&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == m_selfTransform) &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            watcher.Stop();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">string</span> outPut = <span class="string">$"do unity.object null check test 2*<span class="subst">&#123;m_checkTimes&#125;</span> cost <span class="subst">&#123;watcher.ElapsedMilliseconds&#125;</span>ms"</span>;</span><br><span class="line">            m_outPutText.text = outPut;</span><br><span class="line">            Debug.Log(outPut);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Button(<span class="meta-string">"do poco object null check test"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoPOCOObjNullCheckTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            System.Diagnostics.Stopwatch watcher = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</span><br><span class="line">            watcher.Start();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_checkTimes; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == m_emptyObjA) &#123;&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == m_objA) &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            watcher.Stop();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">string</span> outPut = <span class="string">$"do poco object null check test 2*<span class="subst">&#123;m_checkTimes&#125;</span> cost <span class="subst">&#123;watcher.ElapsedMilliseconds&#125;</span>ms"</span>;</span><br><span class="line">            m_outPutText.text = outPut;</span><br><span class="line">            Debug.Log(outPut);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Button(<span class="meta-string">"do bool check test"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoBoolObjNullCheckTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            System.Diagnostics.Stopwatch watcher = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</span><br><span class="line">            watcher.Start();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_checkTimes; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (m_boolFalse) &#123;&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (m_boolTrue) &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            watcher.Stop();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">string</span> outPut = <span class="string">$"do bool check test 2*<span class="subst">&#123;m_checkTimes&#125;</span> cost <span class="subst">&#123;watcher.ElapsedMilliseconds&#125;</span>ms"</span>;</span><br><span class="line">            m_outPutText.text = outPut;</span><br><span class="line">            Debug.Log(outPut);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnInputNumberChanged</span>(<span class="params"><span class="keyword">string</span> arg0</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (!Int32.TryParse(arg0, <span class="keyword">out</span> result))</span><br><span class="line">                result = Int32.MaxValue;</span><br><span class="line"></span><br><span class="line">            m_checkTimes = result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">region</span> mono method</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Reset</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            InitTester();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            InitTester();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.enabled = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Test-Result"><a href="#Test-Result" class="headerlink" title="Test Result"></a>Test Result</h1><img src="/2020/06/20/20200620-unity-obj-null-check/20200620-pic001.png" class="" title="split">
<p>åˆ†åˆ«è¿›è¡Œ10wæ¬¡å’Œ100wæ¬¡æµ‹è¯•çœ‹çœ‹ç»“æœã€‚</p>
<p>10wæ¬¡:<br>Unity Object null check 4~7ms<br>POCO Object null check 0ms<br>bool check 0ms</p>
<p>100wæ¬¡:<br>Unity Object null check 45~60ms<br>POCO Object null check 3~4ms<br>bool check 2ms</p>
<p>å½“æ£€æµ‹æ•°é‡éå¸¸å¤šçš„æ—¶å€™ï¼ŒUnity Object ç©ºå¼•ç”¨æ£€æŸ¥çš„æ€§èƒ½æ¶ˆè€—æ¯”å…¶ä»–ä¸¤ä¸ªå¤§äº†å¾ˆå¤šå¾ˆå¤šã€‚ç°åœ¨çš„é¡¹ç›®é‡Œå¤§éƒ¨åˆ†ä¸œè¥¿å…¶å®éƒ½æ˜¯POCOçš„ã€‚<br>ä¼¼ä¹æŠŠUnityObject Destroyä¹‹åå†æ‰‹åŠ¨æŠŠå˜é‡ç½®ç©ºæ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼ˆ</p>
]]></content>
      <categories>
        <category>Unity</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>UnityOptimization</tag>
      </tags>
  </entry>
</search>
