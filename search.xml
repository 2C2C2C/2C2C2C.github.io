<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ç»™Gitä¸Šä¸ªä»£ç†è¯•è¯•æé€Ÿ</title>
    <url>/2020/05/03/20200503-git-add-proxy/</url>
    <content><![CDATA[<h1 id="ç»™GITç”¨ä¸Šä»£ç†"><a href="#ç»™GITç”¨ä¸Šä»£ç†" class="headerlink" title="ç»™GITç”¨ä¸Šä»£ç†"></a>ç»™GITç”¨ä¸Šä»£ç†</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨çœ‹ç€æ•™ç¨‹æ­å»ºè¿™ä¸ªåšå®¢çš„æ—¶å€™ï¼Œæˆ‘åœ¨GITä¸Šä¹Ÿæ‹–äº†ä¸å°‘çš„åŒ…ã€‚ç›´è¿æœ‰æ—¶å€™çœŸçš„é€Ÿåº¦æ…¢åˆ°åè¡€ï¼ŒåŸå› å¾ˆå¤æ‚ä¹Ÿè«å¾—åŠæ³•ã€‚<br>ä¸è¿‡è¿˜å¥½ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥ç»™GITä¸Šä¸ªä»£ç†ï¼Œè¿™æ ·èƒ½ç»™é€Ÿåº¦ä¸€äº›æ”¹å–„ã€‚</p>
<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>æˆ‘æ˜¯åœ¨æœ¬æœºå™¨å®‰è£…æœ‰ä»£ç†å®¢æˆ·ç«¯ï¼Œå°ğŸ›©å’ŒV2éƒ½å½³äºã€‚<br>æˆ‘è¿™è¾¹çš„æƒ…å†µæ˜¯è¿™æ ·çš„ï¼Œå°é£æœºèµ°SOCK5ä»£ç†ï¼ŒV2èµ°çš„HTTPä»£ç†ã€‚<br>å› ä¸ºå¹³æ—¶æˆ‘åªå¯èƒ½å¼€ç€ä¸€ä¸ªï¼Œæ‰€ä»¥ç«¯å£éƒ½æ˜¯1080ã€‚</p>
<h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><p>åºŸè¯ä¸å¤šè¯´äº†ï¼Œç›´æ¥ä¸Šå‘½ä»¤ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬çœ‹çœ‹å·²æœ‰çš„è®¾ç½®.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å…¨å±€é…ç½®ä¸­çš„ä»£ç†</span></span><br><span class="line">git config --global --get http.proxy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç”Ÿæ•ˆé…ç½®ä¸­çš„ä»£ç†</span></span><br><span class="line">git config --get http.proxy</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬åŠ ä¸Šè‡ªå·±çš„ä»£ç†ã€‚<br>å½“å‰æˆ‘ä»¬å‡è®¾çš„çŠ¶æ€æ˜¯æœ¬æœºå¼€ç€å°âœˆæˆ–è€…V2ï¼Œä¸”ä»£ç†ç«¯å£ä¸º1080çš„æƒ…å†µã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‹¬å·ä¸­çš„éƒ½æ˜¯å¯é€‰é¡¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è‹¥ç”¨çš„å°é£æœº, --global æ„å‘³ç€åº”ç”¨åˆ°å…¨å±€è®¾ç½®</span></span><br><span class="line">git config (--global) http.proxy sock5://127.0.0.1:1080</span><br><span class="line">git config (--global) https.proxy sock5://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™æ ·åº”ç”¨åï¼Œæ²¡å¼€ä»£ç†GITå°±ä¼šæŠ½é£äº†ï¼Œæ‰€ä»¥å¦‚æœå¹³æ—¶é€Ÿåº¦è¿˜ä¸é”™çš„è¯è®°å¾—ç”¨å®Œå–æ¶ˆä»£ç†</span></span><br><span class="line">git config (--global) --<span class="built_in">unset</span> http.proxy (sock5://127.0.0.1:1080)</span><br><span class="line">git config (--global) --<span class="built_in">unset</span> https.proxy (sock5://127.0.0.1:1080)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‹¥ç”¨çš„V2, --global æ„å‘³ç€åº”ç”¨åˆ°å…¨å±€è®¾ç½®</span></span><br><span class="line">git config (--global) http.proxy  http://127.0.0.1:1080</span><br><span class="line">git config (--global) https.proxy https://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="comment"># å–æ¶ˆ</span></span><br><span class="line">git config (--global) --<span class="built_in">unset</span> http.proxy  ï¼ˆhttp://127.0.0.1:1080ï¼‰</span><br><span class="line">git config (--global) --<span class="built_in">unset</span> https.proxy ï¼ˆhttps://127.0.0.1:1080ï¼‰</span><br></pre></td></tr></table></figure>
<p>æŒ‚äº†ä»£ç†çœŸçš„é£é€Ÿï¼Œçˆ½åˆ°ã€‚</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>å¸¸ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»™Unityä¸Šä»£ç†</title>
    <url>/2020/05/18/20200518-unity-hub-w-proxy/</url>
    <content><![CDATA[<h1 id="ç»™Unityç”¨ä¸Šä»£ç†"><a href="#ç»™Unityç”¨ä¸Šä»£ç†" class="headerlink" title="ç»™Unityç”¨ä¸Šä»£ç†"></a>ç»™Unityç”¨ä¸Šä»£ç†</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¹‹å‰æœ‰æ®µæ—¶é—´å…¬å¸çš„ç½‘ç»œä¸æ˜¯å¾ˆç¨³å®šï¼Œä»UnityHubä¸Šæ‹–ä¸œè¥¿99%å¤±è´¥ã€‚è‡ªå·±åˆå¤ªèœä¸æƒ³å®‰è£…Android Studioæ‰‹åŠ¨è®¾ç½®å®‰å“æ‰“åŒ…çš„ä¸œè¥¿ï¼Œäºæ˜¯ä¹åªèƒ½æƒ³åŠæ³•ç»™ä¸‹è½½åŠ é€Ÿã€‚</p>
<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>é¦–å…ˆä½ è¦æœ‰é‚£ä¸ªï¼Œå°±æ˜¯é‚£ä¸ªä½ ä¸ºäº†çœ‹PHæ‰å¼„çš„å°å·¥å…·ï¼šï¼‰</p>
<h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><p>é¦–å…ˆé»˜è®¤æˆ‘ä»¬çš„å°âœˆä»£ç†ç«¯å£æ˜¯1080ã€‚<br>ä¼¼ä¹V2å¯ä»¥åŒæ—¶æœ‰SOCK5å’ŒHTTPä»£ç†çš„æ ·å­ï¼Œé‚£ä¹ŸæŠŠHTTPä»£ç†çš„ç«¯å£è®¾ç½®æˆ1080.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ä»£ç†</span></span><br><span class="line"><span class="built_in">set</span> HTTP_PROXY=http://127.0.0.1:1080</span><br><span class="line"><span class="built_in">set</span> HTTPS_PROXY=http://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line">start <span class="string">""</span> <span class="string">"your unity hub path"</span></span><br><span class="line"><span class="comment"># like path is like -&gt; D:\Unity\Unity Hub\Unity Hub.exe</span></span><br></pre></td></tr></table></figure>
<h2 id="çˆ†ç‚¸"><a href="#çˆ†ç‚¸" class="headerlink" title="çˆ†ç‚¸"></a>çˆ†ç‚¸</h2><p>éå¸¸ç®€å•å°±æ˜¯è¿™æ ·ã€‚</p>
<p>å…¶å®ä¸œè¥¿éƒ½æ˜¯ä»æœ‰æœ¨æ¡‘åšå®¢çœ‹æ¥çš„<br><a href="https://www.yomunchan.moe/archives/320" target="_blank" rel="noopener">https://www.yomunchan.moe/archives/320</a></p>
<p>è¿™è¾¹æœ‰è›®å¤šæ¸¸æˆå¼€å‘ç›¸å…³çš„æ–‡ç« ï¼Œå¸®äº†æˆ‘ä¸å°‘ï¼Œååˆ†æ„Ÿè°¢äº†ã€‚</p>
]]></content>
      <tags>
        <tag>å¸¸ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‘¸ä¸€ä¸ªç®€å•çš„ Unity Log Console (1)</title>
    <url>/2020/05/31/20200531-CloneUnityConsole1/</url>
    <content><![CDATA[<p>æœ¬èœç‹—åœ¨ä¸Šå‘¨é¢†äº†ä¸€ä¸ªåšLogManagerçš„ä»»åŠ¡ã€‚å¾ˆé«˜å…´ä¹Ÿå¾ˆæ…Œï¼Œæ¯•ç«Ÿä»æ¥æ²¡åšè¿‡ç¼–è¾‘å™¨å¼€å‘ï¼Œäºæ˜¯é¢å‘æœç´¢å¼•æ“ç¼–ç¨‹å¼€å§‹è¾£ï¼Œæ‰¾äº†ä¸€äº›æ•™ç¨‹å­¦ç€åšï¼Œé¡ºä¾¿åˆ†äº«ä¸€ä¸‹ã€‚</p>
<h1 id="éœ€æ±‚åˆ†æï¼ˆï¼Ÿ"><a href="#éœ€æ±‚åˆ†æï¼ˆï¼Ÿ" class="headerlink" title="éœ€æ±‚åˆ†æï¼ˆï¼Ÿ"></a>éœ€æ±‚åˆ†æï¼ˆï¼Ÿ</h1><p>ç»„é‡Œå¯¹è¿™ä¸ªLogManagerçš„è¦æ±‚æ˜¯åœ¨UnityåŸæ¥çš„LogåŠŸèƒ½ä¸Šå†åŠ ä¸Šæ ¹æ®æ ‡ç­¾å’Œå±é™©åº¦(?)æ¥ç­›é€‰ã€‚<br>ä»”ç»†æƒ³æƒ³è¿˜æŒºéº»çƒ¦ã€‚éœ€è¦ç­›é€‰çš„è¯ï¼Œé‚£è‡ªç„¶éœ€è¦ä¸€ä¸ªConsoleé¢æ¿ï¼Œä¼¼ä¹UnityåŸæœ¬çš„Consoleä¸æ–¹ä¾¿æ‰©å±•ï¼Œç´¢æ€§è·Ÿç€ç½‘ä¸Šçš„æ•™ç¨‹é‡æ–°åšä¸€ä¸ªã€‚</p>
<h1 id="å¼¹å‡ºçª—å£"><a href="#å¼¹å‡ºçª—å£" class="headerlink" title="å¼¹å‡ºçª—å£"></a>å¼¹å‡ºçª—å£</h1><p>é¦–å…ˆæˆ‘ä»¬å…ˆæŠŠçª—å£å¼¹å‡ºæ¥ã€‚ä»£ç å¾ˆç®€å•ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä»Unityå¤´é¡¶çš„èœå•æ ä¸­çš„Windowä¸­æ‰¾åˆ°è¿™ä¸ªé¢æ¿å¹¶æ‰“å¼€ã€‚æ‰“å¼€äº†æ˜¯ç©ºç™½çš„ï¼Œå½“ç„¶å•¦ï¼Œå› ä¸ºè¿˜ä»€ä¹ˆéƒ½æ²¡ç”»ä¸Šå»ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempConsoleWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">	[<span class="meta">MenuItem(<span class="meta-string">"Window/Temp Console"</span>)</span>]</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenWindow</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		TempConsoleWindow window = GetWindow&lt;TempConsoleWindow&gt;();</span><br><span class="line">		GUIContent titleContent = <span class="keyword">new</span> GUIContent(<span class="string">"TempConsole"</span>, EditorGUIUtility.Load(<span class="string">"icons/UnityEditor.ConsoleWindow.png"</span>) <span class="keyword">as</span> Texture2D, <span class="string">"a clone sonsole"</span>);</span><br><span class="line">		window.titleContent = titleContent;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ†å‰²åŒºå—"><a href="#åˆ†å‰²åŒºå—" class="headerlink" title="åˆ†å‰²åŒºå—"></a>åˆ†å‰²åŒºå—</h1><img src="/2020/05/31/20200531-CloneUnityConsole1/20200531-Unity01.png" class="" title="split">
<p>æˆ‘ä»¬æŠŠåŸæœ¬çš„é¢æ¿åˆ†æˆ4å—ï¼š1.èœå•æ ï¼›2. LogåŒºï¼›3. è°ƒæ•´æ£’(ä¸Šä¸‹ç§»åŠ¨è°ƒæ•´åŒºåŸŸå¤§å°)ï¼›4. è¯¦æƒ…åŒºã€‚äºæ˜¯ä¹æˆ‘ä»¬ç»™è¿™ä¸ª4ä¸ªåŒºåˆ›å»ºå“åº”çš„å˜é‡ä¸ºäº†æ–¹ä¾¿ç»˜åˆ¶ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Rect m_menuUpperBar = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span> Rect m_upperPanel = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span> Rect m_lowerPanel = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span> Rect m_resizer = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">readonly</span> <span class="keyword">float</span> MENU_BAR_HEIGHT = <span class="number">20.0f</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">float</span> m_upperSizeRatio = <span class="number">0.5f</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">readonly</span> <span class="keyword">float</span> RESIZER_HEIGHT = <span class="number">4.0f</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">float</span> PanelGroupHeight =&gt; position.height - MENU_BAR_HEIGHT;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isResizing = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<h1 id="å·çš®"><a href="#å·çš®" class="headerlink" title="å·çš®"></a>å·çš®</h1><p>Unityçš„ç»˜åˆ¶GUIæ–¹æ³•ä¸­å¯ä»¥å¡«å†™é£æ ¼å‚æ•°ï¼Œæˆ‘ä»¬ç»˜åˆ¶å››ä¸ªåŒºå—çš„æ—¶å€™è‡ªç„¶ä¹Ÿéœ€è¦ä¸ºåŒºå—å‡†å¤‡çš®å’Œæ–‡å­—é¢œè‰²ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// logåŒºé£æ ¼ä»¥åŠlogåŒºçš„æ ‡é¢˜é£æ ¼</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_panelLabelStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">private</span> GUIStyle m_panelStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="comment">// è°ƒæ•´æ£’å„¿çš„é£æ ¼</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_resizerStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="comment">// box item å…¶å®æ˜¯åœ¨logåŒºæ˜¾ç¤ºçš„æ¯ä¸€ä¸ªlog item</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_boxItemStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="comment">// è¿™æ˜¯ logè¯¦æƒ…çš„æ–‡å­—é£æ ¼</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_textAreaStyle = <span class="keyword">default</span>;</span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªæ— è¾¹æ¡†çš„æŒ‰é’®é£æ ¼ï¼Œä¸ºä»£ç è·³è½¬å‡†å¤‡</span></span><br><span class="line"><span class="keyword">private</span> GUIStyle m_labelButtonStyle = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å„ç§å›¾æ ‡</span></span><br><span class="line"><span class="keyword">private</span> Texture2D m_infoIcon = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_infoIconSmall = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_warningIcon = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_warningIconSmall = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_errorIcon = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_errorIconSmall = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Texture2D m_boxBgOdd = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_boxBgEven = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_boxBgSelected = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> Texture2D m_boxIcon = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å„ç§çš®</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">GetAssets</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_panelLabelStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_panelLabelStyle.fixedHeight = <span class="number">30.0f</span>;</span><br><span class="line">    m_panelLabelStyle.richText = <span class="literal">true</span>;</span><br><span class="line">    m_panelLabelStyle.normal.textColor = Color.white;</span><br><span class="line">    m_panelLabelStyle.fontSize = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    m_infoIcon = EditorGUIUtility.Load(<span class="string">"icons/console.infoicon.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_infoIconSmall = EditorGUIUtility.Load(<span class="string">"icons/console.infoicon.sml.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_warningIcon = EditorGUIUtility.Load(<span class="string">"icons/console.warnicon.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_warningIconSmall = EditorGUIUtility.Load(<span class="string">"icons/console.warnicon.sml.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_errorIcon = EditorGUIUtility.Load(<span class="string">"icons/console.erroricon.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_errorIconSmall = EditorGUIUtility.Load(<span class="string">"icons/console.erroricon.sml.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line"></span><br><span class="line">    m_resizerStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line"></span><br><span class="line">    m_panelStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_panelStyle.normal.background = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/projectbrowsericonareabg.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    <span class="comment">// è¿™è¡Œæ˜¯åŒäº‹å‘Šè¯‰æˆ‘çš„ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸ç®¡ç”¨ï¼Œç›´æ¥ç”¨ä¼šæœ‰ç©ºå¼•ç”¨æŠ¥é”™ï¼Œè¦åœ¨GUIé‡Œç”¨</span></span><br><span class="line">    <span class="comment">// m_panelStyle.normal.background = GUI.skin.window.normal.background; </span></span><br><span class="line"></span><br><span class="line">    m_boxItemStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_boxItemStyle.normal.textColor = <span class="keyword">new</span> Color(<span class="number">0.7f</span>, <span class="number">0.7f</span>, <span class="number">0.7f</span>);</span><br><span class="line"></span><br><span class="line">    m_boxBgOdd = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/cn entrybackodd.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_boxBgEven = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/cnentrybackeven.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">    m_boxBgSelected = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/menuitemhover.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line"></span><br><span class="line">    m_textAreaStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_textAreaStyle.normal.textColor = <span class="keyword">new</span> Color(<span class="number">0.9f</span>, <span class="number">0.9f</span>, <span class="number">0.9f</span>);</span><br><span class="line">    m_textAreaStyle.normal.background = EditorGUIUtility.Load(<span class="string">"builtin skins/darkskin/images/projectbrowsericonareabg.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line"></span><br><span class="line">    m_labelButtonStyle = <span class="keyword">new</span> GUIStyle();</span><br><span class="line">    m_labelButtonStyle.normal.textColor = Color.green;</span><br><span class="line">    m_labelButtonStyle.normal.background = m_textAreaStyle.normal.background;</span><br><span class="line">    m_labelButtonStyle.alignment = TextAnchor.MiddleLeft;</span><br><span class="line">    m_labelButtonStyle.stretchWidth = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> b = m_labelButtonStyle.border;</span><br><span class="line">    b.left = <span class="number">0</span>;</span><br><span class="line">    b.right = <span class="number">0</span>;</span><br><span class="line">    b.top = <span class="number">0</span>;</span><br><span class="line">    b.bottom = <span class="number">0</span>;</span><br><span class="line">    m_labelButtonStyle.border = b;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    GetAssets();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è·å–å›¾åƒçš„å‚æ•°éƒ½æ˜¯magic numberï¼Œè¿™é‡Œä¸å¤šæã€‚å›¾æ ‡æµè§ˆå’Œè·å–å‚æ•°å¯ä»¥å‚è€ƒä¸‹é¢ä¸¤ä¸ªé¡µé¢ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å‡†å¤‡è‡ªå·±çš„ç´ æã€‚</p>
<p><a href="https://unitylist.com/p/5c3/Unity-editor-icons" target="_blank" rel="noopener">https://unitylist.com/p/5c3/Unity-editor-icons</a><br><a href="https://gist.github.com/rus89/375e107ed8c6db79d0c41b8612e5dbf3" target="_blank" rel="noopener">https://gist.github.com/rus89/375e107ed8c6db79d0c41b8612e5dbf3</a></p>
<h1 id="ç»˜åˆ¶èœå•æ "><a href="#ç»˜åˆ¶èœå•æ " class="headerlink" title="ç»˜åˆ¶èœå•æ "></a>ç»˜åˆ¶èœå•æ </h1><p>èœå•æ ä¸Šæœ‰å‡ ä¸ªæŒ‰é’®ï¼Œæˆ‘ä»¬æŠŠæœ€å¸¸ç”¨çš„å¦‚æ¸…ç†ï¼ŒPlayå¼€å§‹æ¸…é™¤ä»¥åŠå³è¾¹ä¸‰ä¸ªFilteré€‰é¡¹ã€‚é™¤äº†â€™Clearâ€™æ˜¯Buttonï¼Œå…¶å®ƒçš„éƒ½æ˜¯Toggleã€‚æ‰€ä»¥å¾—å‡†å¤‡ä¸€äº›å¸ƒå°”å˜é‡ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isClearOnPlay = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isClearOnBuild = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">bool</span> IsClearOnBuild =&gt; m_isClearOnBuild;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isErrorPause = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isShowLog = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isShowWarning = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">bool</span> m_isShowError = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> m_normalLogCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> m_warningLogCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> m_errorLogCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> HashSet&lt;LogType&gt; m_logTypeForUnshow = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<p>å‡†å¤‡å¥½äº†ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¼€å§‹ç»˜åˆ¶èœå•æ äº†ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawMenuUpperBar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_menuUpperBar = <span class="keyword">new</span> Rect(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="keyword">this</span>.position.width, MENU_BAR_HEIGHT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€å§‹ç»˜åˆ¶</span></span><br><span class="line">    GUILayout.BeginArea(m_menuUpperBar, EditorStyles.toolbar);</span><br><span class="line">    <span class="comment">// æ¨ªå‘ç»˜åˆ¶ï¼ï¼ï¼</span></span><br><span class="line">    GUILayout.BeginHorizontal();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (GUILayout.Button(<span class="keyword">new</span> GUIContent(<span class="string">"Clear"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">40.0f</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨äºæ¸…ç©ºæ‰€æœ‰çš„ log</span></span><br><span class="line">        ClearLogs();</span><br><span class="line">    &#125;</span><br><span class="line">    GUILayout.Space(<span class="number">5.0f</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// m_isCollapse = GUILayout.Toggle(m_isCollapse, new GUIContent("Collapse"), EditorStyles.toolbarButton, GUILayout.Width(55.0f));</span></span><br><span class="line">    m_isClearOnPlay = GUILayout.Toggle(m_isClearOnPlay, <span class="keyword">new</span> GUIContent(<span class="string">"Clear On Play"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">80.0f</span>));</span><br><span class="line">    m_isClearOnBuild = GUILayout.Toggle(m_isClearOnBuild, <span class="keyword">new</span> GUIContent(<span class="string">"Clear On Build"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">85.0f</span>));</span><br><span class="line">    m_isErrorPause = GUILayout.Toggle(m_isErrorPause, <span class="keyword">new</span> GUIContent(<span class="string">"Error Pause"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">70.0f</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼¹æ€§ç©ºç™½ï¼Œæˆ‘ä¸å¤ªæ¸…æ¥šåº”è¯¥æ€ä¹ˆæè¿°ï¼Œä½†æ˜¯å®ƒå¯ä»¥æŠŠåé¢çš„å‡ ä¸ªToggleéƒ½å°½å¯èƒ½å¾€åé¢æ¨</span></span><br><span class="line">    GUILayout.FlexibleSpace();</span><br><span class="line"></span><br><span class="line">    m_normalLogCount = Mathf.Clamp(m_normalLogCount, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">    m_warningLogCount = Mathf.Clamp(m_warningLogCount, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">    m_errorLogCount = Mathf.Clamp(m_errorLogCount, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">    m_isShowLog = GUILayout.Toggle(m_isShowLog, <span class="keyword">new</span> GUIContent(m_numStrs[m_normalLogCount], m_infoIconSmall), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">30.0f</span>));</span><br><span class="line">    m_isShowWarning = GUILayout.Toggle(m_isShowWarning, <span class="keyword">new</span> GUIContent(m_numStrs[m_warningLogCount], m_warningIconSmall), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">30.0f</span>));</span><br><span class="line">    m_isShowError = GUILayout.Toggle(m_isShowError, <span class="keyword">new</span> GUIContent(m_numStrs[m_errorLogCount], m_errorIconSmall), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">30.0f</span>));</span><br><span class="line"></span><br><span class="line">    m_logTypeForUnshow.Clear();</span><br><span class="line">    <span class="keyword">if</span> (!m_isShowLog)</span><br><span class="line">    &#123;</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Log);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!m_isShowWarning)</span><br><span class="line">    &#123;</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Warning);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!m_isShowError)</span><br><span class="line">    &#123;</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Error);</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Assert);</span><br><span class="line">        m_logTypeForUnshow.Add(LogType.Exception);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨ªå‘ç»˜åˆ¶ç»“æŸ</span></span><br><span class="line">    GUILayout.EndHorizontal();</span><br><span class="line">    <span class="comment">// åŒºåŸŸç»˜åˆ¶ç»“æŸ</span></span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…è°ƒç”¨ç»˜åˆ¶</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DrawMenuUpperBar();</span><br><span class="line">    <span class="comment">//DrawUpperPanel();</span></span><br><span class="line">    <span class="comment">//DrawLowerPanel();</span></span><br><span class="line">    <span class="comment">//DrawResizer();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±æŠŠèœå•æ ç»˜åˆ¶å¥½äº†ã€‚</p>
<h1 id="ç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºæ "><a href="#ç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºæ " class="headerlink" title="ç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºæ "></a>ç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºæ </h1><p>æ¥ä¸‹æ¥å†ç»˜åˆ¶è°ƒæ•´æ£’ä¹‹å‰å…ˆç®€å•ç»˜åˆ¶ä¸Šä¸‹åŒºï¼Œå¾…ä¼šå„¿åšå¥½è°ƒæ•´æ£’ä¹‹åå°±èƒ½ç›´æ¥æµ‹è¯•æ•ˆæœã€‚è¦æ³¨æ„ç»™èœå•æ ä»¥åŠè°ƒæ•´ç‰ˆé¢„ç•™çš„é«˜åº¦ï¼Œä¸ç„¶ä¼šå¾—åˆ°é”™è¯¯çš„åŒºåŸŸå¤§å°ï¼Œæ·»åŠ è°ƒæ•´æ£’åä¼šæ›´ä¼šå‡ºç°å¥‡æ€ªç°è±¡ã€‚<br>ç°åœ¨åªéœ€è¦ç»™ä¸Šä¸‹åŒºç»˜åˆ¶ç©ºç™½å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawUpperPanel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_upperPanel = <span class="keyword">new</span> Rect(<span class="number">0</span>, MENU_BAR_HEIGHT, <span class="keyword">this</span>.position.width, (<span class="keyword">this</span>.position.height - MENU_BAR_HEIGHT) * m_upperSizeRatio);</span><br><span class="line">    GUILayout.BeginArea(m_upperPanel, m_panelStyle);</span><br><span class="line">    GUILayout.Label(<span class="string">"Log"</span>, m_panelLabelStyle);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ºäº†ç”»log itemè€Œå‡†å¤‡çš„ ScrollView</span></span><br><span class="line">    m_upperPanelScroll = GUILayout.BeginScrollView(m_upperPanelScroll);</span><br><span class="line">    GUILayout.EndScrollView();</span><br><span class="line"></span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawLowerPanel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> yPos = PanelGroupHeight * m_upperSizeRatio + MENU_BAR_HEIGHT + RESIZER_HEIGHT;</span><br><span class="line">    m_lowerPanel = <span class="keyword">new</span> Rect(<span class="number">0</span>, yPos, <span class="keyword">this</span>.position.width, PanelGroupHeight * (<span class="number">1.0f</span> - m_upperSizeRatio));</span><br><span class="line">    GUILayout.BeginArea(m_lowerPanel, m_panelStyle);</span><br><span class="line">    GUILayout.Label(<span class="string">"Log Detail"</span>, m_panelLabelStyle);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸º logè¯¦æƒ…å‡†å¤‡çš„ ScrollView</span></span><br><span class="line">    m_lowerPanelScroll = GUILayout.BeginScrollView(m_lowerPanelScroll);</span><br><span class="line">    GUILayout.EndScrollView();</span><br><span class="line"></span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…è°ƒç”¨ç»˜åˆ¶</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DrawMenuUpperBar();</span><br><span class="line">    DrawUpperPanel();</span><br><span class="line">    DrawLowerPanel();</span><br><span class="line">    <span class="comment">//DrawResizer();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç»˜åˆ¶è°ƒæ•´æ£’-æ·»åŠ åŒºåŸŸè°ƒæ•´"><a href="#ç»˜åˆ¶è°ƒæ•´æ£’-æ·»åŠ åŒºåŸŸè°ƒæ•´" class="headerlink" title="ç»˜åˆ¶è°ƒæ•´æ£’ æ·»åŠ åŒºåŸŸè°ƒæ•´"></a>ç»˜åˆ¶è°ƒæ•´æ£’ æ·»åŠ åŒºåŸŸè°ƒæ•´</h1><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawResizer</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> yPos = (<span class="keyword">this</span>.position.height - MENU_BAR_HEIGHT) * m_upperSizeRatio + MENU_BAR_HEIGHT;</span><br><span class="line">    m_resizer = <span class="keyword">new</span> Rect(<span class="number">0</span>, yPos, <span class="keyword">this</span>.position.width, RESIZER_HEIGHT);</span><br><span class="line"></span><br><span class="line">    GUILayout.BeginArea(<span class="keyword">new</span> Rect(m_resizer.position + (Vector2.up * RESIZER_HEIGHT), <span class="keyword">new</span> Vector2(<span class="keyword">this</span>.position.width, <span class="number">2.0f</span>)), m_resizerStyle);</span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠ m_resizer åŒºåŸŸå†…çš„å…‰æ ‡æ¢æˆæ‹‰ä¼¸æŒ‡ç¤ºå…‰æ ‡</span></span><br><span class="line">    EditorGUIUtility.AddCursorRect(m_resizer, MouseCursor.ResizeVertical);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Resize</span>(<span class="params">Event currentEvent</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (m_isResizing)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// é€šè¿‡é¼ æ ‡ä½ç½®æ”¹å˜è°ƒæ•´æ£’ä½ç½®</span></span><br><span class="line">        <span class="keyword">float</span> pos = currentEvent.mousePosition.y - MENU_BAR_HEIGHT;</span><br><span class="line"></span><br><span class="line">        m_upperSizeRatio = pos / PanelGroupHeight;</span><br><span class="line">        m_upperSizeRatio = Mathf.Clamp(m_upperSizeRatio, <span class="number">0.5f</span>, <span class="number">0.8f</span>);</span><br><span class="line">        <span class="comment">//Debug.Log($"next upper ratio &#123;m_upperSizeRatio&#125;");</span></span><br><span class="line">        Repaint();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ProcessEvents</span>(<span class="params">Event currentEvent</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (EventType.MouseDown == currentEvent.type)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// if press mouse left in resizer</span></span><br><span class="line">        m_isResizing = (<span class="number">0</span> == currentEvent.button &amp;&amp; m_resizer.Contains(currentEvent.mousePosition));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (EventType.MouseUp == currentEvent.type)</span><br><span class="line">    &#123;</span><br><span class="line">        m_isResizing = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Resize(currentEvent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å…¶å®æ„Ÿè§‰ç¼–è¾‘å™¨å¼€å‘æŒºéº»çƒ¦çš„ï¼Œé™¤äº†åŒºåŸŸç»˜åˆ¶è¦æ³¨æ„ï¼Œè¿˜æœ‰ä¸€å †APIä¸å¥½æŸ¥ä¸ä¼šç”¨ã€‚ä¸‹ä¸€æœŸå°†ä¼šå°†Logä¿¡æ¯æ•è·å¹¶æ˜¾ç¤ºåœ¨æˆ‘ä»¬è‡ªå·±çš„è¿™ä¸ªConsoleä¸Šã€‚</p>
<hr>
<p>å®Œæ•´å·¥ç¨‹é“¾æ¥(æŒç»­æ›´æ–°ä¸­) :<br><a href="https://github.com/2C2C2C/TempUnityLogConsoleClone" target="_blank" rel="noopener">https://github.com/2C2C2C/TempUnityLogConsoleClone</a></p>
<p>P.S : æˆ‘åœ¨åšçš„æ—¶å€™æ˜¯å‚è€ƒäº†æŸä¸ªæ¸¸æˆå·¥ä½œå®¤å‘å¸ƒçš„æ•™ç¨‹ï¼Œæˆ‘ä¹Ÿé¡ºä¾¿æŠŠè¿™ä¸ªæ•™ç¨‹åˆ†äº«å‡ºæ¥ã€‚<br><a href="https://gram.gs/gramlog/creating-editor-windows-in-unity/" target="_blank" rel="noopener">https://gram.gs/gramlog/creating-editor-windows-in-unity/</a></p>
]]></content>
      <categories>
        <category>UnityEditor</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>UnityEditor</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‘¸ä¸€ä¸ªç®€å•çš„ Unity Log Console (2)</title>
    <url>/2020/05/31/20200531-CloneUnityConsole2/</url>
    <content><![CDATA[<p>ä¸Šä¸€æœŸæˆ‘ä»¬åšå®Œäº†åŸºæœ¬çš„é¢æ¿ç»˜åˆ¶ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å¾€é‡Œé¢æ·»åŠ ç®€å•çš„å†…å®¹äº†ã€‚</p>
<h1 id="å®šä¹‰æ˜¾ç¤ºå•ä½"><a href="#å®šä¹‰æ˜¾ç¤ºå•ä½" class="headerlink" title="å®šä¹‰æ˜¾ç¤ºå•ä½"></a>å®šä¹‰æ˜¾ç¤ºå•ä½</h1><p>æ—¢ç„¶æˆ‘ä»¬è¦æ˜¾ç¤ºLogï¼Œé‚£å°±å®šä¹‰ä¸€äº›æ•°æ®ç»“æ„ç”¨äºå­˜å‚¨è¿™äº›Logã€‚å› ä¸ºè¿™äº›ä¸œè¥¿åœ¨æˆ‘ä»¬çš„consoleä¸­åªéœ€è¦æ˜¾ç¤ºå°±è¡Œäº†ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰åªè¯»çš„æ•°æ®å°±å¯ä»¥ï¼Œæˆ–è®¸è¿˜èƒ½æé«˜æ€§èƒ½ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LogItem</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">bool</span> IsSelected &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">string</span> LogInfo = <span class="keyword">string</span>.Empty; <span class="comment">// Logç®€è¦ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">string</span> LogMessage = <span class="keyword">string</span>.Empty; <span class="comment">// Log è°ƒç”¨æ ˆï¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> LogType GetLogType = LogType.Log;</span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LogItem</span>(<span class="params"><span class="keyword">bool</span> isSelected, <span class="keyword">string</span> info, <span class="keyword">string</span> message, LogType type</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        IsSelected = isSelected;</span><br><span class="line">        <span class="comment">// è®°å¾—åŠ ä¸Šæ—¶é—´ï¼ï¼ï¼</span></span><br><span class="line">        LogInfo = <span class="keyword">string</span>.Format(<span class="string">"[&#123;0&#125;] &#123;1&#125;"</span>, System.DateTime.Now.ToLongTimeString(), info);</span><br><span class="line">        LogMessage = message;</span><br><span class="line">        GetLogType = type;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempConsoleWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LogMessageReceived</span>(<span class="params"><span class="keyword">string</span> condition, <span class="keyword">string</span> stackTrace, LogType type</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">            LogItem log = <span class="keyword">new</span> LogItem(<span class="literal">false</span>, condition, stackTrace, type);</span><br><span class="line">            m_logItems.Add(log);</span><br><span class="line">            <span class="keyword">switch</span> (type)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> LogType.Error:</span><br><span class="line">                    m_errorLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> LogType.Assert:</span><br><span class="line">                    m_errorLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> LogType.Warning:</span><br><span class="line">                    m_warningLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> LogType.Log:</span><br><span class="line">                    m_normalLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> LogType.Exception:</span><br><span class="line">                    m_errorLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    m_errorLogCount++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä¸»åŠ¨åˆ·æ–°ï¼Œå› ä¸ºå½“æ­¤çª—å£æ²¡æœ‰ç„¦ç‚¹æ—¶ä¼¼ä¹æ— æ³•èµ° OnGUI() åˆ·æ–°ã€‚</span></span><br><span class="line">            Repaint();</span><br><span class="line">            <span class="comment">//GUI.changed = true;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="comment">// ....</span></span><br><span class="line">		<span class="comment">// ç›‘å¬æ­¤äº‹ä»¶ï¼Œå½“Debug.Log("")è¢«è°ƒç”¨çš„æ—¶å€™å°±ä¼šå“åº”</span></span><br><span class="line">		Application.logMessageReceived += LogMessageReceived;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDestroy</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="comment">// ....</span></span><br><span class="line">		Application.logMessageReceived -= LogMessageReceived;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åœ¨ä¸Šéƒ¨é¢æ¿æ˜¾ç¤ºLog"><a href="#åœ¨ä¸Šéƒ¨é¢æ¿æ˜¾ç¤ºLog" class="headerlink" title="åœ¨ä¸Šéƒ¨é¢æ¿æ˜¾ç¤ºLog"></a>åœ¨ä¸Šéƒ¨é¢æ¿æ˜¾ç¤ºLog</h1><p>åƒåŸæœ¬Unity Consoleä¸€æ ·ï¼Œæ¯ä¸€æ¡Logä»¥ä¸€ä¸ªæ–¹æ¡itemçš„å½¢å¼æ˜¾ç¤ºåœ¨ä¸ŠåŠéƒ¨åˆ†é¢æ¿ã€‚<br>æˆ‘ä»¬å…ˆæŠŠè¿™ä¸ªitemç”»å‡ºæ¥ã€‚<br>m_selectedLogItem æ˜¯æˆ‘ä»¬é€‰ä¸­çš„ LogItemã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">bool</span> <span class="title">DrawLogBox</span>(<span class="params"><span class="keyword">in</span> <span class="keyword">string</span> content, LogType logType, <span class="keyword">bool</span> isOdd, <span class="keyword">bool</span> isSelected</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isSelected)</span><br><span class="line">    &#123;</span><br><span class="line">        m_boxItemStyle.normal.background = m_boxBgSelected;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOdd)</span><br><span class="line">        &#123;</span><br><span class="line">            m_boxItemStyle.normal.background = m_boxBgOdd;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            m_boxItemStyle.normal.background = m_boxBgEven;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (logType)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> LogType.Error:</span><br><span class="line">            m_boxIcon = m_errorIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LogType.Assert:</span><br><span class="line">            m_boxIcon = m_errorIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LogType.Warning:</span><br><span class="line">            m_boxIcon = m_warningIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LogType.Log:</span><br><span class="line">            m_boxIcon = m_infoIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> LogType.Exception:</span><br><span class="line">            m_boxIcon = m_errorIcon;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿™ä¸ªæŒ‰é’®æ˜¯å› ä¸ºè¿™æ¡box itemæ˜¯å¯ä»¥è¢«ç‚¹å‡»é€‰æ‹©çš„ï¼ï¼ï¼</span></span><br><span class="line">    <span class="keyword">return</span> GUILayout.Button(<span class="keyword">new</span> GUIContent(content, m_boxIcon), m_boxItemStyle, GUILayout.ExpandWidth(<span class="literal">true</span>), GUILayout.Height(<span class="number">30.0f</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawUpperPanel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_upperPanel = <span class="keyword">new</span> Rect(<span class="number">0</span>, MENU_BAR_HEIGHT, <span class="keyword">this</span>.position.width, (<span class="keyword">this</span>.position.height - MENU_BAR_HEIGHT) * m_upperSizeRatio);</span><br><span class="line">    GUILayout.BeginArea(m_upperPanel, m_panelStyle);</span><br><span class="line">    GUILayout.Label(<span class="string">"Log"</span>, m_panelLabelStyle);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨scrollviewé‡Œå¡«å……logï¼Œunity</span></span><br><span class="line">    m_upperPanelScroll = GUILayout.BeginScrollView(m_upperPanelScroll);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_logItems.Count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (m_logTypeForUnshow.Contains(m_logItems[i].GetLogType))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”»çš„æ—¶å€™ï¼Œé¡ºä¾¿æ¥å—itemçš„ç‚¹å‡»çš„ç»“æœ</span></span><br><span class="line">        <span class="keyword">if</span> (DrawLogBox(m_logItems[i].LogInfo, m_logItems[i].GetLogType, i % <span class="number">2</span> == <span class="number">0</span>, m_logItems[i].IsSelected))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != m_selectedLogItem)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (m_logItems[i] == m_selectedLogItem)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// click a some one, open code</span></span><br><span class="line">                    <span class="comment">// JumpToCurrentLogPos(); // è·³è½¬åˆ°ä½ ç‚¹å‡»çš„Logçš„é¡¶éƒ¨çš„ä»£ç æ–‡ä»¶ï¼ˆå¦‚æœå¯ä»¥</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    m_selectedLogItem.IsSelected = <span class="literal">false</span>;</span><br><span class="line">                    m_selectedLogItem = m_logItems[i];</span><br><span class="line">                    m_selectedLogItem.IsSelected = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                m_selectedLogItem = m_logItems[i];</span><br><span class="line">                m_selectedLogItem.IsSelected = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å‡†å¤‡åˆ·æ–°</span></span><br><span class="line">            GUI.changed = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    GUILayout.EndScrollView();</span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">    <span class="keyword">if</span> (GUI.changed)</span><br><span class="line">    &#123;</span><br><span class="line">        Repaint();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ˜¾ç¤ºLogè¯¦æƒ…ä»¥åŠè°ƒç”¨æ ˆ"><a href="#æ˜¾ç¤ºLogè¯¦æƒ…ä»¥åŠè°ƒç”¨æ ˆ" class="headerlink" title="æ˜¾ç¤ºLogè¯¦æƒ…ä»¥åŠè°ƒç”¨æ ˆ"></a>æ˜¾ç¤ºLogè¯¦æƒ…ä»¥åŠè°ƒç”¨æ ˆ</h1><p>ç”±äºæˆ‘è„‘å­ä¸å¥½ä½¿ï¼Œæˆ‘ä¸çŸ¥é“å¦‚ä½•å®Œç¾å¤åˆ»Unity Consoleçš„è¯¦æƒ…ï¼ŒUnityè‡ªå¸¦Consoleä¸­æ˜¾ç¤ºçš„ä»£ç é“¾æ¥æ—¢å¯ä»¥å¤åˆ¶ä¹Ÿå¯ä»¥ç‚¹å‡»è·³è½¬ï¼Œæˆ‘åªåšäº†ç®€å•çš„è·³è½¬ã€‚å¦‚æœæœ‰æ¯”è¾ƒç†Ÿæ‚‰ç¼–è¾‘å™¨å¼€å‘çš„æœ‹å‹ï¼Œå¯ä»¥æä¾›ä¿®æ”¹çš„æ–¹æ³•ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawLowerPanel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> yPos = PanelGroupHeight * m_upperSizeRatio + MENU_BAR_HEIGHT + RESIZER_HEIGHT;</span><br><span class="line">    m_lowerPanel = <span class="keyword">new</span> Rect(<span class="number">0</span>, yPos, <span class="keyword">this</span>.position.width, PanelGroupHeight * (<span class="number">1.0f</span> - m_upperSizeRatio));</span><br><span class="line">    GUILayout.BeginArea(m_lowerPanel, m_panelStyle);</span><br><span class="line">    GUILayout.Label(<span class="string">"Log Detail"</span>, m_panelLabelStyle);</span><br><span class="line"></span><br><span class="line">    m_lowerPanelScroll = GUILayout.BeginScrollView(m_lowerPanelScroll);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">string</span> logDetail = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">string</span>[] logDetailMutiLine = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO : code clean here</span></span><br><span class="line">    <span class="keyword">string</span> pathline = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">string</span> tempCase = <span class="string">".cs:"</span>;</span><br><span class="line">    <span class="keyword">string</span> path = <span class="keyword">string</span>.Empty;</span><br><span class="line">    <span class="keyword">int</span> line = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> splitwa = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> != m_selectedLogItem)</span><br><span class="line">    &#123;</span><br><span class="line">        logDetail = m_selectedLogItem.LogMessage;</span><br><span class="line">        GUILayout.TextArea(<span class="keyword">string</span>.Format(<span class="string">"&#123;0&#125;\n"</span>, m_selectedLogItem.LogInfo), m_textAreaStyle);</span><br><span class="line"></span><br><span class="line">        logDetailMutiLine = logDetail.Split(<span class="string">'\n'</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; logDetailMutiLine.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// Regex match 'at xxx'</span></span><br><span class="line">            Match matches = Regex.Match(logDetailMutiLine[i], <span class="string">@"\(at (.+)\)"</span>, RegexOptions.Multiline);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (matches.Success)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span> (matches.Success)</span><br><span class="line">                &#123;</span><br><span class="line">                    pathline = matches.Groups[<span class="number">1</span>].Value;</span><br><span class="line">                    <span class="keyword">if</span> (pathline.Contains(tempCase))</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">int</span> splitIndex = pathline.LastIndexOf(<span class="string">":"</span>);</span><br><span class="line">                        path = pathline.Substring(<span class="number">0</span>, splitIndex);</span><br><span class="line">                        line = Convert.ToInt32(pathline.Substring(splitIndex + <span class="number">1</span>));</span><br><span class="line">                        <span class="keyword">string</span> fullpath = Application.dataPath.Substring(<span class="number">0</span>, Application.dataPath.LastIndexOf(<span class="string">"Assets"</span>));</span><br><span class="line">                        fullpath = fullpath + path;</span><br><span class="line">                        splitwa = logDetailMutiLine[i].LastIndexOf(<span class="string">"("</span>);</span><br><span class="line">                        logDetailMutiLine[i] = logDetailMutiLine[i].Substring(<span class="number">0</span>, splitwa);</span><br><span class="line"></span><br><span class="line">                        GUILayout.BeginHorizontal();</span><br><span class="line">                        GUILayout.TextArea(<span class="keyword">string</span>.Format(<span class="string">" (at : &#123;0&#125;)\n"</span>, logDetailMutiLine[i]), m_textAreaStyle);</span><br><span class="line">                        <span class="keyword">if</span> (GUILayout.Button(<span class="keyword">string</span>.Format(<span class="string">" ( &#123;0&#125; )\n"</span>, pathline), m_labelButtonStyle))</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="comment">// æ‰“å¼€æ–‡ä»¶çš„é­”æ³•</span></span><br><span class="line">                            UnityEditorInternal.InternalEditorUtility.OpenFileAtLineExternal(fullpath.Replace(<span class="string">'/'</span>, <span class="string">'\\'</span>), line);</span><br><span class="line">                        &#125;</span><br><span class="line">                        GUILayout.FlexibleSpace();</span><br><span class="line">                        GUILayout.EndHorizontal();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                GUILayout.TextArea(logDetailMutiLine[i], m_textAreaStyle);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    GUILayout.EndScrollView();</span><br><span class="line">    GUILayout.EndArea();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™è¾¹ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…å»å¯»æ‰¾ä»£ç æ–‡ä»¶ï¼Œæ˜¯ä»ç½‘ä¸ŠæŸ¥åˆ°çš„ï¼Œæˆ‘ç”¨ç€è¿˜ä¸å¤ªç†Ÿç»ƒã€‚æ‰€ä»¥å†™å¾—å¾ˆä¹±ï¼Œåç»­ä¼šåœ¨å·¥ç¨‹ä¸­æ›´æ–°å¹²å‡€äº›çš„ç‰ˆæœ¬ã€‚</p>
<h1 id="å®Œå–„èœå•æ åŠŸèƒ½"><a href="#å®Œå–„èœå•æ åŠŸèƒ½" class="headerlink" title="å®Œå–„èœå•æ åŠŸèƒ½"></a>å®Œå–„èœå•æ åŠŸèƒ½</h1><p>æ—¢ç„¶æˆ‘ä»¬èƒ½æ˜¾ç¤ºLogäº†ï¼Œé‚£å°±åˆ«å¿˜äº†è¡¥ä¸Šæ¸…é™¤Logçš„åŠŸèƒ½ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ClearLogs</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> != m_selectedLogItem)</span><br><span class="line">    &#123;</span><br><span class="line">        m_selectedLogItem.IsSelected = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    m_selectedLogItem = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    m_normalLogCount = <span class="number">0</span>;</span><br><span class="line">    m_warningLogCount = <span class="number">0</span>;</span><br><span class="line">    m_errorLogCount = <span class="number">0</span>;</span><br><span class="line">    m_logItems.Clear();</span><br><span class="line">    GUI.changed = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawMenuUpperBar</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">    <span class="keyword">if</span> (GUILayout.Button(<span class="keyword">new</span> GUIContent(<span class="string">"Clear"</span>), EditorStyles.toolbarButton, GUILayout.Width(<span class="number">40.0f</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨äºæ¸…ç©ºæ‰€æœ‰çš„ log</span></span><br><span class="line">        ClearLogs();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™ä¸€æœŸå°±åˆ°è¿™é‡Œã€‚æ„Ÿè§‰å·¥å…·å¼€å‘ä¹Ÿæœ‰ç‚¹æ¬ç –ï¼Œä½†æ˜¯ä¼šç”¨åˆ°å„ç§å„æ ·çš„æ¬ç –å·¥å…·å»æ¬è¿å¥‘åˆä¸åŒçš„ç –ï¼Œèƒ½æ¥è§¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œè¿˜è›®æœ‰è¶£çš„ã€‚<br>ä¸‹ä¸€æœŸæˆ‘ä¼šå°è¯•æŠŠå½“å‰è¿™ä¸ªä¹ä¸Log Consoleçš„åŠŸèƒ½éƒ½è¡¥é½ã€‚<br>ä»£ç æœ‰ç¼ºæ¼å¯ä»¥å…ˆå‚è€ƒå·¥ç¨‹ã€‚</p>
<hr>
<p>å®Œæ•´å·¥ç¨‹é“¾æ¥</p>
<p><a href="https://github.com/2C2C2C/TempUnityLogConsoleClone" target="_blank" rel="noopener">https://github.com/2C2C2C/TempUnityLogConsoleClone</a></p>
]]></content>
      <categories>
        <category>UnityEditor</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>UnityEditor</tag>
      </tags>
  </entry>
  <entry>
    <title>UnityEditor EasyButton ç®€æ˜“ç¼–è¾‘å™¨æŒ‰é’®</title>
    <url>/2020/06/05/20200605-Unity-EasyButton/</url>
    <content><![CDATA[<p>ä¸€ä¸ªæ¯”è¾ƒç®€å•ä½†æ˜¯æ–¹ä¾¿çš„ä¸œè¥¿</p>
<h1 id="è¿™æ˜¯å•¥"><a href="#è¿™æ˜¯å•¥" class="headerlink" title="è¿™æ˜¯å•¥"></a>è¿™æ˜¯å•¥</h1><p>æˆ‘ä»¬å¹³æ—¶äº›å†™äº†ä¸€äº›å‡½æ•°åœ¨MonoBehavioré‡Œæƒ³æµ‹è¯•ï¼Œè¿™è¾¹å¯ä»¥æ•´ä¸€ä¸ªç‰¹æ€§æ”¾åœ¨éœ€è¦å¿«é€Ÿè°ƒç”¨çš„æ–¹æ³•ä¸Š(é™äºæ— å‚æ•°çš„å‡½æ•°)ã€‚<br>è¿™è¾¹å¯ä»¥åšä¸€ä¸ªç¼–è¾‘å™¨çš„æŒ‰é’®ï¼Œç›´æ¥æ”¾åœ¨MonoBehaviorçš„ç»„ä»¶é¢æ¿ä¸Šã€‚</p>
<h1 id="ä¸Šä»£ç "><a href="#ä¸Šä»£ç " class="headerlink" title="ä¸Šä»£ç "></a>ä¸Šä»£ç </h1><p>å…ˆå®šä¹‰æˆ‘ä»¬éœ€è¦çš„è¿™ä¸ªç‰¹æ€§ï¼Œæ—¢ç„¶æ˜¯åšä¸ªæŒ‰é’®ï¼Œé‚£å°±å«Buttonå¥½äº†ã€‚é‚£ä¹ˆè¿™ä¸ªç‰¹æ€§å°±åº”è¯¥å«åšButtonAttributeã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">AttributeUsage(AttributeTargets.Method)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ButtonAttribute</span> : <span class="title">Attribute</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> m_methodName = <span class="keyword">string</span>.Empty;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ButtonAttribute</span>(<span class="params"><span class="keyword">string</span> methodName</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_methodName = methodName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¢ç„¶æˆ‘ä»¬è¦åœ¨Inspectoré¢æ¿ä¸ŠåŠ ä¸œè¥¿ï¼Œé‚£æˆ‘ä»¬ä¹Ÿè¦æ“ä½œä¸€ä¸‹Inspectoré¢æ¿ã€‚<br>æˆ‘ä»¬åšä¸€ä¸ªCustomEditoré¢æ¿ç»™æˆ‘ä»¬çš„MonoBehaviorï¼Œè¿™ä¸ªé¢æ¿ä¼šä½œç”¨äºæ‰€æœ‰çš„MonoBehaviorã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">CustomEditor(typeof(MonoBehaviour), true), CanEditMultipleObjects</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseEditor</span> : <span class="title">Editor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Type m_targetType = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnInspectorGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// draw default stuff</span></span><br><span class="line">        <span class="keyword">base</span>.OnInspectorGUI();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == m_targetType)</span><br><span class="line">            m_targetType = target.GetType();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (m_targetType != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// try find member function and static function :)</span></span><br><span class="line">            MethodInfo[] methods = m_targetType.GetMethods(BindingFlags.Instance | BindingFlags.Static | BindingFlags.NonPublic | BindingFlags.Public);</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> method <span class="keyword">in</span> methods)</span><br><span class="line">            &#123;</span><br><span class="line">                ButtonAttribute button = method.GetCustomAttribute&lt;ButtonAttribute&gt;();</span><br><span class="line">                <span class="keyword">if</span> (button != <span class="literal">null</span> &amp;&amp; method.GetParameters().Length &gt; <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    EditorGUILayout.HelpBox(<span class="string">"ButtonAttribute: method cant have parameterz."</span>, MessageType.Warning);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (button != <span class="literal">null</span> &amp;&amp; GUILayout.Button(button.m_methodName))</span><br><span class="line">                &#123;</span><br><span class="line">                    method.Invoke(target, <span class="keyword">new</span> <span class="keyword">object</span>[] &#123; &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            m_targetType = m_targetType.BaseType;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ–°å»ºä¸€ä¸ªMonoBehaviorè„šæœ¬ï¼Œè¯•è¯•</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ToxicTester</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Button(<span class="meta-string">"try exec public method"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ExecPublicMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"try exec public method wa"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Button(<span class="meta-string">"try exec protected method"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">ExecProtectedMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"try exec protected method wa"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [<span class="meta">Button(<span class="meta-string">"try exec private method"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ExecPrivateMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"try exec private method wa"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Button(<span class="meta-string">"try exec public static method"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ExecPublicStaticMethod</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"try exec public static method wa"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/06/05/20200605-Unity-EasyButton/20200605-pic001.png" class="" title="split">
<p>æ•ˆæœå¦‚å›¾</p>
]]></content>
      <categories>
        <category>UnityEditor</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>UnityEditor</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®€æ˜“æ£€æµ‹ï¼Œç›®æ ‡æ˜¯å¦åœ¨æ‰‡å½¢åŒºåŸŸ(2D)</title>
    <url>/2020/06/14/20200614-check-target-fan-shape/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨é¡¹ç›®ç»„é‡Œåšä¸€äº›å°æ¸¸æˆåŸå‹ï¼Œæ·±æ„Ÿè‡ªå·±èœå¾—å¦‚è™«è±¸ã€‚ä¸ºäº†æ…¢æ…¢æå‡è¿˜æ˜¯å†³å®šåšä¸€äº›è®°å½•ï¼Œè™½ç„¶åªæ˜¯å¾ˆåƒåœ¾çš„åŠŸèƒ½ã€‚<br>å› ä¸ºåšçš„æ˜¯æ‰‹æ¸¸ï¼Œæ‰€ä»¥å¯¹æ€§èƒ½è›®çœ‹é‡çš„ï¼Œè¯´æ˜¯åŸå‹ï¼Œä¸ºäº†å¿«ä¹Ÿåªæ˜¯é¡¹ç›®é‡Œå¼€äº†ä¸ªå•ç‹¬çš„æ–°åœºæ™¯åšçš„ï¼Œ3Céƒ½æœ‰ï¼Œåšå¥½äº†å¯ä»¥ç›´æ¥æ‰“åŒ…APKè¯•ç©ã€‚<br>åºŸè¯ä¸å¤šè¯´ï¼Œè¿™æ¬¡åšçš„äº‹å¾ˆç®€å•ï¼Œåœ¨æ‰‡å½¢åŒºåŸŸå†…æ£€æµ‹ä¸€äº›ç›®æ ‡ã€‚å› ä¸ºå¬è¯´Vector3. Angle()é‡Œä¼šè·‘å¼€æ–¹çš„è®¡ç®—ï¼Œæ•…å°è¯•é¿å…ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<img src="/2020/06/14/20200614-check-target-fan-shape/20200614-pic001.png" class="" title="split">
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>éœ€è¦è§£å†³çš„éœ€æ±‚æ˜¯åœ¨æ£€æµ‹è€… å‰æ–¹ çš„ä¸€ä¸ªæ‰‡å½¢å†…æ£€æµ‹ç›®æ ‡ç‰©ä½“ï¼Œå…¶å®å¯ä»¥åŒ–ç®€ä¸º2Då¹³é¢çš„æ£€æµ‹ã€‚<br>æˆ‘å†³å®šå¤šæ¬¡ä½¿ç”¨ç‚¹ä¹˜å’Œå‰ä¹˜æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å·²çŸ¥æ•°æ®ï¼š<br>æ£€æµ‹è€…çš„ä½ç½®ï¼Œæœå‘ï¼Œæ£€æµ‹è§’åº¦å¤§å°ï¼ŒåŠå¾„å¤§å°<br>æ£€æµ‹ç›®æ ‡çš„ä½ç½®</p>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li>ç”¨æ£€æµ‹è€…çš„å‰æ–¹å‘é‡å’Œæ£€æµ‹è€…åˆ°ç›®æ ‡çš„æ–¹å‘å‘é‡ç‚¹ä¹˜æ¥åˆ¤æ–­ç›®æ ‡ç‰©ä½“æ˜¯å¦åœ¨æ£€æµ‹è€…å‰æ–¹ã€‚</li>
<li>ç”¨æ£€æµ‹è€…å‰æ–¹æ–¹å‘å‘é‡å’Œæ£€æµ‹åŒºåŸŸçš„ä¸¤ä¸ªè¾¹ç•Œæ–¹å‘åˆ†åˆ«å‰ä¹˜å¾—åˆ°ä¸¤ä¸ªæ³•å‘å‘é‡A,Bã€‚</li>
<li>ç”¨æ£€æµ‹è€…åˆ°ç›®æ ‡çš„æ–¹å‘å‘é‡å’Œæ£€æµ‹åŒºåŸŸçš„ä¸¤ä¸ªè¾¹ç•Œæ–¹å‘åˆ†åˆ«å‰ä¹˜å¾—åˆ°ä¸¤ä¸ªæ³•å‘å‘é‡C,Dã€‚</li>
<li>ç”¨ç‚¹ä¹˜æ£€æµ‹C,Dæ˜¯å¦åŒå‘ï¼Œæ˜¯ï¼Œåˆ™åœ¨æ£€æµ‹åŒºå¤–</li>
<li>æ˜¯å¦åŒæ—¶æ»¡è¶³å‘é‡A,CåŒå‘ï¼Œå‘é‡B,DåŒå‘ï¼Œæ˜¯ï¼Œåˆ™åœ¨æ£€æµ‹åŒºå†…</li>
</ol>
<p>å…¶å®æˆ‘è‡ªå·±éƒ½æ„Ÿè§‰è¿™ä¸­æ–‡ï¼Œå†™å¾—å¾ˆä¹±ï¼Œè¿˜ä¸å¦‚ç›´æ¥çœ‹ä»£ç 23333<br>å…¨éƒ¨ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TargetCheckTester</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Transform m_transform = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> m_checkAngle = <span class="number">60.0f</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> m_checkRadius = <span class="number">6.0f</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    <span class="keyword">private</span> Transform m_targetTransform = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CheckTarget1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == m_targetTransform)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        Vector3 myPos = m_transform.position;</span><br><span class="line">        Vector3 myForward = m_transform.forward;</span><br><span class="line">        <span class="keyword">float</span> halfAngle = m_checkAngle * <span class="number">0.5f</span>;</span><br><span class="line">        Vector3 dirUp = Quaternion.Euler(<span class="number">0.0f</span>, -halfAngle, <span class="number">0.0f</span>) * myForward;</span><br><span class="line">        Vector3 dirDown = Quaternion.Euler(<span class="number">0.0f</span>, halfAngle, <span class="number">0.0f</span>) * myForward;</span><br><span class="line"></span><br><span class="line">        Vector3 upCheck = Vector3.Cross(myForward, dirUp);</span><br><span class="line">        Vector3 downCheck = Vector3.Cross(myForward, dirDown);</span><br><span class="line"></span><br><span class="line">        Vector3 targetPos = m_targetTransform.position;</span><br><span class="line">        <span class="comment">// hack, to make them on a 2d plane :)</span></span><br><span class="line">        targetPos.y = myPos.y;</span><br><span class="line">        Vector3 toTargetDir = targetPos - myPos;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// draw line</span></span><br><span class="line">        Vector3 point1 = myPos + dirUp * m_checkRadius;</span><br><span class="line">        Vector3 point2 = myPos + dirDown * m_checkRadius;</span><br><span class="line">        Vector3 point0 = myPos + myForward * m_checkRadius;</span><br><span class="line"></span><br><span class="line">        Debug.DrawLine(myPos, point1, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(myPos, point2, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(myPos, point0, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(point1, point0, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(point2, point0, Color.yellow, Time.deltaTime);</span><br><span class="line">        Debug.DrawLine(myPos, targetPos, Color.red, Time.deltaTime);</span><br><span class="line">        <span class="comment">// draw line</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Vector3.Dot(toTargetDir, myForward) &lt; <span class="number">0.0f</span> || toTargetDir.sqrMagnitude &gt; m_checkRadius * m_checkRadius)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        Vector3 targetUpCheck = Vector3.Cross(toTargetDir, dirUp);</span><br><span class="line">        Vector3 targetDownCheck = Vector3.Cross(toTargetDir, dirDown);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">float</span> selfCheck = Vector3.Dot(targetUpCheck, targetDownCheck);</span><br><span class="line">        <span class="keyword">float</span> dotCheckUp = Vector3.Dot(upCheck, targetUpCheck);</span><br><span class="line">        <span class="keyword">float</span> dotCheckDown = Vector3.Dot(targetDownCheck, downCheck);</span><br><span class="line">        <span class="keyword">if</span> (selfCheck &lt;= <span class="number">0.0f</span> &amp;&amp; dotCheckUp * dotCheckDown &gt;= <span class="number">0.0f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">"target in sight"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">region</span> mono method</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_transform = <span class="keyword">this</span>.transform;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        CheckTarget1();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/06/14/20200614-check-target-fan-shape/20200614-pic002.png" class="" title="split">]]></content>
      <categories>
        <category>Unity</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>Gameplay</tag>
      </tags>
  </entry>
  <entry>
    <title>UnityObject ç©ºå¼•ç”¨æ£€æŸ¥å°æµ‹è¯•</title>
    <url>/2020/06/20/20200620-unity-obj-null-check/</url>
    <content><![CDATA[<blockquote>
<p>Classes deriving from Unity. Object inherit equality operators that change the behaviour of the == and != operators.<br>While these operators will perform standard . NET reference equality, if comparing one side to null, these operators will call native code to check if the underlying native engine object is still alive. </p>
</blockquote>
<p>è¿™æ®µè§£é‡Šæ¥è‡ªRiderçš„æç¤ºï¼š<br><a href="https://github.com/JetBrains/resharper-unity/wiki/Avoid-null-comparisons-against-UnityEngine.Object-subclasses" target="_blank" rel="noopener">https://github.com/JetBrains/resharper-unity/wiki/Avoid-null-comparisons-against-UnityEngine.Object-subclasses</a></p>
<p>UnityEngine åº•å±‚æ˜¯C++å†™çš„ï¼Œæ‰€ä»¥è¯´ï¼Œå…¶å®æˆ‘ä»¬å¯¹UnityObjectçš„ç©ºå¼•ç”¨æ£€æŸ¥éƒ½ä¼šå†æ·±å…¥åˆ°é‡Œé¢C++é‚£ä¸€å±‚å»å†æ£€æŸ¥ï¼Œè¿™ä¸ªæ£€æŸ¥æ˜¯æ¯”è¾ƒæ¶ˆè€—çš„ã€‚<br>ä¹‹å‰æ›¾ç»é‡åˆ°å› ä¸ºä½¿ç”¨äº† ?. è¯­æ³•ç³–è€Œå¯¼è‡´çš„ this æŒ‡é’ˆä¸ºnullçš„å¥‡å¦™bugï¼Œå¤§æ¦‚ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªåŸå› ã€‚</p>
<p>ç°åœ¨çš„å…¬å¸æ˜¯åšæ‰‹æ¸¸çš„ï¼Œå¤§å®¶å¯¹æ€§èƒ½éƒ½æ¯”è¾ƒçœ‹é‡ï¼Œä¸è¿‡æˆ‘ä¹ŸçœŸçš„å¥½å¥‡è¿™ä¸ªæ£€æŸ¥åˆ°åº•æœ‰å¤šæ¶ˆè€—ï¼Œå†³å®šè·‘ä¸€è·‘è¯•è¯•ã€‚</p>
<h1 id="Test-Case"><a href="#Test-Case" class="headerlink" title="Test Case"></a>Test Case</h1><p>å› ä¸ºæ˜¯åšæ‰‹æ¸¸ï¼Œéšæ„å¹²è„†å°±åœ¨æ‰‹æœºä¸Šæµ‹è¯•å¥½äº†ã€‚<br>å¤§æ¦‚æ˜¯è¿™æ ·çš„ç¯å¢ƒ:<br>Unity 2019.4 LTS</p>
<p>ç§»åŠ¨è®¾å¤‡è¿™è¾¹æ˜¯<br>Google Pixel Verzion(ä¿ºç©·ä¹°ç¾ç‰ˆ)<br>Android 9 (å·²è·å–Rootæƒé™)</p>
<p>TestCase è¿™è¾¹å…¶å®æˆ‘éƒ½æ˜¯çå¼„çš„ã€‚</p>
<p>åˆ†åˆ«è¿›è¡Œä¸‰ç§æµ‹è¯•ï¼š<br>Unity Object çš„ç©ºå¼•ç”¨æ£€æŸ¥ï¼›<br>POCO Object çš„ç©ºå¼•ç”¨æ£€æŸ¥ï¼›<br>bool çš„ç›´æ¥æ£€æŸ¥ï¼›(å› ä¸ºæˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªä»£æ›¿Unity Objectç©ºå¼•ç”¨æ£€æŸ¥çš„ä¸€ä¸ªæ–¹æ³•</p>
<p>æ¯ä¸€ç§æ£€æŸ¥éƒ½æœ‰æ£€æŸ¥åˆ°trueå’Œfalseçš„ä¸¤ç§æƒ…å†µï¼Œå¹¶å¾ªç¯è·‘å¤šæ¬¡ã€‚</p>
<p>ç„¶åï¼Œä¸Šä»£ç ï¼</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">TempCheckTest</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempObjA</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> m_tempNum = <span class="number">56</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">NullCheckTester</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// unity obj null check</span></span><br><span class="line">        <span class="keyword">private</span> Transform m_emptyTransform = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">private</span> Transform m_selfTransform = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// poco obj null check</span></span><br><span class="line">        <span class="keyword">private</span> TempObjA m_emptyObjA = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">private</span> TempObjA m_objA = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// bool check</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">bool</span> m_boolTrue = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">bool</span> m_boolFalse = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Header(<span class="meta-string">"test"</span>)</span>]</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> m_checkTimes = <span class="number">100000</span>;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Header(<span class="meta-string">"UI side"</span>)</span>]</span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.Text m_outPutText = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.Button m_doUnityObjTestButton = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.Button m_doPocoObjTestButton = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.Button m_doBoolTestButton = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> UnityEngine.UI.InputField m_inputField = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Button(<span class="meta-string">"init awake"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InitTester</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_emptyTransform = <span class="literal">null</span>;</span><br><span class="line">            m_selfTransform = <span class="keyword">this</span>.transform;</span><br><span class="line"></span><br><span class="line">            m_emptyObjA = <span class="literal">null</span>;</span><br><span class="line">            m_objA = <span class="keyword">new</span> TempObjA();</span><br><span class="line"></span><br><span class="line">            m_boolTrue = <span class="literal">true</span>;</span><br><span class="line">            m_boolFalse = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            m_outPutText.text = <span class="keyword">string</span>.Empty;</span><br><span class="line"></span><br><span class="line">            m_doUnityObjTestButton.onClick.RemoveAllListeners();</span><br><span class="line">            m_doPocoObjTestButton.onClick.RemoveAllListeners();</span><br><span class="line">            m_doBoolTestButton.onClick.RemoveAllListeners();</span><br><span class="line"></span><br><span class="line">            m_doUnityObjTestButton.onClick.AddListener(DoUnityObjNullCheckTest);</span><br><span class="line">            m_doPocoObjTestButton.onClick.AddListener(DoPOCOObjNullCheckTest);</span><br><span class="line">            m_doBoolTestButton.onClick.AddListener(DoBoolObjNullCheckTest);</span><br><span class="line"></span><br><span class="line">            m_inputField.onValueChanged.RemoveAllListeners();</span><br><span class="line">            m_inputField.onValueChanged.AddListener(OnInputNumberChanged);</span><br><span class="line">            m_checkTimes = <span class="number">100000</span>;</span><br><span class="line">            m_inputField.text = m_checkTimes.ToString();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Button(<span class="meta-string">"do unity.object null check test"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoUnityObjNullCheckTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            System.Diagnostics.Stopwatch watcher = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</span><br><span class="line">            watcher.Start();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_checkTimes; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == m_emptyTransform) &#123;&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == m_selfTransform) &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            watcher.Stop();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">string</span> outPut = <span class="string">$"do unity.object null check test 2*<span class="subst">&#123;m_checkTimes&#125;</span> cost <span class="subst">&#123;watcher.ElapsedMilliseconds&#125;</span>ms"</span>;</span><br><span class="line">            m_outPutText.text = outPut;</span><br><span class="line">            Debug.Log(outPut);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Button(<span class="meta-string">"do poco object null check test"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoPOCOObjNullCheckTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            System.Diagnostics.Stopwatch watcher = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</span><br><span class="line">            watcher.Start();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_checkTimes; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == m_emptyObjA) &#123;&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> == m_objA) &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            watcher.Stop();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">string</span> outPut = <span class="string">$"do poco object null check test 2*<span class="subst">&#123;m_checkTimes&#125;</span> cost <span class="subst">&#123;watcher.ElapsedMilliseconds&#125;</span>ms"</span>;</span><br><span class="line">            m_outPutText.text = outPut;</span><br><span class="line">            Debug.Log(outPut);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">Button(<span class="meta-string">"do bool check test"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoBoolObjNullCheckTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            System.Diagnostics.Stopwatch watcher = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</span><br><span class="line">            watcher.Start();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_checkTimes; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (m_boolFalse) &#123;&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (m_boolTrue) &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            watcher.Stop();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">string</span> outPut = <span class="string">$"do bool check test 2*<span class="subst">&#123;m_checkTimes&#125;</span> cost <span class="subst">&#123;watcher.ElapsedMilliseconds&#125;</span>ms"</span>;</span><br><span class="line">            m_outPutText.text = outPut;</span><br><span class="line">            Debug.Log(outPut);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnInputNumberChanged</span>(<span class="params"><span class="keyword">string</span> arg0</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (!Int32.TryParse(arg0, <span class="keyword">out</span> result))</span><br><span class="line">                result = Int32.MaxValue;</span><br><span class="line"></span><br><span class="line">            m_checkTimes = result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">region</span> mono method</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Reset</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            InitTester();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            InitTester();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">this</span>.enabled = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Test-Result"><a href="#Test-Result" class="headerlink" title="Test Result"></a>Test Result</h1><img src="/2020/06/20/20200620-unity-obj-null-check/20200620-pic001.png" class="" title="split">
<p>åˆ†åˆ«è¿›è¡Œ10wæ¬¡å’Œ100wæ¬¡æµ‹è¯•çœ‹çœ‹ç»“æœã€‚</p>
<p>10wæ¬¡:<br>Unity Object null check 4~7ms<br>POCO Object null check 0ms<br>bool check 0ms</p>
<p>100wæ¬¡:<br>Unity Object null check 45~60ms<br>POCO Object null check 3~4ms<br>bool check 2ms</p>
<p>å½“æ£€æµ‹æ•°é‡éå¸¸å¤šçš„æ—¶å€™ï¼ŒUnity Object ç©ºå¼•ç”¨æ£€æŸ¥çš„æ€§èƒ½æ¶ˆè€—æ¯”å…¶ä»–ä¸¤ä¸ªå¤§äº†å¾ˆå¤šå¾ˆå¤šã€‚ç°åœ¨çš„é¡¹ç›®é‡Œå¤§éƒ¨åˆ†ä¸œè¥¿å…¶å®éƒ½æ˜¯POCOçš„ã€‚<br>ä¼¼ä¹æŠŠUnityObject Destroyä¹‹åå†æ‰‹åŠ¨æŠŠå˜é‡ç½®ç©ºæ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼ˆ</p>
]]></content>
      <categories>
        <category>Unity</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>UnityOptimization</tag>
      </tags>
  </entry>
  <entry>
    <title>Unityå‡½æ•°Awakeå’ŒOnEnableæ‰§è¡Œé¡ºåºå°å‘</title>
    <url>/2020/06/22/20200622-awake-enable-order/</url>
    <content><![CDATA[<blockquote>
<p>Awake: This function is always called before any Start functions and also just after a prefabis instantiated. (If a GameObject is inactive during start up Awake is not called until it is made active.)</p>
<p>OnEnable: (only called if the Object is active): This function is called just after the object is enabled. This happens when a MonoBehaviour instance is created, such as when a level is loaded or a GameObject with the script component is instantiated.</p>
</blockquote>
<p><a href="https://docs.unity3d.com/Manual/ExecutionOrder.html" target="_blank" rel="noopener">check the exec order here</a></p>
<img src="/2020/06/22/20200622-awake-enable-order/20200622-pic001.png" class="" title="split">
<p>ä»Šå¤©åšå·¥æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨Mono Açš„ Awake ä¸­æŠŠMono Açš„å®ä¾‹ç»‘å®šåˆ°äº†GameManageré‡Œï¼Œç„¶åå†Mono Bçš„ OnEnable ä¸­è·å–Mono Açš„å®ä¾‹ï¼Œç»“æœè·³äº†ä¸ªç©ºå¼•ç”¨å¼‚å¸¸ã€‚<br>æŠŠæˆ‘æƒŠäº†ï¼ŒåŸæ¥è¿™ä¸€å¹´å¤šæ¥æˆ‘ä¸€ç›´åœ¨ä¸€ä¸ªè¯¯åŒºé‡Œã€‚</p>
<p>æˆ‘ä»¥å‰ä¸€ç›´è®¤ä¸ºæ˜¯å½“åœºæ™¯é‡Œæ‰€æœ‰çš„ Awake è·‘å®Œæ‰å¼€å§‹è·‘ OnEnable()ã€‚ä½†å…¶å®ä¸æ˜¯è¿™æ ·çš„ã€‚</p>
<p><strong>å½“ä¸€ä¸ªMonoçš„ Awake è·‘å®Œä»¥åä¼šæ¥ç€è·‘ä»–çš„ OnEnable , æ¥ç€æ‰å»è·‘å…¶ä»–ç‰©ä½“çš„ Awake å’Œ OnEnableã€‚</strong></p>
<p>éšä¾¿å†™ä¸¤è¡Œæµ‹è¯•ä¸€ä¸‹å°±çŸ¥é“äº†ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TesterA1</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Type m_type = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_type = <span class="keyword">this</span>.GetType();</span><br><span class="line">        Debug.Log(<span class="string">$"<span class="subst">&#123;m_type.Name&#125;</span> awake"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">$"<span class="subst">&#123;m_type.Name&#125;</span> on enable"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TesterB1</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="keyword">private</span> Type m_type = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_type = <span class="keyword">this</span>.GetType();</span><br><span class="line">        Debug.Log(<span class="string">$"<span class="subst">&#123;m_type.Name&#125;</span> awake"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">$"<span class="subst">&#123;m_type.Name&#125;</span> on enable"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TesterC1</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Type m_type = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_type = <span class="keyword">this</span>.GetType();</span><br><span class="line">        Debug.Log(<span class="string">$"<span class="subst">&#123;m_type.Name&#125;</span> awake"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">$"<span class="subst">&#123;m_type.Name&#125;</span> on enable"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>éƒ½æ•´ä¸Šä¸€æ ·çš„å†…å®¹ï¼ŒAå’ŒCç»‘åœ¨ç‰©ä½“tester01ä¸Šï¼ŒBç»‘åœ¨ç‰©ä½“tester02ä¸Šã€‚</p>
<img src="/2020/06/22/20200622-awake-enable-order/20200622-pic002.png" class="" title="split">
]]></content>
      <categories>
        <category>Unity</category>
      </categories>
      <tags>
        <tag>Unity</tag>
      </tags>
  </entry>
  <entry>
    <title>UnityEditor Scrollview Pagination(åˆ†é¡µ)</title>
    <url>/2020/06/26/20200626-unity-editor-scrollview-pagination/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¹‹å‰åœ¨åšCloneConsoleçš„æ—¶å€™ï¼Œä¼šåœ¨æ¯æ¬¡ç»˜åˆ¶çš„æ—¶å€™å°è¯•ç»˜åˆ¶æ‰€æœ‰çš„logï¼Œç„¶åå†äº¤ç»™UnityEditorè‡ªå·±å»å¤„ç†æ˜¾ç¤ºçš„é€»è¾‘ã€‚å› ä¸ºæˆ‘ä»¬ä¼šå †ç§¯å‡ ç™¾ç”šè‡³å‡ åƒæ¡logï¼Œè¿™æ ·çš„åšæ³•æ— ç–‘ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œç»“æœå°±æ˜¯consoleå¡å¾—ä¸èƒ½ç”¨ã€‚</p>
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>å…¶å®æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ç”»é‚£äº›ä¼šæ˜¾ç¤ºå‡ºæ¥çš„itemå°±è¡Œäº†ã€‚<br>åœ¨è¿™ä¹‹å‰éœ€è¦ç®—å‡ºå“ªäº›itemæ˜¯å¯ä»¥è¢«æ˜¾ç¤ºå‡ºæ¥çš„</p>
<ol>
<li>ç®—å‡ºæ‰€æœ‰çš„itemåŠ èµ·æ¥æœ‰å¤šé«˜</li>
<li>ç”¨å½“å‰æ»‘æ¡çš„ä½ç½®æ¥æ¨ç®—å‡ºå½“å‰éœ€è¦ç»˜åˆ¶çš„ç¬¬ä¸€æ¡itemçš„ç´¢å¼•</li>
<li>ç»˜åˆ¶item</li>
<li>ç»˜åˆ¶æ»‘æ¡å¹¶è®¡ç®—å…¶ä¸‹ä¸€æ¬¡çš„ä½ç½®</li>
</ol>
<p>å…¶å®è¿™ä¸ªæ€è·¯åº”è¯¥ä¹Ÿèƒ½åº”ç”¨åˆ°UGUIä¸Šï¼Œä¸‹æ¬¡æˆ‘ä¹Ÿè¦è¯•è¯•ã€‚</p>
<h1 id="ä¸Šä»£ç "><a href="#ä¸Šä»£ç " class="headerlink" title="ä¸Šä»£ç "></a>ä¸Šä»£ç </h1><p>åœ¨ä¸€ä¸ªæ–°çª—å£ä¸­å°è¯•ç”»ä¸€ç”»å°±å¥½ã€‚<br>é¦–å…ˆè¦å‡†å¤‡å¥½ç”¨æ¥æµ‹è¯•çš„ä¸€äº›æ•°æ®ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">TempDraw</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">System.Serializable</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">struct</span> TempDrawData</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> IconTag;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">string</span> TempMessage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempDrawWindowTester</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> TempDrawWindowTester _instance = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">public</span> TempDrawWindowTester Instance =&gt; _instance;</span><br><span class="line"></span><br><span class="line">        List&lt;TempDrawData&gt; m_data = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// used to give out the data</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">event</span> System.Action&lt;List&lt;TempDrawData&gt;&gt; OnDataSpread;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŠŠæµ‹è¯•ç”¨çš„æ•°æ®éƒ½å­˜åœ¨è¿™ä¸ªMonoé‡Œï¼Œå†ç”¨å®ƒçš„é™æ€äº‹ä»¶æŠŠæ•°æ®ä¼ é€’åˆ°çª—å£ä¸­ã€‚<br>ä»£ç é‡Œçš„ Button attribute æ˜¯ç”¨æ¥åœ¨editorä¸Šåˆ›å»ºæŒ‰é’®çš„ã€‚</p>
<p>æµ‹è¯•ç”¨çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬æ¥æ¥è¿›è¡Œç»˜åˆ¶ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">TempDraw</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempDrawWindow</span> : <span class="title">EditorWindow</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">string</span> WINDOW_NAME = <span class="string">"Temp Draw Window"</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> TempDrawWindow _instance = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> TempDrawWindow Instance =&gt; _instance;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> List&lt;TempDrawData&gt; m_data = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">float</span> m_scrollPosition = <span class="number">0.0f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">region</span> temp element</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">float</span> ELEMENT_HEIGHT = <span class="number">20.0f</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">float</span> ELEMENT_ICON_SIZE = <span class="number">20.0f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">region</span> icons</span></span><br><span class="line">        <span class="keyword">private</span> Texture2D m_infoIconSmall = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">private</span> Texture2D m_warningIconSmall = <span class="literal">null</span>;</span><br><span class="line">        <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">        [<span class="meta">MenuItem(<span class="meta-string">"Window/Temp Draw Window"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenWindow</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            TempDrawWindow window = GetWindow&lt;TempDrawWindow&gt;();</span><br><span class="line">            Texture2D icon = EditorGUIUtility.Load(<span class="string">"icons/UnityEditor.ConsoleWindow.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">            window.titleContent = <span class="keyword">new</span> GUIContent(WINDOW_NAME, icon);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetData</span>(<span class="params">List&lt;TempDrawData&gt; data</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> == m_data)</span><br><span class="line">                m_data = <span class="keyword">new</span> List&lt;TempDrawData&gt;();</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                m_data.Clear();</span><br><span class="line"></span><br><span class="line">            m_data.AddRange(data);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawTempElement</span>(<span class="params">Rect elementRect, <span class="keyword">int</span> dataIndex</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Rect iconRect = <span class="keyword">new</span> Rect(elementRect.x, elementRect.y, ELEMENT_ICON_SIZE, elementRect.height);</span><br><span class="line">            <span class="keyword">if</span> (m_data[dataIndex].IconTag == <span class="number">0</span>)</span><br><span class="line">                GUI.Label(iconRect, m_infoIconSmall);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                GUI.Label(iconRect, m_warningIconSmall);</span><br><span class="line"></span><br><span class="line">            Rect labelRect = <span class="keyword">new</span> Rect(elementRect.x + ELEMENT_ICON_SIZE, elementRect.y, elementRect.width - ELEMENT_ICON_SIZE, elementRect.height);</span><br><span class="line">            GUI.Label(labelRect, <span class="string">$"Tag: <span class="subst">&#123;m_data[dataIndex].IconTag&#125;</span> ; Message: <span class="subst">&#123;m_data[dataIndex].TempMessage&#125;</span> ;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawTempRect</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">// only use half space of this shit window</span></span><br><span class="line">            Rect viewportRect = <span class="keyword">new</span> Rect(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="keyword">this</span>.position.width, <span class="keyword">this</span>.position.height * <span class="number">0.5f</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">float</span> scrollbarWidth = GUI.skin.verticalScrollbar.fixedWidth;</span><br><span class="line">            Rect scrollbarRect = <span class="keyword">new</span> Rect(viewportRect.x + viewportRect.width - scrollbarWidth, viewportRect.y, scrollbarWidth, viewportRect.height);</span><br><span class="line">            Rect currentRect = <span class="keyword">new</span> Rect(<span class="number">0.0f</span>, <span class="number">0.0f</span>, viewportRect.width - scrollbarWidth, viewportRect.height);</span><br><span class="line">            <span class="keyword">float</span> viewportHeight = viewportRect.height;</span><br><span class="line">            <span class="keyword">int</span> elementCount = m_data.Count;</span><br><span class="line"></span><br><span class="line">            GUI.BeginClip(currentRect); <span class="comment">// to clip the overflow stuff</span></span><br><span class="line">            <span class="keyword">int</span> indexOffset = Mathf.FloorToInt(m_scrollPosition / ELEMENT_HEIGHT);</span><br><span class="line">            <span class="keyword">int</span> showCount = Mathf.CeilToInt(currentRect.height / ELEMENT_HEIGHT);</span><br><span class="line">            showCount = showCount &gt; elementCount ? elementCount : showCount;</span><br><span class="line">            <span class="keyword">float</span> startPosY = (indexOffset * ELEMENT_HEIGHT) - m_scrollPosition;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; showCount; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Rect elementRect = <span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span> + startPosY + i * ELEMENT_HEIGHT, currentRect.width, ELEMENT_HEIGHT);</span><br><span class="line">                DrawTempElement(elementRect, indexOffset + i);</span><br><span class="line">            &#125;</span><br><span class="line">            GUI.EndClip();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// do stuff for scroller</span></span><br><span class="line">            <span class="keyword">float</span> fullElementHeight = elementCount * ELEMENT_HEIGHT;</span><br><span class="line">            m_scrollPosition = Mathf.Max(<span class="number">0</span>, GUI.VerticalScrollbar(scrollbarRect, m_scrollPosition, currentRect.height, <span class="number">0</span>, Mathf.Max(fullElementHeight, currentRect.height)));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> controlId = GUIUtility.GetControlID(FocusType.Passive);</span><br><span class="line">            <span class="keyword">float</span> scrollSensitivity = ELEMENT_HEIGHT;</span><br><span class="line">            <span class="keyword">float</span> maxScrollPos = (fullElementHeight &gt; currentRect.height) ? (fullElementHeight - currentRect.height) : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (EventType.ScrollWheel == Event.current.GetTypeForControl(controlId))</span><br><span class="line">            &#123;</span><br><span class="line">                m_scrollPosition = Mathf.Clamp(m_scrollPosition + Event.current.delta.y * scrollSensitivity, <span class="number">0</span>, maxScrollPos);</span><br><span class="line">                Event.current.Use();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">GetAsset</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_infoIconSmall = EditorGUIUtility.Load(<span class="string">"icons/console.infoicon.sml.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">            m_warningIconSmall = EditorGUIUtility.Load(<span class="string">"icons/console.warnicon.sml.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">region</span> life cycle</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            _instance = <span class="keyword">this</span>;</span><br><span class="line">            m_data = <span class="keyword">new</span> List&lt;TempDrawData&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            TempDrawWindowTester.OnDataSpread -= SetData;</span><br><span class="line">            TempDrawWindowTester.OnDataSpread += SetData;</span><br><span class="line">            GetAsset();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            DrawTempRect();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDestroy</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            TempDrawWindowTester.OnDataSpread -= SetData;</span><br><span class="line">            _instance = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/06/26/20200626-unity-editor-scrollview-pagination/20200626-pic001.png" class="" title="split">
<img src="/2020/06/26/20200626-unity-editor-scrollview-pagination/20200626-pic002.png" class="" title="split">
<p>æ•ˆæœå¦‚å›¾</p>
]]></content>
      <categories>
        <category>UnityEditor</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>unityEditor</tag>
      </tags>
  </entry>
  <entry>
    <title>Unity UGUI ScrollRect å­¦ä¹ ç¬”è®° (1)</title>
    <url>/2020/08/23/20200823-UGUI-ScrollRect-Learn-01/</url>
    <content><![CDATA[<p>å…¥å¤ä»¥åéå¸¸çƒ­ï¼Œæˆ‘æˆ¿é—´é‡Œçš„ç©ºè°ƒé—²ç½®å¾ˆä¹…æ²¡æ¸…ç†ï¼Œä¹Ÿä¸€ç›´ä¸æ•¢å¼€ï¼Œæ‰€ä»¥å‘¨æœ«åŸºæœ¬éƒ½æ¯«æ— ç”Ÿäº§åŠ›ï¼Œåªèƒ½èººå°¸ã€‚<br>è¿™æ®µæ—¶é—´åœ¨å…¬å¸é‡ŒåŸºæœ¬éƒ½æ˜¯ç»™UIæœ‹å‹ä»¬åšäº‹ï¼Œè€Œä¸”ä¼°è®¡ä»¥åä¼šæ›´å¤šçš„æ¥è§¦è¿™æ–¹é¢çš„ä¸œè¥¿ï¼Œå†³å®šå¼€å§‹å­¦ä¹ ä¸€ä¸‹UGUIäº†ï¼Œä¸ºäº†ä»¥åèƒ½åšå‡ºå¯é å¤ç”¨æ€§èƒ½å‹å¥½çš„UIã€‚</p>
<p>Unity UGUIçš„å‡ ä¹æ‰€æœ‰c#ä»£ç éƒ½æ˜¯å¼€æºçš„ï¼Œåœ¨githubä¸Šèƒ½å¤Ÿè·å–åˆ°ï¼Œä¹‹å‰çš„BitBucketä»“åº“å·²ç»å…³é—­äº†ã€‚<br><a href="https://github.com/Unity-Technologies/uGUI/tree/2018.4" target="_blank" rel="noopener">unity UGUI source code</a></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ScrollRectæ˜¯ä¸ªå¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰åˆå¾ˆæ–¹ä¾¿çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶åœ¨ä»»ä½•æ—¶æœŸéƒ½å¯èƒ½ä¼šå¼•å‘æ€§èƒ½é—®é¢˜ã€‚æˆ‘ä»¬ä¼šæœ‰è®¸å¤šç‰©å“éœ€è¦æ˜¾ç¤ºï¼Œåœ¨æ»‘åŠ¨çš„æ—¶å€™ä¼šå¡ï¼ŒåŒæ—¶æˆ‘ä»¬ä¸ºäº†æ˜¾ç¤ºè®¸å¤šçš„ç‰©å“ä¼šåˆ›å»ºå¾ˆå¤šUIç‰©ä½“ï¼Œè¿™äº›ç‰©ä½“ä¹Ÿåœ¨åƒå†…å­˜ã€‚</p>
<p>ä¹‹å‰åœ¨Editorä¸­åšäº†ç±»ä¼¼çš„åŠŸèƒ½ï¼Œç°åœ¨æ‰“ç®—åœ¨UGUIä¸Šä¹Ÿå®ç°ã€‚ä¸ºäº†åˆ›å»ºè‡ªå·±çš„ScrollRectæˆ‘ä¸‹è½½äº†UGUI ScrollRectçš„æºç ï¼Œä½†æ˜¯å‘ç°æˆ‘å¤ªèœäº†çœ‹ä¸æ‡‚ã€‚UGUIçš„ä½¿ç”¨æƒ…æ™¯å…¶å®æ¯”Editor GUIè¦å¤æ‚ã€‚<br>ä¸€å£åƒä¸æˆèƒ–å­ï¼Œé‚£å°±å¤šåƒå‡ å£ï¼Œæˆ‘å†³å®šæ…¢æ…¢æ¥ï¼Œä¸€æ­¥æ­¥å†™å®Œè¿™ä¸ªç»„ä»¶ã€‚</p>
<p><a href="https://2c2c2c.github.io/2020/06/26/20200626-unity-editor-scrollview-pagination/" target="_blank" rel="noopener">UnityEditor Scrollview</a></p>
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>UIæ˜¾ç¤ºçš„é€»è¾‘ä¾æ—§å¥—ç”¨ä¸Šæ¬¡çš„é‚£åšæ³•ï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬æ²¡æ³•ç®€å•å¤„ç†ç”¨æˆ·çš„è¾“å…¥äº†ã€‚æ‰€ä»¥æˆ‘ä¾é åŸå§‹çš„ScrollRectä»£ç æ¥å¤„ç†è¾“å…¥ï¼Œå†è®¡ç®—å‡ºæˆ‘éœ€è¦çš„ç»“æœã€‚<br>å› ä¸ºæˆ‘æ— æ³•è¯»æ‡‚ScrollRectçš„ä»£ç ï¼Œæ‰€ä»¥éœ€è¦å¦å¤–å†™ä¸€ä¸ªè„šæœ¬æ¥æ§åˆ¶UIçš„æ˜¾ç¤ºã€‚</p>
<img src="/2020/08/23/20200823-UGUI-ScrollRect-Learn-01/20200823-scrollrect02.png" class="" title="split">
<img src="/2020/08/23/20200823-UGUI-ScrollRect-Learn-01/20200823-scrollrect03.png" class="" title="split">
<p>å…¶ä¸­ï¼ŒDragContentæ˜¯ç”¨æ¥æ¥å—ç”¨æˆ·æ‹–æ‹½çš„ï¼Œä¸ç”¨äºç®¡ç†UIç‰©ä½“ï¼Œæ‰€ä»¥ç›´æ¥æš‚æ—¶è®©å…¶æ’‘æ»¡æ•´ä¸ªViewportã€‚RealContentæ˜¯ç”¨äºç®¡ç†UIç‰©ä½“çš„ï¼Œå…¶å¤§å°å’Œ DragContentä¸€æ ·å¤§å°±å¥½ï¼Œå› ä¸ºæˆ‘ä¸æ‰“ç®—ç§»åŠ¨è¿™ä¸ªç‰©ä½“ã€‚</p>
<p>æˆ‘è¿™æ¬¡ä¹Ÿæ˜¯ç›´æ¥é‡æ–°æ’åˆ—æ‰€æœ‰æœ‰å¯èƒ½ä¼šå‚ä¸æ˜¾ç¤ºçš„UIç‰©ä½“çš„ä½ç½®ï¼Œä¸ºäº†é˜²æ­¢å¿«é€Ÿæ‹–æ‹½çš„æ—¶å€™ç©¿å¸®ï¼Œæˆ‘ä»¬å¤§æ¦‚éœ€è¦è¿™ä¹ˆå¤šUIç‰©ä½“ (èƒ½åœ¨è§†å£å†…ç°å®çš„UIæ•°é‡)+2ã€‚å½“ç„¶ï¼Œæˆ‘è¿˜ä¸ä¼šå¤„ç†æ»‘æ¡çš„äº‹ä»¶ï¼Œæ‰€ä»¥ç°åœ¨æ»‘æ¡å…ˆç”±ç¬¬äºŒä¸ªè„šæœ¬è¿›è¡Œç®¡ç†ã€‚</p>
<h1 id="ä¸Šä»£ç "><a href="#ä¸Šä»£ç " class="headerlink" title="ä¸Šä»£ç "></a>ä¸Šä»£ç </h1><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempScrollRect</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Hiko shit</span></span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    <span class="keyword">private</span> ScrollRectEvent m_OnValueChangedDelta = <span class="keyword">new</span> ScrollRectEvent(); <span class="comment">// value delta</span></span><br><span class="line">    <span class="keyword">public</span> ScrollRectEvent onValueChangedDelta &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> m_OnValueChangedDelta; &#125; <span class="keyword">set</span> &#123; m_OnValueChangedDelta = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// .................</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Hiko shit</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnScroll</span>(<span class="params">PointerEventData data</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!IsActive())</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        EnsureLayoutHasRebuilt();</span><br><span class="line">        UpdateBounds();</span><br><span class="line"></span><br><span class="line">        Vector2 delta = data.scrollDelta;</span><br><span class="line">        <span class="comment">// Down is positive for scroll events, while in UI system up is positive.</span></span><br><span class="line">        delta.y *= <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span> (vertical &amp;&amp; !horizontal)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Mathf.Abs(delta.x) &gt; Mathf.Abs(delta.y))</span><br><span class="line">                delta.y = delta.x;</span><br><span class="line">            delta.x = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (horizontal &amp;&amp; !vertical)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Mathf.Abs(delta.y) &gt; Mathf.Abs(delta.x))</span><br><span class="line">                delta.x = delta.y;</span><br><span class="line">            delta.y = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO @Hiko should also do stuff for elastic move</span></span><br><span class="line">        m_OnValueChangedDelta?.Invoke(delta * m_ScrollSensitivity * m_ViewRect.rect.height * <span class="number">0.1f</span>);</span><br><span class="line">        <span class="comment">//Debug.Log($"get on scroll data &#123;delta&#125;");</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Vector2 position = m_DragContent.anchoredPosition;</span></span><br><span class="line">        <span class="comment">//position += delta * m_ScrollSensitivity;</span></span><br><span class="line">        <span class="comment">//if (m_MovementType == MovementType.Clamped)</span></span><br><span class="line">        <span class="comment">//position += CalculateOffset(position - m_DragContent.anchoredPosition);</span></span><br><span class="line">        <span class="comment">//SetContentAnchoredPosition(position);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// in fact I dun know how to update bounds correctly yet</span></span><br><span class="line"></span><br><span class="line">        UpdateBounds();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Hiko shit</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnBeginDrag</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (eventData.button != PointerEventData.InputButton.Left)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!IsActive())</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        UpdateBounds();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// @Hiko shit</span></span><br><span class="line">        m_PointerStartLocalCursor = Vector2.zero;</span><br><span class="line">        RectTransformUtility.ScreenPointToLocalPointInRectangle(viewRect, eventData.position, eventData.pressEventCamera, <span class="keyword">out</span> m_PointerStartLocalCursor);</span><br><span class="line">        <span class="comment">//m_ContentStartPosition = m_DragContent.anchoredPosition;</span></span><br><span class="line">        m_Dragging = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnEndDrag</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (eventData.button != PointerEventData.InputButton.Left)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// @Hiko shit</span></span><br><span class="line">        m_Dragging = <span class="literal">false</span>;</span><br><span class="line">        m_pointerPos = Vector2.zero;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Hiko shit</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Vector2 m_pointerPos = <span class="keyword">default</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnDrag</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (eventData.button != PointerEventData.InputButton.Left)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!IsActive())</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        Vector2 localCursor;</span><br><span class="line">        <span class="keyword">if</span> (!RectTransformUtility.ScreenPointToLocalPointInRectangle(viewRect, eventData.position, eventData.pressEventCamera, <span class="keyword">out</span> localCursor))</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        UpdateBounds();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// it's delta from current point to the first start point</span></span><br><span class="line">        Vector2 pointerDelta = localCursor - m_PointerStartLocalCursor;</span><br><span class="line">        Vector2 currentDelta = pointerDelta - m_pointerPos;</span><br><span class="line">        m_pointerPos = pointerDelta;</span><br><span class="line">        <span class="comment">//Debug.Log($"check pointer delta &#123;currentDelta&#125;");</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO @Hiko</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">true</span> || MovementType.Clamped == m_MovementType)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// no speed move for it</span></span><br><span class="line">            m_OnValueChangedDelta.Invoke(currentDelta * m_ScrollSensitivity);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            FakeMoveContent();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// do it properly, for the drag content</span></span><br><span class="line">        <span class="comment">// Offset to get content into place in the view.</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Vector2 offset = CalculateOffset(position - m_DragContent.anchoredPosition);</span></span><br><span class="line">        <span class="comment">//position += offset;</span></span><br><span class="line">        <span class="comment">//if (m_MovementType == MovementType.Elastic)</span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">        <span class="comment">//    if (offset.x != 0)</span></span><br><span class="line">        <span class="comment">//        position.x = position.x - RubberDelta(offset.x, m_ViewBounds.size.x);</span></span><br><span class="line">        <span class="comment">//    if (offset.y != 0)</span></span><br><span class="line">        <span class="comment">//        position.y = position.y - RubberDelta(offset.y, m_ViewBounds.size.y);</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//SetContentAnchoredPosition(position);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Hiko shit</span></span><br><span class="line">    <span class="keyword">private</span> Vector2 m_contentMoveSpeed = <span class="keyword">default</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FakeMoveContent</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// this is for elastic to move, maybe later</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Hiko shit</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">SetContentAnchoredPosition</span>(<span class="params">Vector2 position</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// disble it for now cuz I dun move content object</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!m_Horizontal)</span><br><span class="line">            position.x = m_DragContent.anchoredPosition.x;</span><br><span class="line">        <span class="keyword">if</span> (!m_Vertical)</span><br><span class="line">            position.y = m_DragContent.anchoredPosition.y;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (position != m_DragContent.anchoredPosition)</span><br><span class="line">        &#123;</span><br><span class="line">            m_DragContent.anchoredPosition = position;</span><br><span class="line">            UpdateBounds();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Hiko shit</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">LateUpdate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!m_DragContent)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        EnsureLayoutHasRebuilt();</span><br><span class="line"></span><br><span class="line">        UpdateScrollbarVisibility();</span><br><span class="line"></span><br><span class="line">        UpdateBounds();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">float</span> deltaTime = Time.unscaledDeltaTime;</span><br><span class="line">        Vector2 offset = CalculateOffset(Vector2.zero);</span><br><span class="line">        <span class="keyword">if</span> (!m_Dragging &amp;&amp; (offset != Vector2.zero || m_Velocity != Vector2.zero))</span><br><span class="line">        &#123;</span><br><span class="line">            Vector2 position = m_DragContent.anchoredPosition;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> axis = <span class="number">0</span>; axis &lt; <span class="number">2</span>; axis++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// Apply spring physics if movement is elastic and content has an offset from the view.</span></span><br><span class="line">                <span class="keyword">if</span> (m_MovementType == MovementType.Elastic &amp;&amp; offset[axis] != <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">float</span> speed = m_Velocity[axis];</span><br><span class="line">                    position[axis] = Mathf.SmoothDamp(m_DragContent.anchoredPosition[axis], m_DragContent.anchoredPosition[axis] + offset[axis], <span class="keyword">ref</span> speed, m_Elasticity, Mathf.Infinity, deltaTime);</span><br><span class="line">                    m_Velocity[axis] = speed;</span><br><span class="line">                    <span class="comment">// @Hiko </span></span><br><span class="line">                    <span class="comment">//if (Mathf. Abs(speed) &lt; 1)</span></span><br><span class="line">                    <span class="comment">//    speed = 0; </span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// Else move content according to velocity with deceleration applied.</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (m_Inertia)</span><br><span class="line">                &#123;</span><br><span class="line">                    m_Velocity[axis] *= Mathf.Pow(m_DecelerationRate, deltaTime);</span><br><span class="line">                    <span class="keyword">if</span> (Mathf.Abs(m_Velocity[axis]) &lt; <span class="number">1</span>)</span><br><span class="line">                        m_Velocity[axis] = <span class="number">0</span>;</span><br><span class="line">                    position[axis] += m_Velocity[axis] * deltaTime;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// If we have neither elaticity or friction, there shouldn't be any velocity.</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    m_Velocity[axis] = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (m_Velocity != Vector2.zero)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (m_MovementType == MovementType.Clamped)</span><br><span class="line">                &#123;</span><br><span class="line">                    offset = CalculateOffset(position - m_DragContent.anchoredPosition);</span><br><span class="line">                    position += offset;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                SetContentAnchoredPosition(position);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (m_Dragging &amp;&amp; m_Inertia)</span><br><span class="line">        &#123;</span><br><span class="line">            Vector3 newVelocity = (m_DragContent.anchoredPosition - m_PrevPosition) / deltaTime;</span><br><span class="line">            m_Velocity = Vector3.Lerp(m_Velocity, newVelocity, deltaTime * <span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (m_ViewBounds != m_PrevViewBounds || m_ContentBounds != m_PrevContentBounds || m_DragContent.anchoredPosition != m_PrevPosition)</span><br><span class="line">        &#123;</span><br><span class="line">            UpdateScrollbars(offset);</span><br><span class="line">            UISystemProfilerApi.AddMarker(<span class="string">"ScrollRect.value"</span>, <span class="keyword">this</span>);</span><br><span class="line">            m_OnValueChanged.Invoke(normalizedPosition);</span><br><span class="line">            UpdatePrevData();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Hiko shitZ</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">UpdateScrollbars</span>(<span class="params">Vector2 offset</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (m_HorizontalScrollbar)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (m_ContentBounds.size.x &gt; <span class="number">0</span>)</span><br><span class="line">                m_HorizontalScrollbar.size = Mathf.Clamp01((m_ViewBounds.size.x - Mathf.Abs(offset.x)) / m_ContentBounds.size.x);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                m_HorizontalScrollbar.size = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            m_HorizontalScrollbar.<span class="keyword">value</span> = horizontalNormalizedPosition;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO @Hiko use real data content len for scrollbar</span></span><br><span class="line">        <span class="keyword">if</span> (m_VerticalScrollbar)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (m_ContentBounds.size.y &gt; <span class="number">0</span>)</span><br><span class="line">                m_VerticalScrollbar.size = Mathf.Clamp01((m_ViewBounds.size.y - Mathf.Abs(offset.y)) / m_ContentBounds.size.y);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                m_VerticalScrollbar.size = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            m_VerticalScrollbar.<span class="keyword">value</span> = verticalNormalizedPosition;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Hiko shit</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">SetNormalizedPosition</span>(<span class="params"><span class="keyword">float</span> <span class="keyword">value</span>, <span class="keyword">int</span> axis</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// TODO @Hiko set scroll by real content height</span></span><br><span class="line"></span><br><span class="line">        EnsureLayoutHasRebuilt();</span><br><span class="line"></span><br><span class="line">        UpdateBounds();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// How much the content is larger than the view.</span></span><br><span class="line">        <span class="keyword">float</span> hiddenLength = m_ContentBounds.size[axis] - m_ViewBounds.size[axis];</span><br><span class="line">        <span class="comment">// Where the position of the lower left corner of the content bounds should be, in the space of the view.</span></span><br><span class="line">        <span class="keyword">float</span> contentBoundsMinPosition = m_ViewBounds.min[axis] - <span class="keyword">value</span> * hiddenLength;</span><br><span class="line">        <span class="comment">// The new content localPosition, in the space of the view.</span></span><br><span class="line">        <span class="keyword">float</span> newLocalPosition = m_DragContent.localPosition[axis] + contentBoundsMinPosition - m_ContentBounds.min[axis];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// change this cuz we dun use content for this</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Vector3 localPosition = m_Content.localPosition;</span></span><br><span class="line">        <span class="comment">// if (Mathf.Abs(localPosition[axis] - newLocalPosition) &gt; 0.01f)</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     localPosition[axis] = newLocalPosition;</span></span><br><span class="line">        <span class="comment">//     m_Content.localPosition = localPosition;</span></span><br><span class="line">        <span class="comment">//     m_Velocity[axis] = 0;</span></span><br><span class="line">        <span class="comment">//     UpdateBounds();</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™è¾¹æˆ‘åªä¿®æ”¹äº†å‡ ä¸ªä¸ªç®€å•çš„å‡½æ•°ï¼ŒåŸæœ¬è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥è°ƒæ•´Contentä½ç½®çš„ï¼Œæˆ‘åœ¨è¿™è¾¹æŠŠä½ç½®çš„æ›´æ”¹å€¼æ¥æ”¶åˆ°å¹¶é€šè¿‡äº‹ä»¶å‘é€å‡ºå»ã€‚<br>åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨æ‹–æ‹½ç›¸å…³çš„å‡½æ•°ä¸­åº”ç”¨æ–°çš„é€»è¾‘ï¼Œè·å–æ¯æ¬¡æ‹–æ‹½çš„æ›´æ”¹å·®å€¼ï¼Œæ–¹ä¾¿è®¡ç®—ã€‚</p>
<p>ä»£ç å¾ˆä¹±ï¼Œä¹‹åä¼šç›´æ¥æ›´æ–°å…¨éƒ¨ä»£ç ã€‚<br>ç„¶åæˆ‘ä»¬ç¼–å†™å¦å¤–ä¸€ä¸ªç”¨äºæ˜¾ç¤ºUIå†…å®¹çš„ç®€å•æ§åˆ¶å™¨</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">[<span class="meta">RequireComponent(typeof(TempScrollRect))</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempScrollGridController</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">        [<span class="meta">SerializeField</span>]</span><br><span class="line">        <span class="keyword">private</span> TempScrollRect m_scrollRect = <span class="literal">null</span>;</span><br><span class="line">        [<span class="meta">SerializeField</span>]</span><br><span class="line">        <span class="keyword">private</span> Scrollbar m_verticalScrollBar = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">private</span> RectTransform m_scrollRectTransfrom = <span class="literal">null</span>;</span><br><span class="line">        [<span class="meta">SerializeField</span>]</span><br><span class="line">        <span class="keyword">private</span> RectTransform m_viewport = <span class="literal">null</span>;</span><br><span class="line">        [<span class="meta">SerializeField</span>]</span><br><span class="line">        <span class="keyword">private</span> RectTransform m_realContent = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> m_viewItemCount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">bool</span> m_isVertical = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> m_startIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">int</span> CACHE_COUNT = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Vector2 m_itemSize = Vector2.zero;</span><br><span class="line">        <span class="keyword">private</span> Vector2 m_itemStartPos = <span class="keyword">default</span>; <span class="comment">// the showing first item start pos in virwport</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">bool</span> m_hasInited = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        List&lt;TempGridItem&gt; m_fakeItems = <span class="literal">null</span>;</span><br><span class="line">        IReadOnlyList&lt;TempDataItem&gt; m_dataList = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">region</span> test shit</span></span><br><span class="line">        [<span class="meta">Header(<span class="meta-string">"test shit"</span>)</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> TempGridItem m_itemPrefab = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">        [<span class="meta">ContextMenu(<span class="meta-string">"funs"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestSet</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_scrollRect.normalizedPosition = Vector2.right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InjectData</span>(<span class="params">IReadOnlyList&lt;TempDataItem&gt; dataList</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_dataList = dataList;</span><br><span class="line">            <span class="comment">// time to spawn shit</span></span><br><span class="line"></span><br><span class="line">            m_startIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// set default simple draw stuff</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_fakeItems.Count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                m_fakeItems[i].gameObject.SetActive(<span class="literal">true</span>);</span><br><span class="line">                <span class="keyword">if</span> (i &lt; dataList.Count)</span><br><span class="line">                    m_fakeItems[i].Setup(dataList[i].TempName);</span><br><span class="line">                Vector3 pos = m_fakeItems[i].ItemRectTransform.anchoredPosition3D;</span><br><span class="line">                pos -= i * m_fakeItems[i].ItemRectTransform.up * m_itemSize.y;</span><br><span class="line">                m_fakeItems[i].ItemRectTransform.anchoredPosition = pos;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != m_verticalScrollBar)</span><br><span class="line">            &#123;</span><br><span class="line">                m_verticalScrollBar.<span class="keyword">value</span> = <span class="number">0.0f</span>;</span><br><span class="line">                m_verticalScrollBar.size = <span class="number">1.0f</span> / m_dataList.Count;</span><br><span class="line">            &#125;</span><br><span class="line">            m_itemStartPos.y = <span class="number">1.0f</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">InitController</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_hasInited = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDeltaPosition</span>(<span class="params">Vector2 deltaPos</span>) <span class="comment">// 0 ~ 1 for</span></span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">// test vertical</span></span><br><span class="line">            deltaPos.x = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// maybe cache these 2 cuz we dun wanna cal the everytime :)</span></span><br><span class="line">            <span class="keyword">float</span> contentHeight = m_dataList.Count * m_itemSize.y;</span><br><span class="line">            <span class="keyword">float</span> maxStartPosY = contentHeight - m_viewport.rect.height;</span><br><span class="line"></span><br><span class="line">            Vector2 nextTopPos = m_itemStartPos + deltaPos;</span><br><span class="line">            nextTopPos.y = Mathf.Clamp(nextTopPos.y, <span class="number">0.0f</span>, maxStartPosY);</span><br><span class="line">            m_itemStartPos = nextTopPos;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != m_verticalScrollBar)</span><br><span class="line">                m_verticalScrollBar.SetValueWithoutNotify(m_itemStartPos.y / maxStartPosY);</span><br><span class="line">            <span class="comment">// Debug.Log($"content height &#123;contentHeight&#125;; max pos &#123;maxStartPos&#125;; next pos&#123;m_itemStartPos&#125;");</span></span><br><span class="line">            RefreshUIItem();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnScrollBarValueChanged</span>(<span class="params"><span class="keyword">float</span> nextValue</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">float</span> maxStartPosY = m_dataList.Count * m_itemSize.y - m_viewport.rect.height;</span><br><span class="line">            <span class="keyword">float</span> prevValue = m_itemStartPos.y / maxStartPosY;</span><br><span class="line">            <span class="keyword">float</span> deltaValue = nextValue - prevValue;</span><br><span class="line">            Vector2 deltaPos = <span class="keyword">new</span> Vector2(<span class="number">0.0f</span>, maxStartPosY * deltaValue);</span><br><span class="line"></span><br><span class="line">            Vector2 nextTopPos = m_itemStartPos + deltaPos;</span><br><span class="line">            nextTopPos.y = Mathf.Clamp(nextTopPos.y, <span class="number">0.0f</span>, maxStartPosY);</span><br><span class="line">            m_itemStartPos = nextTopPos;</span><br><span class="line"></span><br><span class="line">            RefreshUIItem();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">RefreshUIItem</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Vector2 pos = m_itemStartPos;</span><br><span class="line">            pos.y = m_itemStartPos.y % m_itemSize.y;</span><br><span class="line">            m_startIndex = (<span class="keyword">int</span>)Mathf.FloorToInt(m_itemStartPos.y / m_itemSize.y);</span><br><span class="line">            <span class="comment">// Debug.Log($"check draw offset &#123;pos&#125;");</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_viewItemCount + <span class="number">1</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i + m_startIndex &lt; m_dataList.Count)</span><br><span class="line">                    m_fakeItems[i].Setup(m_dataList[i + m_startIndex].TempName);</span><br><span class="line">                m_fakeItems[i].ItemRectTransform.anchoredPosition = pos - (i * Vector2.up * m_itemSize.y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">region</span> mono method</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Reset</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_scrollRect.GetComponent&lt;ScrollRect&gt;();</span><br><span class="line">            m_scrollRectTransfrom = m_scrollRect.transform <span class="keyword">as</span> RectTransform;</span><br><span class="line">            m_realContent = m_scrollRect.dragContent;</span><br><span class="line">            m_isVertical = m_scrollRect.vertical;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_fakeItems = <span class="keyword">new</span> List&lt;TempGridItem&gt;();</span><br><span class="line">            DestroyAllChildren(m_realContent);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_scrollRect.onValueChangedDelta.AddListener(OnDeltaPosition);</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != m_verticalScrollBar)</span><br><span class="line">                m_verticalScrollBar.onValueChanged.AddListener(OnScrollBarValueChanged);</span><br><span class="line">            <span class="comment">// get some fake stuff to test</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> tempShit = Instantiate(m_itemPrefab, m_realContent);</span><br><span class="line">            m_itemSize = tempShit.ItemSize;</span><br><span class="line">            <span class="comment">// set it height of content</span></span><br><span class="line">            <span class="keyword">float</span> tempHeight = Mathf.Abs(m_viewport.rect.y * m_viewport.localScale.y);</span><br><span class="line">            m_viewItemCount = (<span class="keyword">int</span>)(tempHeight / m_itemSize.y);</span><br><span class="line">            Debug.Log(<span class="string">$"test viewport item count <span class="subst">&#123;m_viewItemCount&#125;</span>"</span>);</span><br><span class="line">            <span class="keyword">if</span> (tempHeight % m_itemSize.y &gt; <span class="number">0</span>)</span><br><span class="line">                m_viewItemCount++;</span><br><span class="line"></span><br><span class="line">            Vector2 size = m_realContent.sizeDelta;</span><br><span class="line">            size.y = m_itemSize.y * (m_viewItemCount + CACHE_COUNT);</span><br><span class="line">            m_realContent.sizeDelta = size;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> spawnCount = m_viewItemCount + CACHE_COUNT;</span><br><span class="line">            m_fakeItems.Add(tempShit);</span><br><span class="line">            tempShit.gameObject.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; spawnCount; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                tempShit = Instantiate(m_itemPrefab, m_realContent);</span><br><span class="line">                m_fakeItems.Add(tempShit);</span><br><span class="line">                tempShit.gameObject.SetActive(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDisable</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_scrollRect.onValueChangedDelta.RemoveListener(OnDeltaPosition);</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> != m_verticalScrollBar)</span><br><span class="line">                m_verticalScrollBar.onValueChanged.RemoveListener(OnScrollBarValueChanged);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">// wat should I do here</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="meta-keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DestroyAllChildren</span>(<span class="params">Transform target</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="literal">null</span> == target)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> childCount = target.childCount;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = childCount - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">            &#123;</span><br><span class="line">                Destroy(target.GetChild(i).gameObject);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TempGridItem</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    <span class="keyword">private</span> RectTransform m_rectTransform = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> RectTransform ItemRectTransform =&gt; m_rectTransform;</span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    <span class="keyword">private</span> Text m_label = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Vector2 m_itemSize = <span class="keyword">default</span>;</span><br><span class="line">    <span class="keyword">public</span> Vector2 ItemSize =&gt; m_itemSize;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Setup</span>(<span class="params"><span class="keyword">in</span> <span class="keyword">string</span> name</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_label.text = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">region</span> mono method</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Reset</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_itemSize = <span class="keyword">new</span> Vector2(m_rectTransform.rect.width, m_rectTransform.rect.height);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_itemSize = <span class="keyword">new</span> Vector2(m_rectTransform.rect.width, m_rectTransform.rect.height);</span><br><span class="line">        m_label.text = <span class="keyword">this</span>.GetInstanceID().ToString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endregion</span> </span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/08/23/20200823-UGUI-ScrollRect-Learn-01/20200823-scrollrectgit01.gif" class="" title="split">
<p>OnDeltaPosition å’Œ OnScrollBarValueChanged æ˜¯åˆ†åˆ«ä»ScrollRectå’ŒScrollBaræ¥å—äº‹ä»¶çš„æ–¹æ³•ï¼Œå¹¶è®¡ç®—å‡ºä¸‹ä¸€æ¬¡ç»˜åˆ¶æ—¶èƒ½å¤Ÿéœ€è¦ç»˜åˆ¶çš„ç¬¬ä¸€ä¸ªUIç‰©ä½“çš„ä½ç½®ã€‚å› ä¸ºæˆ‘å¤ªèœäº†ï¼Œå…ˆå°è¯•ç»˜åˆ¶ç«–å‘çš„ã€‚<br>TempGridItem æ˜¯UIç‰©ä½“ä¸Šçš„ç»„ä»¶ã€‚</p>
<p>ä¸‹é¢æ˜¯æˆ‘çš„å…¨éƒ¨ä»£ç ï¼š<br><a href="https://github.com/2C2C2C/MuyScrollRect/blob/master/Assets/Script/TempScrollRect.cs" target="_blank" rel="noopener">https://github.com/2C2C2C/MuyScrollRect/blob/master/Assets/Script/TempScrollRect.cs</a></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™æœŸå°±åˆ°è¿™é‡Œäº†ï¼Œå…¶å®ä¹Ÿæ²¡å•¥ä¸œè¥¿ã€‚å…¶å®æˆ‘æ„Ÿè§‰ä¹Ÿæ²¡å¿…è¦æ•´ä¸ªé‡å†™ï¼Œå¯ä»¥ç»§æ‰¿ScrollRectçš„ä»£ç ï¼Œç„¶åoverrideéœ€è¦çš„åœ°æ–¹ï¼Œä½†æ˜¯æˆ‘æ˜¯çœŸçš„çœ‹ä¸æ‡‚ï¼Œæ‰€ä»¥åªèƒ½æ•´ç‰‡æ‹¿è¿‡æ¥åˆ°å¤„æ”¹æ”¹åšå®éªŒã€‚<br>è€Œä¸”æˆ‘ä¹Ÿå¸Œæœ›èƒ½æœ‰æ›´å¤šçš„æ§åˆ¶ï¼ŒæŠŠLayoutç›´æ¥é›†æˆè¿›å»ã€‚</p>
<p>ä¸‹æ¬¡æˆ‘ä¼šå°è¯•ç†è§£ScrollRectçš„MoveTypeæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œå› ä¸ºæˆ‘å½“å‰å†™çš„è¿™ä¸ªåªæ”¯æŒelasticçš„ç§»åŠ¨æ–¹å¼ã€‚å¹¶ä¸”åŸæœ¬çš„ScrollRectåœ¨elasticç§»åŠ¨æ¨¡å¼ä¸‹ï¼Œå³ä½¿çœ‹èµ·æ¥å·²ç»åœæ­¢ç§»åŠ¨äº†ï¼Œä»ç„¶å¯èƒ½è¿˜åœ¨ç»§ç»­äº§ç”Ÿdraw callï¼Œå› ä¸ºé€Ÿåº¦è¿˜åœ¨å˜åŒ–ã€‚</p>
<p>é¡ºä¾¿æ¨èä¸€ä¸‹è¿™ä¸ªScrollRectï¼Œæˆ‘è§‰å¾—å†™å¾—æŒºå¥½çš„ï¼Œå€¼å¾—å­¦ä¹ ã€‚<br><a href="https://github.com/qiankanglai/LoopScrollRect" target="_blank" rel="noopener">https://github.com/qiankanglai/LoopScrollRect</a></p>
]]></content>
      <categories>
        <category>Unity</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>UGUI</tag>
      </tags>
  </entry>
  <entry>
    <title>Unity OnAudioFilterRead å­¦ä¹ ç¬”è®°</title>
    <url>/2020/10/17/20201017-unity-onaudiofilterread/</url>
    <content><![CDATA[<p>æœ€è¿‘æƒ³ç€åšä¸€ä¸ªéŸ³ä¹æ¸¸æˆçš„DEMOè¯•è¯•ï¼Œä½†æ˜¯æ¯«æ— å¤´ç»ªä¸çŸ¥é“æ€ä¹ˆå¼€å§‹ã€‚çœ‹äº†ä¸‹é‚¦é‚¦çš„è§†é¢‘å†³å®šå…ˆæŠŠèŠ‚æ‹å™¨åšå‡ºæ¥ï¼Œå†ç”¨èŠ‚æ‹å™¨æä¾›çš„äº‹ä»¶å»æ”¯æ’‘èµ·å…¶å®ƒçš„éƒ¨åˆ†ã€‚</p>
<p>å› ä¸ºå®Œå…¨æ²¡åšè¿‡éŸ³ä¹æ¸¸æˆï¼Œè€Œä¸”ä¹Ÿå¯¹æ¸¸æˆå¼•æ“ä»¥åŠå£°éŸ³æ–¹é¢æ²¡æœ‰ä»€ä¹ˆäº†è§£ï¼Œæ‰€ä»¥å¼€å§‹åœ¨ç½‘ä¸Šæµ·æœèŠ‚æ‹å™¨çš„ä»£ç å¹¶æ‹¿æ¥æµ‹è¯•ã€‚</p>
<p>æœ€åå¾—åˆ°ä¿©è§£å†³æ–¹æ¡ˆï¼š1.åœ¨Unityé‡Œå†™ä¸€ä¸ªï¼›2.ä½¿ç”¨ä¸“ä¸šçš„éŸ³é¢‘æ’ä»¶ï¼ˆå¦‚CRIWAREæˆ–è€…WWISEï¼‰ï¼Œä½¿ç”¨é‡Œé¢çš„èŠ‚æ‹å™¨ã€‚<br>å› ä¸ºåªæ˜¯å°è¯•åšåšDEMOï¼Œå†³å®šå…ˆä¸å¼•å…¥éŸ³é¢‘æ’ä»¶äº†ã€‚</p>
<p>åœ¨å†²æµªæŸ¥è¯¢çš„æ—¶å€™å‘ç°Unityçš„å®˜æ–¹æ–‡æ¡£ä¸­å·²ç»å†™å¥½äº†ä¸€ä¸ªï¼çœŸæ˜¯å¤ªæ£’äº†ï¼Œé©¬ä¸Šå«–è¿‡æ¥ç”¨ã€‚ä¸ºäº†æ–¹ä¾¿ä¹‹åä½¿ç”¨ï¼Œæˆ‘ä¹Ÿå†³å®šæŠŠè¿™ä»½ä»£ç å°½å¯èƒ½çœ‹æ‡‚ã€‚</p>
<p>ä¸‹é¢æ˜¯Unityçš„æºç <br><a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.OnAudioFilterRead.html" target="_blank" rel="noopener">MonoBehaviour.OnAudioFilterRead(float[], int)</a><br><a href="https://docs.unity3d.com/ScriptReference/AudioSettings-dspTime.html" target="_blank" rel="noopener">AudioSettings.dspTime</a></p>
<h1 id="æå–åŸºæœ¬ä»£ç "><a href="#æå–åŸºæœ¬ä»£ç " class="headerlink" title="æå–åŸºæœ¬ä»£ç "></a>æå–åŸºæœ¬ä»£ç </h1><p>é¦–å…ˆæˆ‘å¤§æ¦‚è·‘äº†ä¸€ä¸‹ï¼Œçœ‹äº†ä¸€ä¸‹ï¼Œæå–å‡ºäº†æˆ‘è®¤ä¸ºæ˜¯èŠ‚æ‹å™¨æœ€åŸºæœ¬çš„éƒ¨åˆ†ã€‚</p>
<p>signatureHi / signatureLo =&gt; è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å‡ å‡ æ‹ã€‚<br>signatureHiæ˜¯æ¯å°èŠ‚çš„æ‹å­æ•°ï¼ŒsignatureLoæ˜¯æŒ‡xåˆ†éŸ³ç¬¦ä¸º1æ‹ã€‚accentæ˜¯æŒ‡å½“å‰å°ç»“å†…çš„æ‹å­æ•°ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">[<span class="meta">RequireComponent(typeof(AudioSource))</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MetronomeExample</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span> bpm = <span class="number">128.0f</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> signatureHi = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> signatureLo = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> nextTick = <span class="number">0.0F</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> sampleRate = <span class="number">0.0F</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> accent= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">bool</span> running = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> System.Action&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; OnBeatTick;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        accent = signatureHi;</span><br><span class="line">        sampleRate = AudioSettings.outputSampleRate;</span><br><span class="line">        nextTick = AudioSettings.dspTime * sampleRate;</span><br><span class="line">        running = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnAudioFilterRead</span>(<span class="params"><span class="keyword">float</span>[] data, <span class="keyword">int</span> channels</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!running)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> samplesPerTick = sampleRate * (<span class="number">60.0f</span> / bpm) * (<span class="number">4.0f</span> / signatureLo);</span><br><span class="line">        <span class="keyword">double</span> sample = AudioSettings.dspTime * sampleRate;</span><br><span class="line">        <span class="keyword">int</span> dataLen = data.Length / channels;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n &lt; dataLen)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (sample + n &gt;= nextTick)</span><br><span class="line">            &#123;</span><br><span class="line">                nextTick += samplesPerTick;</span><br><span class="line">                <span class="keyword">if</span> (++accent &gt; signatureHi)</span><br><span class="line">                &#123;</span><br><span class="line">                    accent = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                OnBeatTick?.Invoke(accent, signatureHi);</span><br><span class="line">                Debug.Log(<span class="string">$"Tick: <span class="subst">&#123;accent&#125;</span> / <span class="subst">&#123;signatureHi&#125;</span>"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            n++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">nextTick = AudioSettings.dspTime * sampleRate; </span><br><span class="line">``` </span><br><span class="line">ä» Start() å¼€å§‹ï¼Œå…ˆåšèŠ‚æ‹å™¨çš„åˆå§‹åŒ–ã€‚ å› ä¸ºéœ€è¦å‡†ç¡®çš„éŸ³é¢‘æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šä½¿ç”¨éŸ³é¢‘ç›¸å…³çš„å‡½æ•°æ¥æ“ä½œï¼Œè€Œä¸æ˜¯ä½¿ç”¨ Update()ã€‚</span><br><span class="line">é€šè¿‡å½“å‰çš„æ—¶é—´ * å½“å‰çš„é‡‡æ ·ç‡ï¼Œå¤§æ¦‚å°±èƒ½å¾—åˆ°å½“å‰çš„éŸ³é¢‘ä¿¡æ¯æ€»é‡ã€‚</span><br><span class="line"></span><br><span class="line">``` CSharp</span><br><span class="line">OnAudioFilterRead(<span class="keyword">float</span>[] data, <span class="keyword">int</span> channels)</span><br><span class="line">``` </span><br><span class="line">æ¥ç€æˆ‘ä»¬å¯ä»¥æŠŠ OnAudioFilterRead() çœ‹ä½œ Update() æ¥ä½¿ç”¨ã€‚ </span><br><span class="line">channels å¤§æ¦‚æ˜¯å£°é“æ•°,æ¯”å¦‚æˆ‘å¹³æ—¶ç”¨çš„è¾£é¸¡æœºå™¨æ˜¯åŒå£°é“ï¼ˆå·¦å³çš„ï¼‰ï¼Œé‚£ä¹ˆ channels çš„å€¼å°±æ˜¯<span class="number">2</span>ã€‚</span><br><span class="line">data[] ä¸­å­˜å‚¨çš„æ˜¯å½“å‰è¿™ä¸€æ¬¡éå†çš„éŸ³é¢‘æ•°æ®ï¼Œä¹Ÿä¼šåŒ…å«ä¸åŒå£°é“çš„éŸ³é¢‘ä¿¡æ¯ï¼Œæ¯”å¦‚\[<span class="number">0L</span>, <span class="number">1</span>R, <span class="number">2L</span>, <span class="number">3</span>R....\]ä¹‹ç±»çš„ã€‚</span><br><span class="line"></span><br><span class="line">``` CSharp</span><br><span class="line"><span class="keyword">double</span> samplesPerTick = sampleRate * (<span class="number">60.0f</span> / bpm) * (<span class="number">4.0f</span> / signatureLo);</span><br><span class="line"><span class="keyword">double</span> sample = AudioSettings.dspTime * sampleRate;</span><br><span class="line">``` </span><br><span class="line">è¿™é‡Œæ˜¯ç”¨ä¸è®¡ç®—æ‹å­çš„é—´éš”æ—¶é—´ã€‚(<span class="number">60.0f</span> / bpm) æ‰€è®¡ç®—çš„æ˜¯å¯¹äº <span class="number">4</span>/<span class="number">4</span> æ‹è€Œè¨€çš„æ‹å­é—´éš”æ—¶é—´ã€‚</span><br><span class="line">è€Œ (<span class="number">4.0f</span> / signatureLo) å¯ä»¥ç®—å‡ºä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¹˜ç»™ <span class="number">4</span>/<span class="number">4</span> æ‹è€Œè¨€çš„æ‹å­é—´éš”æ—¶é—´ã€‚</span><br><span class="line">sample å¯ä»¥ç²—æµ…çš„è®¤ä¸ºæ˜¯å½“å‰çš„æ—¶é—´ã€‚</span><br><span class="line"></span><br><span class="line">``` CSharp</span><br><span class="line"><span class="keyword">while</span> (n &lt; dataLen)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (sample + n &gt;= nextTick)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨èµ·æ¥å°±ç›¸å½“äº</span></span><br><span class="line">        <span class="comment">// nextTime = Time.time * timeInterval; </span></span><br><span class="line">        nextTick += samplesPerTick;</span><br><span class="line">        <span class="keyword">if</span> (++accent &gt; signatureHi)</span><br><span class="line">        &#123;</span><br><span class="line">            accent = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        OnBeatTick?.Invoke(accent, signatureHi);</span><br><span class="line">        Debug.Log(<span class="string">$"Tick: <span class="subst">&#123;accent&#125;</span> / <span class="subst">&#123;signatureHi&#125;</span>"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    n++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™è¾¹éå†ä¸€ä¸‹æ¥ä¸‹æ¥ä¼šæ’­æ”¾çš„éŸ³é¢‘æ•°æ®ã€‚æ ¹æ®æ•°æ®çš„é•¿åº¦æ¥åˆ¤æ–­æ˜¯å¦ä¼šéœ€è¦å‘å‡ºèŠ‚æ‹å™¨çš„ tickã€‚</p>
<h1 id="èŠ‚æ‹å™¨éŸ³æ•ˆ"><a href="#èŠ‚æ‹å™¨éŸ³æ•ˆ" class="headerlink" title="èŠ‚æ‹å™¨éŸ³æ•ˆ"></a>èŠ‚æ‹å™¨éŸ³æ•ˆ</h1><p>åœ¨å®˜æ–¹æºç ä¸­è¿˜ç”¨åˆ°äº†ä¸€äº›å…¶ä»–çš„å˜é‡ï¼Œå¹¶ç»™dataèµ‹å€¼ï¼Œå…¶å®è¿™äº›å°±æ˜¯ä¸ºäº†æ’­æ”¾èŠ‚æ‹å™¨éŸ³æ•ˆè€Œå­˜åœ¨çš„ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">while</span> (n&lt;dataLen)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">float</span> x = gain * amp * Mathf.Sin(phase);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; channels)</span><br><span class="line">    &#123;</span><br><span class="line">        data[n * channels + i] += x;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (sample + n &gt;= nextTick)</span><br><span class="line">    &#123;</span><br><span class="line">        nextTick += samplesPerTick;</span><br><span class="line">        amp = <span class="number">1.0F</span>;</span><br><span class="line">        <span class="keyword">if</span> (++accent &gt; signatureHi)</span><br><span class="line">        &#123;</span><br><span class="line">            accent = <span class="number">1</span>;</span><br><span class="line">            amp *= <span class="number">2.0F</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        OnBeatTick?.Invoke(accent, signatureHi);</span><br><span class="line">        Debug.Log(<span class="string">$"Tick: <span class="subst">&#123;accent&#125;</span> / <span class="subst">&#123;signatureHi&#125;</span>"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    phase += amp* <span class="number">0.3F</span>;</span><br><span class="line">    amp *= <span class="number">0.993F</span>;</span><br><span class="line">    n++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ‘¸äº†"><a href="#æ‘¸äº†" class="headerlink" title="æ‘¸äº†"></a>æ‘¸äº†</h1><p>æ„Ÿè§‰è‡ªå·±çš„çŸ¥è¯†é¢åˆçª„åˆæµ…ï¼Œè¿˜æ˜¯éœ€è¦å¤šçœ‹ä¹¦æ‰è¡Œã€‚</p>
]]></content>
      <categories>
        <category>Unity</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>Audio</tag>
      </tags>
  </entry>
  <entry>
    <title>æŸ¥è¯¢Unity Objectåœ¨å·¥ç¨‹ä¸­çš„å¼•ç”¨</title>
    <url>/2020/11/21/20201121-find-asset-reference/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¸Šå‘¨æŠŠbugä¿®å¾—å·®ä¸å¤šäº†ï¼Œè¿™å‘¨ç¨å¾®æœ‰ç‚¹ç©ºé—²æ—¶é—´äº†ï¼Œå°±æŠŠä»¥å‰æƒ³åšçš„ä¸€äº›ä¸œè¥¿å¤§æ¦‚çœ‹äº†ä¸€ä¸‹ã€‚<br>ä¹‹å‰å› ä¸ºæ¸…ç†æ–‡ä»¶æ²¡æœ‰åŠæ—¶æ¸…é™¤ç›¸å…³å¼•ç”¨ï¼Œç»“æœé¡¹ç›®è·‘èµ·æ¥çš„æ—¶å€™æœ‰å„ç§æ²™é›•æŠ¥é”™ã€‚åªèƒ½å†ä¸€ä¸ªä¸ªç‰©ä½“æ£€æŸ¥ï¼Œå¥½éº»çƒ¦ã€‚<br>äºæ˜¯æƒ³è¯•è¯•èƒ½ä¸èƒ½æŸ¥åˆ°æŸä¸ªç‰©ä½“è¢«å…¶å®ƒå“ªäº›ç‰©ä½“å¼•ç”¨ã€‚</p>
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>å¥½åœ¨ Unityæä¾›äº†è¿™ä¸ªå‡½æ•° AssetDatabase.GetDependencies() ,å¯ä»¥è·å¾—æŸä¸ª asset çš„ä¾èµ–é¡¹ã€‚<br><a href="https://docs.unity3d.com/ScriptReference/AssetDatabase.GetDependencies.html" target="_blank" rel="noopener">AssetDatabase.GetDependencies()</a></p>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦çŸ¥é“ç‰©ä½“ A è¢«å“ªäº›å…¶ä»–çš„ç‰©ä½“å¼•ç”¨ã€‚é‚£å°±éå†æ‰€æœ‰ç‰©ä½“çš„ä¾èµ–é¡¹ï¼ŒæŠŠä¾èµ–é¡¹ä¸­åŒ…å«ç‰©ä½“ A çš„ç‰©ä½“ç­›é€‰å‡ºæ¥å³å¯ã€‚</p>
<h1 id="ä¸Šä»£ç "><a href="#ä¸Šä»£ç " class="headerlink" title="ä¸Šä»£ç "></a>ä¸Šä»£ç </h1><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// to find the reference of the target unity object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">FindReferencesInProject</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">TryFindReferenceOfUobject</span>(<span class="params">UnityEngine.Object uobject</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">bool</span> result = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">string</span> path = AssetDatabase.GetAssetPath(uobject);</span><br><span class="line">        <span class="keyword">if</span> (AssetDatabase.IsValidFolder(path))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// dun do it for a folder :)</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        FindObjectReference(uobject);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// why the order is like this?</span></span><br><span class="line">    [<span class="meta">MenuItem(<span class="meta-string">"Assets/Find References In Project"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">FindSelectedObjectReferences</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != Selection.activeObject)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">string</span> path = AssetDatabase.GetAssetPath(Selection.activeObject);</span><br><span class="line">            <span class="keyword">if</span> (!AssetDatabase.IsValidFolder(path))</span><br><span class="line">            &#123;</span><br><span class="line">                FindObjectReference(Selection.activeObject);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">FindObjectReference</span>(<span class="params">UnityEngine.Object uobject</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        System.Diagnostics.Stopwatch stopWatcher = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</span><br><span class="line">        stopWatcher.Start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">string</span> targetPath = AssetDatabase.GetAssetPath(uobject);</span><br><span class="line">        List&lt;<span class="keyword">string</span>&gt; referencesPaths = <span class="keyword">new</span> List&lt;<span class="keyword">string</span>&gt;();</span><br><span class="line">        Dictionary&lt;<span class="keyword">string</span>, List&lt;<span class="keyword">string</span>&gt;&gt; referenceCache = <span class="keyword">new</span> Dictionary&lt;<span class="keyword">string</span>, List&lt;<span class="keyword">string</span>&gt;&gt;();</span><br><span class="line">        <span class="keyword">string</span>[] assetGuids = AssetDatabase.FindAssets(<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; assetGuids.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">string</span> assetPath = AssetDatabase.GUIDToAssetPath(assetGuids[i]);</span><br><span class="line">            <span class="keyword">string</span>[] dependencies = AssetDatabase.GetDependencies(assetPath, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; dependencies.Length; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (dependencies[j] == targetPath)</span><br><span class="line">                &#123;</span><br><span class="line">                    referencesPaths.Add(assetPath);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        FindReferencesInProjectEditor.OpenWindow();</span><br><span class="line">        FindReferencesInProjectEditor window = FindReferencesInProjectEditor.GetWindow();</span><br><span class="line">        window.SetPaths(referencesPaths.ToArray());</span><br><span class="line">        window.SetTargetUobject(uobject);</span><br><span class="line"></span><br><span class="line">        stopWatcher.Stop();</span><br><span class="line">        Debug.Log(<span class="string">$"search references for <span class="subst">&#123;uobject.name&#125;</span> cost <span class="subst">&#123;stopWatcher.ElapsedMilliseconds&#125;</span>ms"</span>);</span><br><span class="line"></span><br><span class="line">        referenceCache.Clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// a simple window to show the result, and also we can ping those result object :D</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FindReferencesInProjectEditor</span> : <span class="title">EditorWindow</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Rect m_viewportRect = <span class="keyword">default</span>;</span><br><span class="line">    <span class="keyword">private</span> Rect m_listRect = <span class="keyword">default</span>;</span><br><span class="line">    <span class="keyword">private</span> Rect m_bottomRect = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> m_scrollPosition = <span class="keyword">default</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">string</span>[] m_targetPaths = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">float</span> ELEMENT_HEIGHT = <span class="number">20.0f</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">float</span> ELEMENT_ICON_SIZE = <span class="number">20.0f</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">float</span> SCROLLER_WIDTH = <span class="number">15.0f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">bool</span> m_hasGetGUIStyle = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GUIStyle m_scrollerStyle = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> GUIStyle m_buttonElementStyle = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UnityEngine.Object m_selectedUnityObject = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> System.Type m_uobjType = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OpenWindow</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        FindReferencesInProjectEditor window = GetWindow&lt;FindReferencesInProjectEditor&gt;();</span><br><span class="line">        Texture2D icon = EditorGUIUtility.Load(<span class="string">"icons/UnityEditor.ConsoleWindow.png"</span>) <span class="keyword">as</span> Texture2D;</span><br><span class="line">        window.titleContent = <span class="keyword">new</span> GUIContent(<span class="string">"reference find result"</span>, icon);</span><br><span class="line">        Vector2 minSize = <span class="keyword">new</span> Vector2(<span class="number">500.0f</span>, <span class="number">300.0f</span>);</span><br><span class="line">        window.minSize = minSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> FindReferencesInProjectEditor <span class="title">GetWindow</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> GetWindow&lt;FindReferencesInProjectEditor&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetPaths</span>(<span class="params"><span class="keyword">in</span> <span class="keyword">string</span>[] paths</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_targetPaths = paths;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetTargetUobject</span>(<span class="params">UnityEngine.Object uobject</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_selectedUnityObject = uobject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawContent</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// only use half space of this shit window</span></span><br><span class="line">        m_viewportRect = <span class="keyword">new</span> Rect(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="keyword">this</span>.position.width - SCROLLER_WIDTH, <span class="keyword">this</span>.position.height * <span class="number">0.8f</span>);</span><br><span class="line">        m_listRect = <span class="keyword">new</span> Rect(<span class="number">0.0f</span>, <span class="number">0.0f</span>, m_viewportRect.width, m_viewportRect.height);</span><br><span class="line">        <span class="keyword">int</span> elementCount = m_targetPaths.Length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (elementCount &lt; <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        GUI.BeginClip(m_listRect); <span class="comment">// to clip the overflow stuff</span></span><br><span class="line">        <span class="keyword">int</span> indexOffset = Mathf.FloorToInt(m_scrollPosition / ELEMENT_HEIGHT);</span><br><span class="line">        <span class="keyword">int</span> showCount = Mathf.CeilToInt(m_listRect.height / ELEMENT_HEIGHT);</span><br><span class="line">        showCount = showCount &gt; elementCount ? elementCount : showCount;</span><br><span class="line">        <span class="keyword">float</span> startPosY = (indexOffset * ELEMENT_HEIGHT) - m_scrollPosition;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; showCount; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Rect elementRect = <span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span> + startPosY + i * ELEMENT_HEIGHT, m_listRect.width, ELEMENT_HEIGHT);</span><br><span class="line">            DrawElement(elementRect, indexOffset + i);</span><br><span class="line">        &#125;</span><br><span class="line">        GUI.EndClip();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawElement</span>(<span class="params">Rect elementRect, <span class="keyword">int</span> dataIndex</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (dataIndex &lt; m_targetPaths.Length &amp;&amp; GUI.Button(elementRect, <span class="string">$"path <span class="subst">&#123;m_targetPaths[dataIndex]&#125;</span> ;"</span>, m_buttonElementStyle))</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">$"<span class="subst">&#123;m_targetPaths[dataIndex]&#125;</span>"</span>);</span><br><span class="line">            UnityEngine.Object targetObj = AssetDatabase.LoadAssetAtPath&lt;UnityEngine.Object&gt;(m_targetPaths[dataIndex]);</span><br><span class="line">            EditorGUIUtility.PingObject(targetObj);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawScroller</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// draw scroller on the right correctly</span></span><br><span class="line">        <span class="keyword">int</span> elementCount = m_targetPaths.Length;</span><br><span class="line">        <span class="keyword">float</span> fullElementHeight = elementCount * ELEMENT_HEIGHT;</span><br><span class="line"></span><br><span class="line">        Rect scrollbarRect = <span class="keyword">new</span> Rect(m_viewportRect.x + m_viewportRect.width, m_viewportRect.y, SCROLLER_WIDTH, m_viewportRect.height);</span><br><span class="line">        m_scrollPosition = Mathf.Max(<span class="number">0</span>, GUI.VerticalScrollbar(scrollbarRect, m_scrollPosition, m_listRect.height, <span class="number">0</span>, Mathf.Max(fullElementHeight, m_listRect.height)));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> controlId = GUIUtility.GetControlID(FocusType.Passive);</span><br><span class="line">        <span class="keyword">float</span> scrollSensitivity = ELEMENT_HEIGHT;</span><br><span class="line">        <span class="keyword">float</span> maxScrollPos = (fullElementHeight &gt; m_listRect.height) ? (fullElementHeight - m_listRect.height) : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (EventType.ScrollWheel == Event.current.GetTypeForControl(controlId))</span><br><span class="line">        &#123;</span><br><span class="line">            m_scrollPosition = Mathf.Clamp(m_scrollPosition + Event.current.delta.y * scrollSensitivity, <span class="number">0</span>, maxScrollPos);</span><br><span class="line">            Event.current.Use();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">GetGUIStyle</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// scroller</span></span><br><span class="line">        m_scrollerStyle = <span class="keyword">new</span> GUIStyle(GUI.skin.verticalScrollbar);</span><br><span class="line">        m_scrollerStyle.stretchWidth = <span class="literal">false</span>;</span><br><span class="line">        m_scrollerStyle.fixedWidth = SCROLLER_WIDTH;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// button element</span></span><br><span class="line">        m_buttonElementStyle = <span class="keyword">new</span> GUIStyle(GUI.skin.button);</span><br><span class="line">        m_buttonElementStyle.alignment = TextAnchor.MiddleLeft;</span><br><span class="line"></span><br><span class="line">        m_uobjType = <span class="keyword">typeof</span>(UnityEngine.Object);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawBottom</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_bottomRect = <span class="keyword">new</span> Rect(<span class="number">0.0f</span>, <span class="keyword">this</span>.position.height * <span class="number">0.8f</span>, <span class="keyword">this</span>.position.width, <span class="keyword">this</span>.position.height * <span class="number">0.2f</span>);</span><br><span class="line">        Rect fieldRect = <span class="keyword">new</span> Rect(<span class="number">10.0f</span>, m_bottomRect.y + <span class="number">10.0f</span>, <span class="number">100.0f</span>, <span class="number">20.0f</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == m_uobjType)</span><br><span class="line">            m_uobjType = <span class="keyword">typeof</span>(UnityEngine.Object);</span><br><span class="line"></span><br><span class="line">        m_selectedUnityObject = EditorGUI.ObjectField(fieldRect, m_selectedUnityObject, m_uobjType, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        Rect buttonRect = <span class="keyword">new</span> Rect(<span class="number">150.0f</span>, m_bottomRect.y, <span class="number">200.0f</span>, <span class="number">40.0f</span>);</span><br><span class="line">        <span class="keyword">if</span> (GUI.Button(buttonRect, <span class="string">"try find reference"</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            FindObjectReference();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FindObjectReference</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == m_selectedUnityObject)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Clear();</span><br><span class="line">        FindReferencesInProject.TryFindReferenceOfUobject(m_selectedUnityObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Clear</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        m_targetPaths = System.Array.Empty&lt;<span class="keyword">string</span>&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnGUI</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!m_hasGetGUIStyle)</span><br><span class="line">        &#123;</span><br><span class="line">            GetGUIStyle();</span><br><span class="line">            m_hasGetGUIStyle = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        DrawContent();</span><br><span class="line">        DrawScroller();</span><br><span class="line">        DrawBottom();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/11/21/20201121-find-asset-reference/20201121-pic001.png" class="" title="split">
<img src="/2020/11/21/20201121-find-asset-reference/20201121-pic002.png" class="" title="split">
<p>æœç´¢ç»“æœæˆ‘é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ editor window æ¥æ˜¾ç¤ºã€‚<br>åŒæ—¶è¿˜èƒ½å¡«å…¥æ–°çš„ç›®æ ‡ç‰©ä½“å†åšä¸€æ¬¡æœç´¢ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ€è¿‘éƒ½æ²¡æœ‰åšç¼–è¾‘å™¨è¿™è¾¹çš„å¼€å‘ï¼Œæ„Ÿè§‰ç›´æ¥é€€å›äº†èµ·ç‚¹ã€‚æ„Ÿè§‰Unityç¼–è¾‘å™¨çš„æ–‡æ¡£æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆè¯¦ç»†ï¼Œå¾ˆå¤šæ—¶å€™åè€Œæ²¡æœ‰é—®åŒäº‹æ¥å¾—æ–¹ä¾¿ã€‚å¯èƒ½è¯¥æé«˜è‡ªå·±çš„è‹±æ–‡æ°´å¹³äº†ã€‚</p>
]]></content>
      <categories>
        <category>UnityEditor</category>
      </categories>
      <tags>
        <tag>Unity</tag>
        <tag>unityEditor</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/05/03/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>JSè„šæœ¬åˆ é™¤è±†ç“£å¹¿æ’­</title>
    <url>/2020/12/20/20201220-delete-douban-post/</url>
    <content><![CDATA[<h1 id="JSè„šæœ¬åˆ é™¤è±†ç“£å¹¿æ’­"><a href="#JSè„šæœ¬åˆ é™¤è±†ç“£å¹¿æ’­" class="headerlink" title="JSè„šæœ¬åˆ é™¤è±†ç“£å¹¿æ’­"></a>JSè„šæœ¬åˆ é™¤è±†ç“£å¹¿æ’­</h1><p>å¾ˆä¹…ä»¥å‰ä¸ºäº†æ¸…ç†è‡ªå·±SPAMåœ¨å¾®åšçš„ä¸œè¥¿ï¼Œæ‰¾è¿‡æ‰¹é‡åˆ é™¤å¾®åšçš„è„šæœ¬ã€‚ç°åœ¨ä¹Ÿæƒ³é¡ºæ‰‹æ¸…ç†ä¸€ä¸‹è±†ç“£çš„ï¼Œä¸è¿‡æ²¡æ‰¾åˆ°æ¯”è¾ƒå¥½ç”¨çš„ã€‚<br>ä¸è¿‡å®Œå…¨ä¸ä¼šWEBå¼€å‘ï¼Œä¹Ÿåªèƒ½è‡ªå·±æ‹¼å‡‘ä¸€ä¸‹ã€‚</p>
<p>ç›´æ¥ä¸Šä»£ç å§</p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>è±†ç“£æœ‰ä¿æŠ¤æœºåˆ¶çš„ï¼Œå¦‚æœåœ¨çŸ­æ—¶é—´å†…ç–¯ç‹‚å‘é€è¯·æ±‚ï¼Œä¼šåœ¨ä¸€å®šæ—¶é—´å†…è¢«BAN IPï¼ˆäº²èº«ç»å†ï¼‰ã€‚<br>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯•ç€ç”¨éšæœºç­‰å¾…çš„æ–¹å¼æ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// I steal this from somewhere</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleepWait</span>(<span class="params">waitMsec</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> startMsec = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">new</span> <span class="built_in">Date</span>() - startMsec &lt; waitMsec);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> step = <span class="number">0</span>; step &lt; <span class="number">10</span>; step++) &#123;</span><br><span class="line">        location.reload();</span><br><span class="line">        <span class="keyword">var</span> waitDuration = (<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">10</span>) + <span class="number">1</span>) * <span class="number">10000</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'test log, next exec in'</span> + waitDuration + <span class="string">'ms'</span>);</span><br><span class="line">        sleepWait(waitDuration);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤çš„ä»£ç æ˜¯æˆ‘ç™½å«–æ¥çš„ï¼Œåœ¨ æˆ‘çš„å¹¿æ’­ çš„é¡µé¢é‡Œæ‰§è¡Œè¿™ä¸ªå‡½æ•°å¤§æ¦‚å¯ä»¥åˆ é™¤å½“å‰é¡µé¢ä¸­çš„æ‰€æœ‰å¹¿æ’­ã€‚<br>ä¸è¿‡è½¬å‘å¥½åƒä¸ä¸€å®šèƒ½åˆ é™¤ï¼Œä¹‹åè¿˜å¾—æ‰¾åˆ«çš„æ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// I steal this from somewhere</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execDelTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params">c</span>) </span>&#123; $.post_withck(<span class="string">"/j/status/delete"</span>, &#123; <span class="attr">sid</span>: c &#125;) &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span>(<span class="params">c</span>) </span>&#123; $.post_withck(<span class="string">"/j/status/unreshare"</span>, &#123; <span class="attr">sid</span>: c &#125;) &#125;;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"a[data-reshare-id]"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        b($(<span class="keyword">this</span>).attr(<span class="string">"data-reshare-id"</span>));</span><br><span class="line">        $(<span class="keyword">this</span>).hide()</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"div[data-sid]"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        a($(<span class="keyword">this</span>).attr(<span class="string">"data-sid"</span>));</span><br><span class="line">        $(<span class="keyword">this</span>).hide()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼Œä¸è¿‡çœŸçš„æ€•è¢«BAN IP å¯ä»¥æŠŠéšæœºç­‰å¾…çš„æ—¶é—´è®¾å®šå¾—é•¿ä¸€äº›</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// I steal this from somewhere</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleepWait</span>(<span class="params">waitMsec</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> startMsec = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">new</span> <span class="built_in">Date</span>() - startMsec &lt; waitMsec);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// I steal this from somewhere</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execDelTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params">c</span>) </span>&#123; $.post_withck(<span class="string">"/j/status/delete"</span>, &#123; <span class="attr">sid</span>: c &#125;) &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span>(<span class="params">c</span>) </span>&#123; $.post_withck(<span class="string">"/j/status/unreshare"</span>, &#123; <span class="attr">sid</span>: c &#125;) &#125;;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"a[data-reshare-id]"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        b($(<span class="keyword">this</span>).attr(<span class="string">"data-reshare-id"</span>));</span><br><span class="line">        $(<span class="keyword">this</span>).hide()</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"div[data-sid]"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        a($(<span class="keyword">this</span>).attr(<span class="string">"data-sid"</span>));</span><br><span class="line">        $(<span class="keyword">this</span>).hide()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execDelLoop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> step = <span class="number">0</span>; step &lt; <span class="number">10</span>; step++) &#123;</span><br><span class="line">        location.reload();</span><br><span class="line">        <span class="keyword">var</span> waitDuration = (<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">10</span>) + <span class="number">1</span>) * <span class="number">10000</span>;</span><br><span class="line">        sleepWait(waitDuration);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// finally execute deletion :D</span></span><br><span class="line">execDelLoop();</span><br></pre></td></tr></table></figure>
<h2 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>æ„Ÿè§‰webè¿™è¾¹å¯ä»¥åšè›®å¤šæ–¹ä¾¿æ—¥å¸¸ç”Ÿæ´»ç”¨çš„è„šæœ¬ï¼Œæ”¹å¤©çœŸçš„è¦å¼€å§‹å­¦ä¸€å­¦æ‰è¡Œã€‚</p>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å¸¸ç”¨</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
</search>
